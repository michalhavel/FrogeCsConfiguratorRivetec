{"map":"{\"version\":3,\"sources\":[\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\EventsEmitter\\\\EventsEmitter.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\EventsEmitter\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\Viewing.Extension.ModelTransformer\\\\TransformGizmos.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\Viewing.Extension.ModelTransformer\\\\Viewing.Tool.Translate.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\Viewing.Extension.ModelTransformer\\\\Viewing.Tool.Rotate.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\Viewer.Tooltip\\\\Viewer.Tooltip.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\Viewer.Tooltip\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\ToolPanelBase\\\\ToolPanelBase.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\ToolPanelBase\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\SwitchButton\\\\SwitchButton.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\SwitchButton\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\UIComponent\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\UIComponent\\\\UIComponent.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\Dropdown\\\\Dropdown.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\Dropdown\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\Viewing.Extension.ModelTransformer\\\\Viewing.Extension.ModelTransformer.Panel.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\Viewer.ExtensionBase\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\Viewer.ExtensionBase\\\\Viewer.ExtensionBase.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\Viewer.Toolkit\\\\Viewer.Toolkit.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\components\\\\Viewer.Toolkit\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\Viewing.Extension.ModelTransformer\\\\Viewing.Extension.ModelTransformer.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\extensions\\\\Viewing.Extension.ModelTransformer\\\\index.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\importCsvData.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\ForgeViewer.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\js\\\\oauth.js\",\"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\src\\\\index.js\"],\"names\":[\"EventsEmitter\",\"Object\",\"classCallCheck\",\"this\",\"_events\",\"events\",\"fct\",\"_this\",\"split\",\"forEach\",\"event\",\"push\",\"_this2\",\"undefined\",\"splice\",\"indexOf\",\"tmpArray\",\"slice\",\"i\",\"length\",\"result\",\"apply\",\"Array\",\"prototype\",\"call\",\"arguments\",\"format\",\"d\",\"Date\",\"getTime\",\"guid\",\"replace\",\"c\",\"r\",\"Math\",\"random\",\"floor\",\"toString\",\"Composer\",\"BaseClass\",\"_BaseClass\",\"_class\",\"arg1\",\"arg2\",\"arg3\",\"arg4\",\"arg5\",\"_this3\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"inherits\",\"createClass\",\"key\",\"value\",\"_this4\",\"_this5\",\"Autodesk\",\"window\",\"THREE\",\"GizmoMaterial\",\"parameters\",\"MeshBasicMaterial\",\"depthTest\",\"depthWrite\",\"side\",\"FrontSide\",\"transparent\",\"setValues\",\"oldColor\",\"color\",\"clone\",\"oldOpacity\",\"opacity\",\"highlight\",\"highlighted\",\"setRGB\",\"copy\",\"create\",\"GizmoLineMaterial\",\"LineBasicMaterial\",\"linewidth\",\"PolyhedronGeometry\",\"vertices\",\"indices\",\"radius\",\"detail\",\"Geometry\",\"type\",\"that\",\"l\",\"prepare\",\"Vector3\",\"p\",\"faces\",\"j\",\"v1\",\"v2\",\"v3\",\"Face3\",\"index\",\"centroid\",\"subdivide\",\"faceVertexUvs\",\"uvs\",\"x0\",\"x\",\"x1\",\"x2\",\"max\",\"min\",\"multiplyScalar\",\"vector\",\"vertex\",\"normalize\",\"u\",\"azimuth\",\"PI\",\"v\",\"atan2\",\"y\",\"sqrt\",\"z\",\"inclination\",\"uv\",\"Vector2\",\"make\",\"face\",\"add\",\"divideScalar\",\"azi\",\"correctUV\",\"cols\",\"pow\",\"a\",\"b\",\"aj\",\"lerp\",\"bj\",\"rows\",\"k\",\"mergeVertices\",\"computeFaceNormals\",\"boundingSphere\",\"Sphere\",\"OctahedronGeometry\",\"TorusGeometry\",\"tube\",\"radialSegments\",\"tubularSegments\",\"arc\",\"center\",\"normals\",\"cos\",\"sin\",\"sub\",\"createCircleGeometry\",\"facing\",\"geometry\",\"createArrowGeometry\",\"radiusTop\",\"radiusBottom\",\"height\",\"heightSegments\",\"openEnded\",\"arrowGeometry\",\"mesh\",\"Mesh\",\"CylinderGeometry\",\"position\",\"updateMatrix\",\"merge\",\"matrix\",\"createLineGeometry\",\"axis\",\"lineGeometry\",\"TransformGizmo\",\"scope\",\"init\",\"Object3D\",\"handles\",\"pickers\",\"planes\",\"highlights\",\"hemiPicker\",\"subPickers\",\"planeGeometry\",\"PlaneBufferGeometry\",\"planeMaterial\",\"wireframe\",\"DoubleSide\",\"XY\",\"YZ\",\"XZ\",\"XYZE\",\"activePlane\",\"rotation\",\"set\",\"name\",\"visible\",\"setupGizmos\",\"activeMode\",\"traverse\",\"child\",\"tempGeometry\",\"BufferGeometry\",\"fromBufferGeometry\",\"scale\",\"hide\",\"show\",\"parent\",\"material\",\"addGizmos\",\"gizmoMap\",\"object\",\"visble\",\"setHandlePickerGizmos\",\"handleGizmos\",\"pickerGizmos\",\"highlightGizmos\",\"hemiPickerGizmos\",\"subPickerGizmos\",\"update\",\"eye\",\"vec1\",\"vec2\",\"lookAtMatrix\",\"Matrix4\",\"search\",\"quaternion\",\"setFromRotationMatrix\",\"lookAt\",\"setFromEuler\",\"TransformGizmoTranslate\",\"lineXGeometry\",\"lineYGeometry\",\"lineZGeometry\",\"X\",\"Line\",\"Y\",\"Z\",\"XYZ\",\"BoxGeometry\",\"setActivePlane\",\"tempMatrix\",\"applyMatrix4\",\"getInverse\",\"extractRotation\",\"matrixWorld\",\"abs\",\"TransformGizmoRotate\",\"RX\",\"RY\",\"RZ\",\"RE\",\"RXYZE\",\"eye2\",\"worldRotation\",\"Euler\",\"tempQuaternion\",\"Quaternion\",\"unitX\",\"unitY\",\"unitZ\",\"quaternionX\",\"quaternionY\",\"quaternionZ\",\"makeRotationFromQuaternion\",\"setFromAxisAngle\",\"multiplyQuaternions\",\"TransformGizmoTranslateRotate\",\"theta\",\"SphereGeometry\",\"useAllPickers\",\"TransformGizmoScale\",\"TransformControls\",\"camera\",\"domElement\",\"mode\",\"document\",\"gizmo\",\"snap\",\"snapDelta\",\"space\",\"size\",\"normal\",\"startLine\",\"endLine\",\"LineDashedMaterial\",\"centerLine\",\"map\",\"ImageUtils\",\"loadTexture\",\"Viewing\",\"Private\",\"getResourceUrl\",\"magFilter\",\"minFilter\",\"NearestFilter\",\"CircleGeometry\",\"centerMark\",\"ticks\",\"h\",\"_dragging\",\"_mode\",\"changeEvent\",\"mouseDownEvent\",\"mouseUpEvent\",\"objectChangeEvent\",\"ray\",\"Raycaster\",\"pointerVector\",\"pointerDir\",\"point\",\"offset\",\"offsetRotation\",\"tempVector\",\"projX\",\"projY\",\"projZ\",\"quaternionXYZ\",\"quaternionE\",\"oldPosition\",\"oldScale\",\"oldRotationMatrix\",\"parentRotationMatrix\",\"parentScale\",\"worldPosition\",\"worldRotationMatrix\",\"camPosition\",\"intersectObjects\",\"pointer\",\"objects\",\"rect\",\"getBoundingClientRect\",\"clientX\",\"left\",\"width\",\"clientY\",\"top\",\"isPerspective\",\"unproject\",\"transformDirection\",\"intersections\",\"attach\",\"updateUnitVectors\",\"detach\",\"setMode\",\"dispatchEvent\",\"getPicker\",\"children\",\"setPosition\",\"setNormal\",\"setFromUnitVectors\",\"applyQuaternion\",\"multiply\",\"setSnap\",\"delta\",\"setSize\",\"setSpace\",\"updateMatrixWorld\",\"setFromMatrixPosition\",\"applyEuler\",\"dist\",\"distanceTo\",\"tan\",\"fov\",\"showRotationGizmos\",\"onPointerHover\",\"intersect\",\"pointers\",\"onPointerDown\",\"pointerType\",\"button\",\"planeIntersect\",\"setFromMatrixScale\",\"verticesNeedUpdate\",\"pos\",\"getAttribute\",\"pt1\",\"fromAttribute\",\"pt2\",\"pt3\",\"pt4\",\"dashSize\",\"gapSize\",\"computeLineDistances\",\"onPointerMove\",\"dot\",\"rotz\",\"rotsnap\",\"round\",\"tempAxis\",\"cross\",\"rot\",\"angleTo\",\"projx\",\"projy\",\"projz\",\"tempx\",\"tempy\",\"tempz\",\"rotx\",\"roty\",\"matrixAutoUpdate\",\"onPointerUp\",\"remove\",\"TransformTool\",\"viewer\",\"_dbIds\",\"active\",\"_viewer\",\"_isDragging\",\"fullTransform\",\"_transformMesh\",\"_selectedFragProxyMap\",\"_transformControlTx\",\"_hitPoint\",\"onTxChange\",\"bind\",\"assertThisInitialized\",\"onAggregateSelectionChanged\",\"onCameraChanged\",\"_selectionMode\",\"MeshPhongMaterial\",\"impl\",\"matman\",\"addMaterial\",\"sphere\",\"translation\",\"_selection\",\"model\",\"fragId\",\"fragProxy\",\"updateAnimTransform\",\"emit\",\"sceneUpdated\",\"selections\",\"selection\",\"setSelection\",\"clearSelection\",\"select\",\"setTimeout\",\"dbIdArray\",\"fragIdsArray\",\"fragCount\",\"getFragmentList\",\"fragments\",\"fragId2dbId\",\"rootId\",\"getData\",\"instanceTree\",\"getRootId\",\"initializeSelection\",\"hitPoint\",\"modelTransform\",\"transform\",\"addEventListener\",\"CAMERA_CHANGE_EVENT\",\"getFragmentProxy\",\"getAnimTransform\",\"removeEventListener\",\"fragPosition\",\"screenPoint\",\"viewport\",\"navigation\",\"getScreenViewport\",\"n\",\"utilities\",\"getHitPoint\",\"bbox\",\"getBoundingBox\",\"createOverlayScene\",\"canvas\",\"getBoundingSphere\",\"addOverlay\",\"createTransformMesh\",\"AGGREGATE_SELECTION_CHANGED_EVENT\",\"removeOverlay\",\"removeOverlayScene\",\"_translation\",\"keyCode\",\"RotateTool\",\"keys\",\"toolController\",\"registerTool\",\"onAggregateSelectionChangedHandler\",\"e\",\"enable\",\"getName\",\"activateTool\",\"deactivateTool\",\"rotateControl\",\"engaged\",\"drawAxis\",\"bBox\",\"geWorldBoundingBox\",\"RotateControl\",\"on\",\"data\",\"rotateFragments\",\"angle\",\"Control\",\"isDragging\",\"mousePos\",\"sidewaysDirection\",\"moveDirection\",\"eyeDirection\",\"upDirection\",\"getCamera\",\"target\",\"up\",\"crossVectors\",\"setLength\",\"idx\",\"euler\",\"setFromQuaternion\",\"fragIds\",\"fragList\",\"fragbBox\",\"Box3\",\"nodebBox\",\"getWorldBounds\",\"union\",\"overlayScene\",\"gizmos\",\"createAxis\",\"worldup\",\"createGizmo\",\"picker\",\"createSphere\",\"angleLine\",\"createLine\",\"start\",\"end\",\"line\",\"dir\",\"orientation\",\"cone\",\"applyMatrix\",\"createCone\",\"range\",\"subMaterial\",\"torusGizmo\",\"subTorus\",\"q\",\"s\",\"compose\",\"plane\",\"createBox\",\"subGizmo\",\"w\",\"box\",\"intersectResults\",\"pointerToRaycaster\",\"selectedGizmo\",\"lastDir\",\"sign\",\"pickerPoint\",\"worldPoint\",\"_this6\",\"colorInit\",\"opacityInit\",\"$\",\"ViewerTooltip\",\"markerId\",\"svgId\",\"htmlMarker\",\"concat\",\"container\",\"append\",\"$marker\",\"html\",\"selector\",\"tooltipSelector\",\"css\",\"display\",\"pointerVisible\",\"$offset\",\"screenToWorld\",\"animateId\",\"Vector4\",\"matrixWorldInverse\",\"projectionMatrix\",\"viewportToClient\",\"ToolPanelBase\",\"title\",\"options\",\"assign\",\"shadow\",\"movable\",\"closable\",\"_dialogResult\",\"_isVisible\",\"_isMinimized\",\"_btnElement\",\"buttonElement\",\"id\",\"setVisible\",\"velocity\",\"rotateY\",\"classList\",\"get\",\"createTitleBar\",\"titleLabel\",\"setTitle\",\"initializeMoveHandlers\",\"closer\",\"createCloseButton\",\"$content\",\"htmlContent\",\"content\",\"titleBar\",\"createElement\",\"className\",\"titleTextId\",\"titleImgId\",\"movedSinceLastClick\",\"onTitleClick\",\"onTitleDoubleClick\",\"text\",\"localizeTitle\",\"attr\",\"i18n\",\"translate\",\"removeAttr\",\"_height\",\"min-height\",\"overflow\",\"UI\",\"DockingPanel\",\"SwitchButton\",\"checked\",\"labelId\",\"_inputId\",\"click\",\"$input\",\"prop\",\"appendTo\",\"UIComponent\",\"uri\",\"link\",\"href\",\"Dropdown\",\"opts\",\"dropdownId\",\"buttonId\",\"listId\",\"currentItem\",\"menuItems\",\"prompt\",\"selectedItemIdx\",\"item\",\"addItem\",\"setActive\",\"itemId\",\"itemHtml\",\"onClick\",\"preventDefault\",\"handler\",\"items\",\"addClass\",\"trigger\",\"ModelTransformerPanel\",\"btnElement\",\"dropdown\",\"dropdownContainerId\",\"currentModel\",\"setTransform\",\"fitToView\",\"applyTransform\",\"console\",\"log\",\"txTool\",\"rxTool\",\"getTranslation\",\"getRotation\",\"getScale\",\"fullTransformSwitch\",\"removeCurrentItem\",\"TranslateTool\",\"setTranslation\",\"setRotation\",\"onModelSelected\",\"transPickBtnId\",\"setCurrentItem\",\"tooltip\",\"deactivate\",\"val\",\"onPick\",\"activate\",\"setContent\",\"toFixed\",\"parseFloat\",\"isNaN\",\"ViewerExtensionBase\",\"ExtensionBase\",\"_options\",\"Extension\",\"ViewerToolkit\",\"doc\",\"roles\",\"rootItem\",\"getRootItem\",\"roleArray\",\"toConsumableArray\",\"role\",\"Document\",\"getSubItemsWithProperties\",\"getViewablePath\",\"Button\",\"icon\",\"style\",\"fontSize\",\"setToolTip\",\"ctrlGroupName\",\"viewerToolbar\",\"getToolbar\",\"ctrlGroup\",\"ControlGroup\",\"addControl\",\"dbIds\",\"Promise\",\"resolve\",\"reject\",\"isArray\",\"leafIds\",\"getLeafNodesRec\",\"childCount\",\"enumNodeChildren\",\"childId\",\"ex\",\"_ref\",\"asyncToGenerator\",\"regenerator_default\",\"mark\",\"_callee2\",\"_ret\",\"wrap\",\"_context2\",\"prev\",\"next\",\"delegateYield\",\"_callee\",\"_context\",\"getLeafNodes\",\"sent\",\"enumNodeFragments\",\"abrupt\",\"stop\",\"t0\",\"t1\",\"_x\",\"_x2\",\"dbId\",\"_ref2\",\"_callee3\",\"_context3\",\"getFragIds\",\"_x3\",\"_x4\",\"requestedProps\",\"propTasks\",\"displayName\",\"getProperty\",\"all\",\"then\",\"properties\",\"getProperties\",\"defaultValue\",\"displayValue\",\"Error\",\"_ref3\",\"_callee4\",\"propertyTasks\",\"propertyResults\",\"_context4\",\"propertyResult\",\"sort\",\"_x5\",\"_x6\",\"propFilter\",\"_ref4\",\"_callee5\",\"propRes\",\"filteredRes\",\"_context5\",\"filter\",\"res\",\"getBulkProperties\",\"error\",\"_x7\",\"_x8\",\"components\",\"defaultProp\",\"_ref5\",\"_callee6\",\"results\",\"componentsMap\",\"_context6\",\"getBulkPropertiesAsync\",\"_x9\",\"_x10\",\"root\",\"taskFunc\",\"tasks\",\"runTaskOnDataTreeRec\",\"node\",\"childNode\",\"task\",\"_material\",\"lines\",\"coordsArray\",\"mat\",\"scene\",\"drawLines\",\"setMaterial\",\"createNodeFunc\",\"rootNode\",\"getNodeName\",\"_buildModelTreeRec\",\"taskResults\",\"_executeTaskOnModelTreeRec\",\"_ref6\",\"_callee8\",\"targetIds\",\"targetLeafIds\",\"leafTasks\",\"_context8\",\"isolate\",\"resolveLeaf\",\"visibilityManager\",\"setNodeOff\",\"_x14\",\"_x15\",\"getUserAgent\",\"navigator\",\"userAgent\",\"isAndroid\",\"match\",\"isBlackBerry\",\"isIOS\",\"isOpera\",\"isWindows\",\"isWindowsDesktop\",\"isWindowsMobile\",\"isAny\",\"ModelTransformerExtension\",\"firstModelLoaded\",\"modelCollection\",\"onGeometryLoadedHandler\",\"onGeometryLoaded\",\"selectedDbIdArray\",\"loadControls\",\"hotkeyMng\",\"theHotkeyManager\",\"hotkeysId\",\"hotKeyTranslate\",\"keycodes\",\"KEYCODES\",\"t\",\"onPress\",\"hotkeys\",\"onRelease\",\"panel\",\"setHitPoint\",\"getAggregateSelection\",\"hotKeyRotate\",\"pushHotkeys\",\"tryUntilSuccess\",\"GEOMETRY_LOADED_EVENT\",\"control\",\"createButton\",\"toggleVisibility\",\"Panel\",\"autoLoad\",\"modelQueue\",\"getModels\",\"modelId\",\"addModel\",\"deleteModel\",\"currentSelection\",\"parentControl\",\"getControl\",\"popHotkeys\",\"removeControl\",\"setStructure\",\"_transformFragProxy\",\"_y\",\"_z\",\"_w\",\"modelstructure\",\"setModel\",\"modelName\",\"placementTransform\",\"zOriented\",\"firstExt\",\"pop\",\"modelExt\",\"makeRotationX\",\"fireEvent\",\"unloadModel\",\"clear\",\"theExtensionManager\",\"registerExtension\",\"ExtensionId\",\"extensions_Viewing_Extension_ModelTransformer\",\"buildHtmlTable\",\"rivetsData\",\"columns\",\"myList\",\"columnSet\",\"headerTr$\",\"rowHash\",\"inArray\",\"addAllColumnHeaders\",\"row$\",\"colIndex\",\"cellValue\",\"callback\",\"empty\",\"siblings\",\"removeClass\",\"find\",\"jQuery\",\"ajax\",\"url\",\"success\",\"importCsvData\",\"pointData\",\"env\",\"getAccessToken\",\"access_token\",\"expires_in\",\"onDocumentLoadSuccess\",\"viewables\",\"onSelection\",\"prefs\",\"tag\",\"loadExtension\",\"lmvDoc\",\"indexViewable\",\"initialViewable\",\"svfUrl\",\"modelOptions\",\"sharedPropertyDbPath\",\"getPropertyDbPath\",\"loadModel\",\"myData\",\"status\",\"getExtension\",\"wallOneTransform\",\"setQualityLevel\",\"setGroundShadow\",\"clientToWorld\",\"canvasX\",\"canvasY\",\"onDocumentLoadFailure\",\"viewerErrorCode\",\"alert\",\"documentId\",\"viewerDiv\",\"getElementById\",\"GuiViewer3D\",\"Initializer\",\"errorCode\",\"load\",\"launchViewer\",\"modelID\",\"modelURN\",\"findModelInDatabase\",\"rowID\",\"getRowId\",\"ReactDOM\",\"render\",\"react_default\"],\"mappings\":\"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\",\"sourcesContent\":[\"/* eslint-disable */\\r\\nexport default class EventsEmitter {\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  constructor () {\\r\\n\\r\\n    this._events = {}\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  // Supports multiple events space-separated\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  on (events, fct) {\\r\\n\\r\\n    events.split(' ').forEach((event) => {\\r\\n\\r\\n      this._events[event] = this._events[event]\\t|| [];\\r\\n      this._events[event].push(fct);\\r\\n    })\\r\\n\\r\\n    return this\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  // Supports multiple events space-separated\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  off (events, fct) {\\r\\n\\r\\n    if(events == undefined){\\r\\n      this._events = {};\\r\\n      return;\\r\\n    }\\r\\n\\r\\n    events.split(' ').forEach((event) => {\\r\\n\\r\\n      if (event in this._events === false)\\r\\n        return;\\r\\n\\r\\n      if (fct) {\\r\\n\\r\\n        this._events[event].splice(\\r\\n          this._events[event].indexOf(fct), 1)\\r\\n\\r\\n      } else {\\r\\n\\r\\n        this._events[event] = []\\r\\n      }\\r\\n    })\\r\\n\\r\\n    return this\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  emit (event /* , args... */) {\\r\\n\\r\\n    if(this._events[event] === undefined)\\r\\n      return;\\r\\n\\r\\n    var tmpArray = this._events[event].slice();\\r\\n\\r\\n    for(var i = 0; i < tmpArray.length; ++i) {\\r\\n\\r\\n      var result\\t= tmpArray[i].apply(this,\\r\\n        Array.prototype.slice.call(arguments, 1));\\r\\n\\r\\n      if(result !== undefined )\\r\\n        return result;\\r\\n    }\\r\\n\\r\\n    return undefined;\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  guid(format='xxxxxxxxxxxx') {\\r\\n\\r\\n    var d = new Date().getTime();\\r\\n\\r\\n    var guid = format.replace(\\r\\n      /[xy]/g,\\r\\n      function (c) {\\r\\n        var r = (d + Math.random() * 16) % 16 | 0;\\r\\n        d = Math.floor(d / 16);\\r\\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\\r\\n      });\\r\\n\\r\\n    return guid;\\r\\n  }\\r\\n}\\r\\n\\r\\n\\r\\n///////////////////////////////////////////////////////////////////\\r\\n//\\r\\n//\\r\\n///////////////////////////////////////////////////////////////////\\r\\nexport const EventsEmitterComposer =\\r\\n  (BaseClass) => class extends BaseClass {\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  constructor (arg1, arg2, arg3, arg4, arg5) {\\r\\n\\r\\n    super (arg1, arg2, arg3, arg4, arg5)\\r\\n\\r\\n    this._events = {};\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  // Supports multiple events space-separated\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  on (events, fct) {\\r\\n\\r\\n    events.split(' ').forEach((event) => {\\r\\n\\r\\n      this._events[event] = this._events[event]\\t|| [];\\r\\n      this._events[event].push(fct);\\r\\n    })\\r\\n\\r\\n    return this\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  // Supports multiple events space-separated\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  off (events, fct) {\\r\\n\\r\\n    if(events == undefined){\\r\\n      this._events = {};\\r\\n      return;\\r\\n    }\\r\\n\\r\\n    events.split(' ').forEach((event) => {\\r\\n\\r\\n      if (event in this._events === false)\\r\\n        return;\\r\\n\\r\\n      if (fct) {\\r\\n\\r\\n        this._events[event].splice(\\r\\n          this._events[event].indexOf(fct), 1)\\r\\n\\r\\n      } else {\\r\\n\\r\\n        this._events[event] = []\\r\\n      }\\r\\n    })\\r\\n\\r\\n    return this\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  emit (event /* , args... */) {\\r\\n\\r\\n    if(this._events[event] === undefined)\\r\\n      return;\\r\\n\\r\\n    var tmpArray = this._events[event].slice();\\r\\n\\r\\n    for(var i = 0; i < tmpArray.length; ++i) {\\r\\n\\r\\n      var result\\t= tmpArray[i].apply(this,\\r\\n        Array.prototype.slice.call(arguments, 1));\\r\\n\\r\\n      if(result !== undefined )\\r\\n        return result;\\r\\n    }\\r\\n\\r\\n    return undefined;\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  guid(format='xxxxxxxxxxxx') {\\r\\n\\r\\n    var d = new Date().getTime();\\r\\n\\r\\n    var guid = format.replace(\\r\\n      /[xy]/g,\\r\\n      function (c) {\\r\\n        var r = (d + Math.random() * 16) % 16 | 0;\\r\\n        d = Math.floor(d / 16);\\r\\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\\r\\n      });\\r\\n\\r\\n    return guid\\r\\n  }\\r\\n}\\r\\n\\r\\n\\r\\n\",\"import {EventsEmitterComposer} from './EventsEmitter'\\r\\nimport EventsEmitter from './EventsEmitter'\\r\\n\\r\\nEventsEmitter.Composer = EventsEmitterComposer\\r\\n\\r\\nexport default EventsEmitter\\r\\n\",\"/* eslint-disable */\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst Autodesk = window.Autodesk;\\r\\nconst THREE = window.THREE;\\r\\n\\r\\n(function init_TransformGizmos() {\\r\\n\\r\\n  'use strict';\\r\\n\\r\\n  class GizmoMaterial {\\r\\n    constructor(parameters) {\\r\\n      THREE.MeshBasicMaterial.call(this);\\r\\n      this.depthTest = false;\\r\\n      this.depthWrite = false;\\r\\n      this.side = THREE.FrontSide;\\r\\n      this.transparent = true;\\r\\n      this.setValues(parameters);\\r\\n      this.oldColor = this.color.clone();\\r\\n      this.oldOpacity = this.opacity;\\r\\n      this.highlight = function (highlighted) {\\r\\n        if (highlighted) {\\r\\n          this.color.setRGB(1, 230 / 255, 3 / 255);\\r\\n          this.opacity = 1;\\r\\n        }\\r\\n        else {\\r\\n          this.color.copy(this.oldColor);\\r\\n          this.opacity = this.oldOpacity;\\r\\n        }\\r\\n      };\\r\\n    }\\r\\n  }\\r\\n\\r\\n  GizmoMaterial.prototype = Object.create( THREE.MeshBasicMaterial.prototype );\\r\\n\\r\\n  class GizmoLineMaterial {\\r\\n    constructor(parameters) {\\r\\n      THREE.LineBasicMaterial.call(this);\\r\\n      this.depthTest = false;\\r\\n      this.depthWrite = false;\\r\\n      this.transparent = true;\\r\\n      this.linewidth = 3;\\r\\n      this.setValues(parameters);\\r\\n      this.oldColor = this.color.clone();\\r\\n      this.oldOpacity = this.opacity;\\r\\n      this.highlight = function (highlighted) {\\r\\n        if (highlighted) {\\r\\n          this.color.setRGB(1, 230 / 255, 3 / 255);\\r\\n          this.opacity = 1;\\r\\n        }\\r\\n        else {\\r\\n          this.color.copy(this.oldColor);\\r\\n          this.opacity = this.oldOpacity;\\r\\n        }\\r\\n      };\\r\\n    }\\r\\n  }\\r\\n\\r\\n  GizmoLineMaterial.prototype = Object.create( THREE.LineBasicMaterial.prototype );\\r\\n\\r\\n  // polyfill\\r\\n  if (THREE.PolyhedronGeometry === undefined) {\\r\\n    THREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\\r\\n\\r\\n      THREE.Geometry.call( this );\\r\\n\\r\\n      this.type = 'PolyhedronGeometry';\\r\\n\\r\\n      this.parameters = {\\r\\n        vertices: vertices,\\r\\n        indices: indices,\\r\\n        radius: radius,\\r\\n        detail: detail\\r\\n      };\\r\\n\\r\\n      radius = radius || 1;\\r\\n      detail = detail || 0;\\r\\n\\r\\n      var that = this;\\r\\n\\r\\n      for ( var i = 0, l = vertices.length; i < l; i += 3 ) {\\r\\n\\r\\n        prepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\\r\\n\\r\\n      }\\r\\n\\r\\n      var midpoints = [], p = this.vertices;\\r\\n\\r\\n      var faces = [];\\r\\n\\r\\n      for ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\\r\\n\\r\\n        var v1 = p[ indices[ i     ] ];\\r\\n        var v2 = p[ indices[ i + 1 ] ];\\r\\n        var v3 = p[ indices[ i + 2 ] ];\\r\\n\\r\\n        faces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\\r\\n\\r\\n      }\\r\\n\\r\\n      var centroid = new THREE.Vector3();\\r\\n\\r\\n      for ( var i = 0, l = faces.length; i < l; i ++ ) {\\r\\n\\r\\n        subdivide( faces[ i ], detail );\\r\\n\\r\\n      }\\r\\n\\r\\n\\r\\n      // Handle case when face straddles the seam\\r\\n\\r\\n      for ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\\r\\n\\r\\n        var uvs = this.faceVertexUvs[ 0 ][ i ];\\r\\n\\r\\n        var x0 = uvs[ 0 ].x;\\r\\n        var x1 = uvs[ 1 ].x;\\r\\n        var x2 = uvs[ 2 ].x;\\r\\n\\r\\n        var max = Math.max( x0, Math.max( x1, x2 ) );\\r\\n        var min = Math.min( x0, Math.min( x1, x2 ) );\\r\\n\\r\\n        if ( max > 0.9 && min < 0.1 ) { // 0.9 is somewhat arbitrary\\r\\n\\r\\n          if ( x0 < 0.2 ) uvs[ 0 ].x += 1;\\r\\n          if ( x1 < 0.2 ) uvs[ 1 ].x += 1;\\r\\n          if ( x2 < 0.2 ) uvs[ 2 ].x += 1;\\r\\n\\r\\n        }\\r\\n\\r\\n      }\\r\\n\\r\\n\\r\\n      // Apply radius\\r\\n\\r\\n      for ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\\r\\n\\r\\n        this.vertices[ i ].multiplyScalar( radius );\\r\\n\\r\\n      }\\r\\n\\r\\n\\r\\n      // Merge vertices\\r\\n\\r\\n      this.mergeVertices();\\r\\n\\r\\n      this.computeFaceNormals();\\r\\n\\r\\n      this.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\\r\\n\\r\\n\\r\\n      // Project vector onto sphere's surface\\r\\n\\r\\n      function prepare( vector ) {\\r\\n\\r\\n        var vertex = vector.normalize().clone();\\r\\n        vertex.index = that.vertices.push( vertex ) - 1;\\r\\n\\r\\n        // Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\\r\\n\\r\\n        var u = azimuth( vector ) / 2 / Math.PI + 0.5;\\r\\n        var v = inclination( vector ) / Math.PI + 0.5;\\r\\n        vertex.uv = new THREE.Vector2( u, 1 - v );\\r\\n\\r\\n        return vertex;\\r\\n\\r\\n      }\\r\\n\\r\\n\\r\\n      // Approximate a curved face with recursively sub-divided triangles.\\r\\n\\r\\n      function make( v1, v2, v3 ) {\\r\\n\\r\\n        var face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\\r\\n        that.faces.push( face );\\r\\n\\r\\n        centroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\\r\\n\\r\\n        var azi = azimuth( centroid );\\r\\n\\r\\n        that.faceVertexUvs[ 0 ].push( [\\r\\n          correctUV( v1.uv, v1, azi ),\\r\\n          correctUV( v2.uv, v2, azi ),\\r\\n          correctUV( v3.uv, v3, azi )\\r\\n        ] );\\r\\n\\r\\n      }\\r\\n\\r\\n\\r\\n      // Analytically subdivide a face to the required detail level.\\r\\n\\r\\n      function subdivide( face, detail ) {\\r\\n\\r\\n        var cols = Math.pow(2, detail);\\r\\n        var cells = Math.pow(4, detail);\\r\\n        var a = prepare( that.vertices[ face.a ] );\\r\\n        var b = prepare( that.vertices[ face.b ] );\\r\\n        var c = prepare( that.vertices[ face.c ] );\\r\\n        var v = [];\\r\\n\\r\\n        // Construct all of the vertices for this subdivision.\\r\\n\\r\\n        for ( var i = 0 ; i <= cols; i ++ ) {\\r\\n\\r\\n          v[ i ] = [];\\r\\n\\r\\n          var aj = prepare( a.clone().lerp( c, i / cols ) );\\r\\n          var bj = prepare( b.clone().lerp( c, i / cols ) );\\r\\n          var rows = cols - i;\\r\\n\\r\\n          for ( var j = 0; j <= rows; j ++) {\\r\\n\\r\\n            if ( j == 0 && i == cols ) {\\r\\n\\r\\n              v[ i ][ j ] = aj;\\r\\n\\r\\n            } else {\\r\\n\\r\\n              v[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\\r\\n\\r\\n            }\\r\\n\\r\\n          }\\r\\n\\r\\n        }\\r\\n\\r\\n        // Construct all of the faces.\\r\\n\\r\\n        for ( var i = 0; i < cols ; i ++ ) {\\r\\n\\r\\n          for ( var j = 0; j < 2 * (cols - i) - 1; j ++ ) {\\r\\n\\r\\n            var k = Math.floor( j / 2 );\\r\\n\\r\\n            if ( j % 2 == 0 ) {\\r\\n\\r\\n              make(\\r\\n                v[ i ][ k + 1],\\r\\n                v[ i + 1 ][ k ],\\r\\n                v[ i ][ k ]\\r\\n              );\\r\\n\\r\\n            } else {\\r\\n\\r\\n              make(\\r\\n                v[ i ][ k + 1 ],\\r\\n                v[ i + 1][ k + 1],\\r\\n                v[ i + 1 ][ k ]\\r\\n              );\\r\\n\\r\\n            }\\r\\n\\r\\n          }\\r\\n\\r\\n        }\\r\\n\\r\\n      }\\r\\n\\r\\n\\r\\n      // Angle around the Y axis, counter-clockwise when looking from above.\\r\\n\\r\\n      function azimuth( vector ) {\\r\\n\\r\\n        return Math.atan2( vector.z, - vector.x );\\r\\n\\r\\n      }\\r\\n\\r\\n\\r\\n      // Angle above the XZ plane.\\r\\n\\r\\n      function inclination( vector ) {\\r\\n\\r\\n        return Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\\r\\n\\r\\n      }\\r\\n\\r\\n\\r\\n      // Texture fixing helper. Spheres have some odd behaviours.\\r\\n\\r\\n      function correctUV( uv, vector, azimuth ) {\\r\\n\\r\\n        if ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\\r\\n        if ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\\r\\n        return uv.clone();\\r\\n\\r\\n      }\\r\\n\\r\\n    };\\r\\n\\r\\n    THREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\\r\\n  }\\r\\n\\r\\n  // polyfill\\r\\n  if (THREE.OctahedronGeometry === undefined) {\\r\\n    THREE.OctahedronGeometry = function ( radius, detail ) {\\r\\n\\r\\n      this.parameters = {\\r\\n        radius: radius,\\r\\n        detail: detail\\r\\n      };\\r\\n\\r\\n      var vertices = [\\r\\n        1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0,- 1, 0,    0, 0, 1,    0, 0,- 1\\r\\n      ];\\r\\n\\r\\n      var indices = [\\r\\n        0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\\r\\n      ];\\r\\n\\r\\n      THREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\\r\\n\\r\\n      this.type = 'OctahedronGeometry';\\r\\n\\r\\n      this.parameters = {\\r\\n        radius: radius,\\r\\n        detail: detail\\r\\n      };\\r\\n    };\\r\\n\\r\\n    THREE.OctahedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\\r\\n  }\\r\\n\\r\\n  // polyfill\\r\\n  if (THREE.TorusGeometry === undefined) {\\r\\n    THREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\\r\\n\\r\\n      THREE.Geometry.call( this );\\r\\n\\r\\n      this.type = 'TorusGeometry';\\r\\n\\r\\n      this.parameters = {\\r\\n        radius: radius,\\r\\n        tube: tube,\\r\\n        radialSegments: radialSegments,\\r\\n        tubularSegments: tubularSegments,\\r\\n        arc: arc\\r\\n      };\\r\\n\\r\\n      radius = radius || 100;\\r\\n      tube = tube || 40;\\r\\n      radialSegments = radialSegments || 8;\\r\\n      tubularSegments = tubularSegments || 6;\\r\\n      arc = arc || Math.PI * 2;\\r\\n\\r\\n      var center = new THREE.Vector3(), uvs = [], normals = [];\\r\\n\\r\\n      for ( var j = 0; j <= radialSegments; j ++ ) {\\r\\n\\r\\n        for ( var i = 0; i <= tubularSegments; i ++ ) {\\r\\n\\r\\n          var u = i / tubularSegments * arc;\\r\\n          var v = j / radialSegments * Math.PI * 2;\\r\\n\\r\\n          center.x = radius * Math.cos( u );\\r\\n          center.y = radius * Math.sin( u );\\r\\n\\r\\n          var vertex = new THREE.Vector3();\\r\\n          vertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\\r\\n          vertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\\r\\n          vertex.z = tube * Math.sin( v );\\r\\n\\r\\n          this.vertices.push( vertex );\\r\\n\\r\\n          uvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\\r\\n          normals.push( vertex.clone().sub( center ).normalize() );\\r\\n\\r\\n        }\\r\\n\\r\\n      }\\r\\n\\r\\n      for ( var j = 1; j <= radialSegments; j ++ ) {\\r\\n\\r\\n        for ( var i = 1; i <= tubularSegments; i ++ ) {\\r\\n\\r\\n          var a = ( tubularSegments + 1 ) * j + i - 1;\\r\\n          var b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\\r\\n          var c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\\r\\n          var d = ( tubularSegments + 1 ) * j + i;\\r\\n\\r\\n          var face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\\r\\n          this.faces.push( face );\\r\\n          this.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\\r\\n\\r\\n          face = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\\r\\n          this.faces.push( face );\\r\\n          this.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\\r\\n\\r\\n        }\\r\\n\\r\\n      }\\r\\n\\r\\n      this.computeFaceNormals();\\r\\n\\r\\n    };\\r\\n\\r\\n    THREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\\r\\n  }\\r\\n\\r\\n  var createCircleGeometry = function ( radius, facing, arc ) {\\r\\n\\r\\n    var geometry = new THREE.Geometry();\\r\\n    arc = arc ? arc : 1;\\r\\n    for ( var i = 0; i <= 64 * arc; ++i ) {\\r\\n      if ( facing == 'x' ) geometry.vertices.push( new THREE.Vector3( 0, Math.cos( i / 32 * Math.PI ), Math.sin( i / 32 * Math.PI ) ).multiplyScalar(radius) );\\r\\n      if ( facing == 'y' ) geometry.vertices.push( new THREE.Vector3( Math.cos( i / 32 * Math.PI ), 0, Math.sin( i / 32 * Math.PI ) ).multiplyScalar(radius) );\\r\\n      if ( facing == 'z' ) geometry.vertices.push( new THREE.Vector3( Math.sin( i / 32 * Math.PI ), Math.cos( i / 32 * Math.PI ), 0 ).multiplyScalar(radius) );\\r\\n    }\\r\\n\\r\\n    return geometry;\\r\\n  };\\r\\n\\r\\n  var createArrowGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded ) {\\r\\n\\r\\n    var arrowGeometry = new THREE.Geometry();\\r\\n    var mesh = new THREE.Mesh( new THREE.CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded ) );\\r\\n    mesh.position.y = 0.5;\\r\\n    mesh.updateMatrix();\\r\\n\\r\\n    arrowGeometry.merge( mesh.geometry, mesh.matrix );\\r\\n\\r\\n    return arrowGeometry;\\r\\n  };\\r\\n\\r\\n  var createLineGeometry = function ( axis ) {\\r\\n\\r\\n    var lineGeometry = new THREE.Geometry();\\r\\n    if ( axis === 'X')\\r\\n      lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 1, 0, 0 ) );\\r\\n    else if ( axis === 'Y' )\\r\\n      lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\\r\\n    else if ( axis === 'Z' )\\r\\n      lineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, 1 ) );\\r\\n\\r\\n    return lineGeometry;\\r\\n  };\\r\\n\\r\\n  THREE.TransformGizmo = function () {\\r\\n\\r\\n    var scope = this;\\r\\n    var showPickers = false; //debug\\r\\n    var showActivePlane = false; //debug\\r\\n\\r\\n    this.init = function () {\\r\\n\\r\\n      THREE.Object3D.call( this );\\r\\n\\r\\n      this.handles = new THREE.Object3D();\\r\\n      this.pickers = new THREE.Object3D();\\r\\n      this.planes = new THREE.Object3D();\\r\\n      this.highlights = new THREE.Object3D();\\r\\n      this.hemiPicker = new THREE.Object3D();\\r\\n      this.subPickers = new THREE.Object3D();\\r\\n\\r\\n      this.add(this.handles);\\r\\n      this.add(this.pickers);\\r\\n      this.add(this.planes);\\r\\n      this.add(this.highlights);\\r\\n      this.add(this.hemiPicker);\\r\\n      this.add(this.subPickers);\\r\\n\\r\\n      //// PLANES\\r\\n\\r\\n      var planeGeometry = new THREE.PlaneBufferGeometry( 50, 50, 2, 2 );\\r\\n      var planeMaterial = new THREE.MeshBasicMaterial( { wireframe: true } );\\r\\n      planeMaterial.side = THREE.DoubleSide;\\r\\n\\r\\n      var planes = {\\r\\n        \\\"XY\\\":   new THREE.Mesh( planeGeometry, planeMaterial ),\\r\\n        \\\"YZ\\\":   new THREE.Mesh( planeGeometry, planeMaterial ),\\r\\n        \\\"XZ\\\":   new THREE.Mesh( planeGeometry, planeMaterial ),\\r\\n        \\\"XYZE\\\": new THREE.Mesh( planeGeometry, planeMaterial )\\r\\n      };\\r\\n\\r\\n      this.activePlane = planes[\\\"XYZE\\\"];\\r\\n\\r\\n      planes[\\\"YZ\\\"].rotation.set( 0, Math.PI/2, 0 );\\r\\n      planes[\\\"XZ\\\"].rotation.set( -Math.PI/2, 0, 0 );\\r\\n\\r\\n      for (var i in planes) {\\r\\n        planes[i].name = i;\\r\\n        this.planes.add(planes[i]);\\r\\n        this.planes[i] = planes[i];\\r\\n        planes[i].visible = false;\\r\\n      }\\r\\n\\r\\n      this.setupGizmos();\\r\\n      this.activeMode = \\\"\\\";\\r\\n\\r\\n      // reset Transformations\\r\\n\\r\\n      this.traverse(function ( child ) {\\r\\n        if (child instanceof THREE.Mesh) {\\r\\n          child.updateMatrix();\\r\\n\\r\\n          var tempGeometry = new THREE.Geometry();\\r\\n          if (child.geometry instanceof THREE.BufferGeometry) {\\r\\n            child.geometry = new THREE.Geometry().fromBufferGeometry( child.geometry );\\r\\n          }\\r\\n          tempGeometry.merge( child.geometry, child.matrix );\\r\\n\\r\\n          child.geometry = tempGeometry;\\r\\n          child.position.set( 0, 0, 0 );\\r\\n          child.rotation.set( 0, 0, 0 );\\r\\n          child.scale.set( 1, 1, 1 );\\r\\n        }\\r\\n      });\\r\\n\\r\\n    };\\r\\n\\r\\n    this.hide = function () {\\r\\n      this.traverse(function( child ) {\\r\\n        child.visible = false;\\r\\n      });\\r\\n    };\\r\\n\\r\\n    this.show = function () {\\r\\n      this.traverse(function( child ) {\\r\\n        child.visible = true;\\r\\n        if (child.parent == scope.pickers || child.parent == scope.hemiPicker ) child.visible = showPickers;\\r\\n        if (child.parent == scope.planes ) child.visible = false;\\r\\n      });\\r\\n      this.activePlane.visible = showActivePlane;\\r\\n    };\\r\\n\\r\\n    this.highlight = function ( axis ) {\\r\\n      this.traverse(function( child ) {\\r\\n        if ( child.material && child.material.highlight ) {\\r\\n          if ( child.name == axis ) {\\r\\n            child.material.highlight( true );\\r\\n          } else {\\r\\n            child.material.highlight( false );\\r\\n          }\\r\\n        }\\r\\n      });\\r\\n    };\\r\\n\\r\\n    this.setupGizmos = function () {\\r\\n\\r\\n      var addGizmos = function( gizmoMap, parent ) {\\r\\n\\r\\n        for ( var name in gizmoMap ) {\\r\\n\\r\\n          for ( var i = gizmoMap[name].length; i--;) {\\r\\n\\r\\n            var object = gizmoMap[name][i][0];\\r\\n            var position = gizmoMap[name][i][1];\\r\\n            var rotation = gizmoMap[name][i][2];\\r\\n            var visble = gizmoMap[name][i][3];\\r\\n\\r\\n            object.name = name;\\r\\n\\r\\n            if ( position ) object.position.set( position[0], position[1], position[2] );\\r\\n            if ( rotation ) object.rotation.set( rotation[0], rotation[1], rotation[2] );\\r\\n            if ( visble ) object.visble = visble;\\r\\n\\r\\n            parent.add( object );\\r\\n\\r\\n          }\\r\\n\\r\\n        }\\r\\n\\r\\n      };\\r\\n\\r\\n      this.setHandlePickerGizmos();\\r\\n\\r\\n      addGizmos(this.handleGizmos, this.handles);\\r\\n      addGizmos(this.pickerGizmos, this.pickers);\\r\\n      addGizmos(this.highlightGizmos, this.highlights);\\r\\n      addGizmos(this.hemiPickerGizmos, this.hemiPicker);\\r\\n      addGizmos(this.subPickerGizmos, this.subPickers);\\r\\n\\r\\n      this.hide();\\r\\n      this.show();\\r\\n\\r\\n    };\\r\\n\\r\\n  };\\r\\n\\r\\n  THREE.TransformGizmo.prototype = Object.create( THREE.Object3D.prototype );\\r\\n\\r\\n  THREE.TransformGizmo.prototype.update = function ( rotation, eye ) {\\r\\n\\r\\n    var vec1 = new THREE.Vector3( 0, 0, 0 );\\r\\n    var vec2 = new THREE.Vector3( 0, 1, 0 );\\r\\n    var lookAtMatrix = new THREE.Matrix4();\\r\\n\\r\\n    this.traverse(function(child) {\\r\\n      if ( child.name ) {\\r\\n        if ( child.name.search(\\\"E\\\") != -1 ) {\\r\\n          child.quaternion.setFromRotationMatrix( lookAtMatrix.lookAt( eye, vec1, vec2 ) );\\r\\n        } else if ( child.name.search(\\\"X\\\") != -1 || child.name.search(\\\"Y\\\") != -1 || child.name.search(\\\"Z\\\") != -1 ) {\\r\\n          child.quaternion.setFromEuler( rotation );\\r\\n        }\\r\\n      }\\r\\n    });\\r\\n\\r\\n  };\\r\\n\\r\\n  THREE.TransformGizmoTranslate = function () {\\r\\n\\r\\n    THREE.TransformGizmo.call( this );\\r\\n\\r\\n    this.setHandlePickerGizmos = function () {\\r\\n\\r\\n      var arrowGeometry = createArrowGeometry( 0, 0.05, 0.2, 12, 1, false );\\r\\n      var lineXGeometry = createLineGeometry( 'X' );\\r\\n      var lineYGeometry = createLineGeometry( 'Y' );\\r\\n      var lineZGeometry = createLineGeometry( 'Z' );\\r\\n\\r\\n      this.handleGizmos = {\\r\\n        X: [\\r\\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xf12c2c } ) ), [ 0.5, 0, 0 ], [ 0, 0, -Math.PI/2 ] ],\\r\\n          [ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xf12c2c } ) ) ]\\r\\n        ],\\r\\n        Y: [\\r\\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0bb80b } ) ), [ 0, 0.5, 0 ] ],\\r\\n          [   new THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x0bb80b } ) ) ]\\r\\n        ],\\r\\n        Z: [\\r\\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x2c2cf1 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ],\\r\\n          [ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x2c2cf1 } ) ) ]\\r\\n        ],\\r\\n        XYZ: [\\r\\n          [ new THREE.Mesh( new THREE.OctahedronGeometry( 0.1, 0 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, 0, 0 ] ]\\r\\n        ],\\r\\n        XY: [\\r\\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xffff00, opacity: 0.25 } ) ), [ 0.15, 0.15, 0 ] ]\\r\\n        ],\\r\\n        YZ: [\\r\\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ), [ 0, 0.15, 0.15 ], [ 0, Math.PI/2, 0 ] ]\\r\\n        ],\\r\\n        XZ: [\\r\\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.29, 0.29 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ), [ 0.15, 0, 0.15 ], [ -Math.PI/2, 0, 0 ] ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n      this.pickerGizmos = {\\r\\n        X: [\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0.6, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\\r\\n        ],\\r\\n        Y: [\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0.6, 0 ] ]\\r\\n        ],\\r\\n        Z: [\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.6 ], [ Math.PI/2, 0, 0 ] ]\\r\\n        ],\\r\\n        XYZ: [\\r\\n          [ new THREE.Mesh( new THREE.OctahedronGeometry( 0.2, 0 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\\r\\n        ],\\r\\n        XY: [\\r\\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0xffff00, opacity: 0.25 } ) ), [ 0.2, 0.2, 0 ] ]\\r\\n        ],\\r\\n        YZ: [\\r\\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ), [ 0, 0.2, 0.2 ], [ 0, Math.PI/2, 0 ] ]\\r\\n        ],\\r\\n        XZ: [\\r\\n          [ new THREE.Mesh( new THREE.PlaneBufferGeometry( 0.4, 0.4 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ), [ 0.2, 0, 0.2 ], [ -Math.PI/2, 0, 0 ] ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n      this.hemiPickerGizmos = {\\r\\n        XYZ: [\\r\\n          [ new THREE.Mesh( new THREE.BoxGeometry( 1.2, 1.2, 1.2 ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0.5, 0.5, 0.5 ], null, false ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setActivePlane = function ( axis, eye ) {\\r\\n\\r\\n      var tempMatrix = new THREE.Matrix4();\\r\\n      eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \\\"XY\\\" ].matrixWorld ) ) );\\r\\n\\r\\n      if ( axis == \\\"X\\\" ) {\\r\\n        this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n        if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n      }\\r\\n\\r\\n      if ( axis == \\\"Y\\\" ){\\r\\n        this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n        if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n      }\\r\\n\\r\\n      if ( axis == \\\"Z\\\" ){\\r\\n        this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n        if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n      }\\r\\n\\r\\n      if ( axis == \\\"XYZ\\\" ) this.activePlane = this.planes[ \\\"XYZE\\\" ];\\r\\n\\r\\n      if ( axis == \\\"XY\\\" ) this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n\\r\\n      if ( axis == \\\"YZ\\\" ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n\\r\\n      if ( axis == \\\"XZ\\\" ) this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n\\r\\n      this.hide();\\r\\n      this.show();\\r\\n\\r\\n    };\\r\\n\\r\\n    this.init();\\r\\n\\r\\n  };\\r\\n\\r\\n  THREE.TransformGizmoTranslate.prototype = Object.create( THREE.TransformGizmo.prototype );\\r\\n\\r\\n  THREE.TransformGizmoRotate = function () {\\r\\n\\r\\n    THREE.TransformGizmo.call( this );\\r\\n\\r\\n    this.setHandlePickerGizmos = function () {\\r\\n\\r\\n      this.handleGizmos = {\\r\\n        RX: [\\r\\n          [ new THREE.Line( createCircleGeometry(1,'x',0.5), new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\\r\\n        ],\\r\\n        RY: [\\r\\n          [ new THREE.Line( createCircleGeometry(1,'y',0.5), new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\\r\\n        ],\\r\\n        RZ: [\\r\\n          [ new THREE.Line( createCircleGeometry(1,'z',0.5), new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\\r\\n        ],\\r\\n        RE: [\\r\\n          [ new THREE.Line( createCircleGeometry(1.25,'z',1), new GizmoLineMaterial( { color: 0x00ffff } ) ) ]\\r\\n        ],\\r\\n        RXYZE: [\\r\\n          [ new THREE.Line( createCircleGeometry(1,'z',1), new GizmoLineMaterial( { color: 0xff00ff } ) ) ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n      this.pickerGizmos = {\\r\\n        RX: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, -Math.PI/2, -Math.PI/2 ] ]\\r\\n        ],\\r\\n        RY: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, 0 ] ]\\r\\n        ],\\r\\n        RZ: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\\r\\n        ],\\r\\n        RE: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1.25, 0.12, 2, 24 ), new GizmoMaterial( { color: 0x00ffff, opacity: 0.25 } ) ) ]\\r\\n        ],\\r\\n        RXYZE: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 2, 24 ), new GizmoMaterial( { color: 0xff00ff, opacity: 0.25 } ) ) ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setActivePlane = function ( axis ) {\\r\\n\\r\\n      if ( axis == \\\"RE\\\" ) this.activePlane = this.planes[ \\\"XYZE\\\" ];\\r\\n\\r\\n      if ( axis == \\\"RX\\\" ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n\\r\\n      if ( axis == \\\"RY\\\" ) this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n\\r\\n      if ( axis == \\\"RZ\\\" ) this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n\\r\\n      this.hide();\\r\\n      this.show();\\r\\n\\r\\n    };\\r\\n\\r\\n    this.update = function ( rotation, eye2 ) {\\r\\n\\r\\n      THREE.TransformGizmo.prototype.update.apply( this, arguments );\\r\\n\\r\\n      var tempMatrix = new THREE.Matrix4();\\r\\n      var worldRotation = new THREE.Euler( 0, 0, 1 );\\r\\n      var tempQuaternion = new THREE.Quaternion();\\r\\n      var unitX = new THREE.Vector3( 1, 0, 0 );\\r\\n      var unitY = new THREE.Vector3( 0, 1, 0 );\\r\\n      var unitZ = new THREE.Vector3( 0, 0, 1 );\\r\\n      var quaternionX = new THREE.Quaternion();\\r\\n      var quaternionY = new THREE.Quaternion();\\r\\n      var quaternionZ = new THREE.Quaternion();\\r\\n      var eye = eye2.clone();\\r\\n\\r\\n      worldRotation.copy( this.planes[\\\"XY\\\"].rotation );\\r\\n      tempQuaternion.setFromEuler( worldRotation );\\r\\n\\r\\n      tempMatrix.makeRotationFromQuaternion( tempQuaternion ).getInverse( tempMatrix );\\r\\n      eye.applyMatrix4( tempMatrix );\\r\\n\\r\\n      this.traverse(function(child) {\\r\\n\\r\\n        tempQuaternion.setFromEuler( worldRotation );\\r\\n\\r\\n        if ( child.name == \\\"RX\\\" ) {\\r\\n          quaternionX.setFromAxisAngle( unitX, Math.atan2( -eye.y, eye.z ) );\\r\\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\\r\\n          child.quaternion.copy( tempQuaternion );\\r\\n        }\\r\\n\\r\\n        if ( child.name == \\\"RY\\\" ) {\\r\\n          quaternionY.setFromAxisAngle( unitY, Math.atan2( eye.x, eye.z ) );\\r\\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\\r\\n          child.quaternion.copy( tempQuaternion );\\r\\n        }\\r\\n\\r\\n        if ( child.name == \\\"RZ\\\" ) {\\r\\n          quaternionZ.setFromAxisAngle( unitZ, Math.atan2( eye.y, eye.x ) );\\r\\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\\r\\n          child.quaternion.copy( tempQuaternion );\\r\\n        }\\r\\n\\r\\n      });\\r\\n\\r\\n    };\\r\\n\\r\\n    this.init();\\r\\n\\r\\n  };\\r\\n\\r\\n  THREE.TransformGizmoRotate.prototype = Object.create( THREE.TransformGizmo.prototype );\\r\\n\\r\\n  THREE.TransformGizmoTranslateRotate = function () {\\r\\n\\r\\n    THREE.TransformGizmo.call( this );\\r\\n\\r\\n    var scope = this;\\r\\n\\r\\n    this.setHandlePickerGizmos = function () {\\r\\n\\r\\n      var arrowGeometry = createArrowGeometry( 0, 0.05, 0.2, 12, 1, false );\\r\\n      var lineGeometry = new THREE.Geometry();\\r\\n      lineGeometry.vertices.push( new THREE.Vector3( 0, 0, -0.1 ), new THREE.Vector3( 0, 0, 0.1 ), new THREE.Vector3( -0.1, 0, 0 ), new THREE.Vector3( 0.1, 0, 0 ) );\\r\\n      var theta = 0.15;\\r\\n\\r\\n      this.handleGizmos = {\\r\\n        Z: [\\r\\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xffffff } ) ), [ 0, 0, 0.25 ], [ Math.PI/2, 0, 0 ] ],\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.015, 0.015, 0.6, 4, 1, false ), new GizmoMaterial( { color: 0xffffff } ) ), [ 0, 0, 0.5 ],[ Math.PI/2, 0, 0 ] ]\\r\\n        ],\\r\\n        RX: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.015, 12, 60, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000 } ) ), [ 0, 0, 0 ], [ theta * Math.PI, -Math.PI/2, 0 ] ],\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.05, 0.05, 0.015, 60, 1, false ), new GizmoMaterial( { color: 0xff0000 } ) ), [ 0, 0, 1 ], [ Math.PI/2, 0, 0 ] ]\\r\\n        ],\\r\\n        RY: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.015, 12, 60, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, (0.5-theta)*Math.PI ] ],\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.05, 0.05, 0.01, 60, 1, false ), new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 1 ] ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n      this.pickerGizmos = {\\r\\n        Z: [\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.12, 0.12, 0.65, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ]\\r\\n        ],\\r\\n        RX: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ theta * Math.PI, -Math.PI/2, 0 ] ]\\r\\n        ],\\r\\n        RY: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.12, 4, 12, theta * 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, (0.5-theta)*Math.PI ] ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n      this.subPickerGizmos = {\\r\\n        Z: [\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.12, 0.12, 0.65, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n      this.highlightGizmos = {\\r\\n        Z: [\\r\\n        ],\\r\\n        RX: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.02, 12, 60, 2 * Math.PI ), new GizmoMaterial( { color: 0xff0000, opacity: 1 } ) ), [ 0, 0, 0 ], [ 0, -Math.PI/2, -Math.PI/2 ], false ]\\r\\n        ],\\r\\n        RY: [\\r\\n          [ new THREE.Mesh( new THREE.TorusGeometry( 1, 0.02, 12, 60, 2 * Math.PI ), new GizmoMaterial( { color: 0x0000ff, opacity: 1 } ) ), [ 0, 0, 0 ], [ Math.PI/2, 0, 0 ], false ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n      this.hemiPickerGizmos = {\\r\\n        XYZ: [\\r\\n          [ new THREE.Mesh( new THREE.SphereGeometry( 1.2, 8, 8, 0, Math.PI ), new GizmoMaterial( { color: 0x0000ff } ) ), null, null, false ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setActivePlane = function ( axis, eye ) {\\r\\n\\r\\n      if ( this.activeMode == \\\"translate\\\" ) {\\r\\n\\r\\n        var tempMatrix = new THREE.Matrix4();\\r\\n        eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \\\"XY\\\" ].matrixWorld ) ) );\\r\\n\\r\\n        if ( axis == \\\"X\\\" ) {\\r\\n          this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n          if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n        }\\r\\n\\r\\n        if ( axis == \\\"Y\\\" ){\\r\\n          this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n          if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n        }\\r\\n\\r\\n        if ( axis == \\\"Z\\\" ){\\r\\n          this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n          if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n        }\\r\\n\\r\\n      } else if ( this.activeMode == \\\"rotate\\\" ){\\r\\n\\r\\n        if ( axis == \\\"RX\\\" ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n\\r\\n        if ( axis == \\\"RY\\\" ) this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n\\r\\n        if ( axis == \\\"RZ\\\" ) this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n\\r\\n      }\\r\\n\\r\\n      this.hide();\\r\\n      this.show();\\r\\n\\r\\n    };\\r\\n\\r\\n    this.update = function ( rotation, eye2 ) {\\r\\n\\r\\n      if ( this.activeMode == \\\"translate\\\" ) {\\r\\n\\r\\n        THREE.TransformGizmo.prototype.update.apply( this, arguments );\\r\\n\\r\\n      } else if ( this.activeMode == \\\"rotate\\\" ) {\\r\\n\\r\\n        THREE.TransformGizmo.prototype.update.apply( this, arguments );\\r\\n\\r\\n        var tempMatrix = new THREE.Matrix4();\\r\\n        var worldRotation = new THREE.Euler( 0, 0, 1 );\\r\\n        var tempQuaternion = new THREE.Quaternion();\\r\\n        var unitX = new THREE.Vector3( 1, 0, 0 );\\r\\n        var unitY = new THREE.Vector3( 0, 1, 0 );\\r\\n        var unitZ = new THREE.Vector3( 0, 0, 1 );\\r\\n        var quaternionX = new THREE.Quaternion();\\r\\n        var quaternionY = new THREE.Quaternion();\\r\\n        var quaternionZ = new THREE.Quaternion();\\r\\n        var eye = eye2.clone();\\r\\n\\r\\n        worldRotation.copy( this.planes[\\\"XY\\\"].rotation );\\r\\n        tempQuaternion.setFromEuler( worldRotation );\\r\\n\\r\\n        tempMatrix.makeRotationFromQuaternion( tempQuaternion ).getInverse( tempMatrix );\\r\\n        eye.applyMatrix4( tempMatrix );\\r\\n\\r\\n        this.traverse(function(child) {\\r\\n\\r\\n          tempQuaternion.setFromEuler( worldRotation );\\r\\n\\r\\n          if ( child.name == \\\"RX\\\" ) {\\r\\n            quaternionX.setFromAxisAngle( unitX, Math.atan2( -eye.y, eye.z ) );\\r\\n            tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\\r\\n            child.quaternion.copy( tempQuaternion );\\r\\n          }\\r\\n\\r\\n          if ( child.name == \\\"RY\\\" ) {\\r\\n            quaternionY.setFromAxisAngle( unitY, Math.atan2( eye.x, eye.z ) );\\r\\n            tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\\r\\n            child.quaternion.copy( tempQuaternion );\\r\\n          }\\r\\n\\r\\n          if ( child.name == \\\"RZ\\\" ) {\\r\\n            quaternionZ.setFromAxisAngle( unitZ, Math.atan2( eye.y, eye.x ) );\\r\\n            tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\\r\\n            child.quaternion.copy( tempQuaternion );\\r\\n          }\\r\\n\\r\\n        });\\r\\n\\r\\n      }\\r\\n\\r\\n    };\\r\\n\\r\\n    this.show = function () {\\r\\n      this.traverse(function( child ) {\\r\\n        if ( scope.parent == null || (scope.parent.useAllPickers || child.parent != scope.handles) ) child.visible = true;\\r\\n        if ( child.material ) child.material.opacity = child.material.oldOpacity;\\r\\n        if ( child.parent == scope.pickers || child.parent == scope.hemiPicker || child.parent == scope.subPickers) child.visible = false;\\r\\n        if ( child.parent == scope.planes || child.parent == scope.highlights ) child.visible = false;\\r\\n      });\\r\\n      this.activePlane.visible = false;\\r\\n    };\\r\\n\\r\\n    this.highlight = function ( axis ) {\\r\\n      this.traverse(function( child ) {\\r\\n        if ( child.material && child.material.highlight ) {\\r\\n          if ( child.name == axis ) {\\r\\n            if ( child.parent == scope.highlights || child.parent == scope.handles ) child.visible = true;\\r\\n            child.material.highlight( true );\\r\\n          } else {\\r\\n            child.material.highlight( false );\\r\\n            child.material.opacity = 0.1;\\r\\n          }\\r\\n        }\\r\\n      });\\r\\n    };\\r\\n\\r\\n    this.init();\\r\\n\\r\\n  };\\r\\n\\r\\n  THREE.TransformGizmoTranslateRotate.prototype = Object.create( THREE.TransformGizmo.prototype );\\r\\n\\r\\n  THREE.TransformGizmoScale = function () {\\r\\n\\r\\n    THREE.TransformGizmo.call( this );\\r\\n\\r\\n    this.setHandlePickerGizmos = function () {\\r\\n\\r\\n      var arrowGeometry = createArrowGeometry( 0.125, 0.125, 0.125 );\\r\\n      var lineXGeometry = createLineGeometry( 'X' );\\r\\n      var lineYGeometry = createLineGeometry( 'Y' );\\r\\n      var lineZGeometry = createLineGeometry( 'Z' );\\r\\n\\r\\n      this.handleGizmos = {\\r\\n        X: [\\r\\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0xff0000 } ) ), [ 0.5, 0, 0 ], [ 0, 0, -Math.PI/2 ] ],\\r\\n          [ new THREE.Line( lineXGeometry, new GizmoLineMaterial( { color: 0xff0000 } ) ) ]\\r\\n        ],\\r\\n        Y: [\\r\\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x00ff00 } ) ), [ 0, 0.5, 0 ] ],\\r\\n          [ new THREE.Line( lineYGeometry, new GizmoLineMaterial( { color: 0x00ff00 } ) ) ]\\r\\n        ],\\r\\n        Z: [\\r\\n          [ new THREE.Mesh( arrowGeometry, new GizmoMaterial( { color: 0x0000ff } ) ), [ 0, 0, 0.5 ], [ Math.PI/2, 0, 0 ] ],\\r\\n          [ new THREE.Line( lineZGeometry, new GizmoLineMaterial( { color: 0x0000ff } ) ) ]\\r\\n        ],\\r\\n        XYZ: [\\r\\n          [ new THREE.Mesh( new THREE.BoxGeometry( 0.125, 0.125, 0.125 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n      this.pickerGizmos = {\\r\\n        X: [\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0xff0000, opacity: 0.25 } ) ), [ 0.6, 0, 0 ], [ 0, 0, -Math.PI/2 ] ]\\r\\n        ],\\r\\n        Y: [\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x00ff00, opacity: 0.25 } ) ), [ 0, 0.6, 0 ] ]\\r\\n        ],\\r\\n        Z: [\\r\\n          [ new THREE.Mesh( new THREE.CylinderGeometry( 0.2, 0, 1, 4, 1, false ), new GizmoMaterial( { color: 0x0000ff, opacity: 0.25 } ) ), [ 0, 0, 0.6 ], [ Math.PI/2, 0, 0 ] ]\\r\\n        ],\\r\\n        XYZ: [\\r\\n          [ new THREE.Mesh( new THREE.BoxGeometry( 0.4, 0.4, 0.4 ), new GizmoMaterial( { color: 0xffffff, opacity: 0.25 } ) ) ]\\r\\n        ]\\r\\n      };\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setActivePlane = function ( axis, eye ) {\\r\\n\\r\\n      var tempMatrix = new THREE.Matrix4();\\r\\n      eye.applyMatrix4( tempMatrix.getInverse( tempMatrix.extractRotation( this.planes[ \\\"XY\\\" ].matrixWorld ) ) );\\r\\n\\r\\n      if ( axis == \\\"X\\\" ) {\\r\\n        this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n        if ( Math.abs(eye.y) > Math.abs(eye.z) ) this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n      }\\r\\n\\r\\n      if ( axis == \\\"Y\\\" ){\\r\\n        this.activePlane = this.planes[ \\\"XY\\\" ];\\r\\n        if ( Math.abs(eye.x) > Math.abs(eye.z) ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n      }\\r\\n\\r\\n      if ( axis == \\\"Z\\\" ){\\r\\n        this.activePlane = this.planes[ \\\"XZ\\\" ];\\r\\n        if ( Math.abs(eye.x) > Math.abs(eye.y) ) this.activePlane = this.planes[ \\\"YZ\\\" ];\\r\\n      }\\r\\n\\r\\n      if ( axis == \\\"XYZ\\\" ) this.activePlane = this.planes[ \\\"XYZE\\\" ];\\r\\n\\r\\n      this.hide();\\r\\n      this.show();\\r\\n\\r\\n    };\\r\\n\\r\\n    this.init();\\r\\n\\r\\n  };\\r\\n\\r\\n  THREE.TransformGizmoScale.prototype = Object.create( THREE.TransformGizmo.prototype );\\r\\n\\r\\n  THREE.TransformControls = function ( camera, domElement, mode ) {\\r\\n\\r\\n    // TODO: Make non-uniform scale and rotate play nice in hierarchies\\r\\n    // TODO: ADD RXYZ contol\\r\\n\\r\\n    THREE.Object3D.call( this );\\r\\n\\r\\n    domElement = ( domElement !== undefined ) ? domElement : document;\\r\\n\\r\\n    this.gizmo = {};\\r\\n    switch ( mode ) {\\r\\n      case \\\"translate\\\":\\r\\n        this.gizmo[mode] = new THREE.TransformGizmoTranslate();\\r\\n        break;\\r\\n      case \\\"rotate\\\":\\r\\n        this.gizmo[mode] = new THREE.TransformGizmoRotate();\\r\\n        break;\\r\\n      case \\\"transrotate\\\":\\r\\n        this.gizmo[mode] = new THREE.TransformGizmoTranslateRotate();\\r\\n        break;\\r\\n      case \\\"scale\\\":\\r\\n        this.gizmo[mode] = new THREE.TransformGizmoScale();\\r\\n        break;\\r\\n    }\\r\\n\\r\\n    this.add(this.gizmo[mode]);\\r\\n    this.gizmo[mode].hide();\\r\\n\\r\\n    this.object = undefined;\\r\\n    this.snap = null;\\r\\n    this.snapDelta = 0;\\r\\n    this.space = \\\"world\\\";\\r\\n    this.size = 1;\\r\\n    this.axis = null;\\r\\n    this.useAllPickers = true;\\r\\n\\r\\n    this.unitX = new THREE.Vector3( 1, 0, 0 );\\r\\n    this.unitY = new THREE.Vector3( 0, 1, 0 );\\r\\n    this.unitZ = new THREE.Vector3( 0, 0, 1 );\\r\\n    this.normal = new THREE.Vector3(0, 0, 1);\\r\\n\\r\\n    if ( mode === \\\"transrotate\\\" ) {\\r\\n      var geometry = new THREE.Geometry();\\r\\n      geometry.vertices.push( new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 1) );\\r\\n      var material = new THREE.LineBasicMaterial( {color: 0x000000, linewidth:2, depthTest: false} );\\r\\n      this.startLine = new THREE.Line( geometry, material );\\r\\n      var geometry = new THREE.Geometry();\\r\\n      var material = new THREE.LineBasicMaterial( {color: 0xffe603, linewidth:2, depthTest: false} );\\r\\n      geometry.vertices.push( new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 1) );\\r\\n      this.endLine = new THREE.Line( geometry, material );\\r\\n      var geometry = new THREE.Geometry();\\r\\n      var material = new THREE.LineDashedMaterial({color: 0x000000, linewidth:1, depthTest: false});\\r\\n      geometry.vertices.push( new THREE.Vector3(0, -1, 0), new THREE.Vector3(0, 1, 0) );\\r\\n      this.centerLine = new THREE.Line( geometry, material );\\r\\n\\r\\n      var map = THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl(\\\"res/textures/centerMarker_X.png\\\"));\\r\\n      map.magFilter = map.minFilter = THREE.NearestFilter;\\r\\n      var geometry = new THREE.CircleGeometry( 0.1, 32 );\\r\\n      var material = new THREE.MeshBasicMaterial({opacity: 1, side: THREE.DoubleSide, transparent:true, map:map});\\r\\n      this.centerMark = new THREE.Mesh( geometry, material );\\r\\n      this.centerMark.rotation.set(Math.PI/2, 0, 0);\\r\\n\\r\\n      this.ticks = {};\\r\\n      var map = THREE.ImageUtils.loadTexture(Autodesk.Viewing.Private.getResourceUrl(\\\"res/textures/cardinalPoint.png\\\"));\\r\\n      map.magFilter = map.minFilter = THREE.NearestFilter;\\r\\n      var material = new THREE.MeshBasicMaterial({depthTest: false, opacity: 1, transparent:true, side: THREE.DoubleSide, map:map});\\r\\n      var w = 0.12, h = 0.25, d = 1.15;\\r\\n\\r\\n      this.ticks[\\\"RX\\\"] = new THREE.Object3D();\\r\\n      var geometry = new THREE.PlaneBufferGeometry(w, h);\\r\\n      var mesh = new THREE.Mesh(geometry, material);\\r\\n      mesh.position.set(0, 0, -d-h/2);\\r\\n      mesh.rotation.set(Math.PI/2, Math.PI/2, 0);\\r\\n      this.ticks[\\\"RX\\\"].add(mesh);\\r\\n\\r\\n      mesh = mesh.clone();\\r\\n      mesh.position.set(0, d+h/2, 0);\\r\\n      mesh.rotation.set(0, Math.PI/2, 0);\\r\\n      this.ticks[\\\"RX\\\"].add(mesh);\\r\\n\\r\\n      mesh = mesh.clone();\\r\\n      mesh.position.set(0, 0, d+h/2);\\r\\n      mesh.rotation.set(0, Math.PI/2, Math.PI/2);\\r\\n      this.ticks[\\\"RX\\\"].add(mesh);\\r\\n\\r\\n      mesh = mesh.clone();\\r\\n      mesh.position.set(0, -d-h/2, 0);\\r\\n      mesh.rotation.set(0, Math.PI/2, 0);\\r\\n      this.ticks[\\\"RX\\\"].add(mesh);\\r\\n\\r\\n      this.ticks[\\\"RY\\\"] = new THREE.Object3D();\\r\\n      mesh = mesh.clone();\\r\\n      mesh.position.set(0, 0, -d-h/2);\\r\\n      mesh.rotation.set(Math.PI/2, 0, 0);\\r\\n      this.ticks[\\\"RY\\\"].add(mesh);\\r\\n\\r\\n      mesh = mesh.clone();\\r\\n      mesh.position.set(-d-h/2, 0, 0);\\r\\n      mesh.rotation.set(Math.PI/2, 0, Math.PI/2);\\r\\n      this.ticks[\\\"RY\\\"].add(mesh);\\r\\n\\r\\n      mesh = mesh.clone();\\r\\n      mesh.position.set(0, 0, d+h/2);\\r\\n      mesh.rotation.set(Math.PI/2, 0, 0);\\r\\n      this.ticks[\\\"RY\\\"].add(mesh);\\r\\n\\r\\n      mesh = mesh.clone();\\r\\n      mesh.position.set(d+h/2, 0, 0);\\r\\n      mesh.rotation.set(Math.PI/2, 0, Math.PI/2);\\r\\n      this.ticks[\\\"RY\\\"].add(mesh);\\r\\n    }\\r\\n\\r\\n    var scope = this;\\r\\n\\r\\n    var _dragging = false;\\r\\n    var _mode = mode;\\r\\n    var _plane = \\\"XY\\\";\\r\\n\\r\\n    var changeEvent = { type: \\\"change\\\" };\\r\\n    var mouseDownEvent = { type: \\\"mouseDown\\\" };\\r\\n    var mouseUpEvent = { type: \\\"mouseUp\\\", mode: _mode };\\r\\n    var objectChangeEvent = { type: \\\"objectChange\\\" };\\r\\n\\r\\n    var ray = new THREE.Raycaster();\\r\\n    var pointerVector = new THREE.Vector3();\\r\\n    var pointerDir = new THREE.Vector3();\\r\\n\\r\\n    var point = new THREE.Vector3();\\r\\n    var offset = new THREE.Vector3();\\r\\n\\r\\n    var rotation = new THREE.Vector3();\\r\\n    var offsetRotation = new THREE.Vector3();\\r\\n    var scale = 1;\\r\\n\\r\\n    var lookAtMatrix = new THREE.Matrix4();\\r\\n    var eye = new THREE.Vector3();\\r\\n\\r\\n    var tempMatrix = new THREE.Matrix4();\\r\\n    var tempVector = new THREE.Vector3();\\r\\n    var tempQuaternion = new THREE.Quaternion();\\r\\n    var projX = new THREE.Vector3();\\r\\n    var projY = new THREE.Vector3();\\r\\n    var projZ = new THREE.Vector3();\\r\\n\\r\\n    var quaternionXYZ = new THREE.Quaternion();\\r\\n    var quaternionX = new THREE.Quaternion();\\r\\n    var quaternionY = new THREE.Quaternion();\\r\\n    var quaternionZ = new THREE.Quaternion();\\r\\n    var quaternionE = new THREE.Quaternion();\\r\\n\\r\\n    var oldPosition = new THREE.Vector3();\\r\\n    var oldScale = new THREE.Vector3();\\r\\n    var oldRotationMatrix = new THREE.Matrix4();\\r\\n\\r\\n    var parentRotationMatrix  = new THREE.Matrix4();\\r\\n    var parentScale = new THREE.Vector3();\\r\\n\\r\\n    var worldPosition = new THREE.Vector3();\\r\\n    var worldRotation = new THREE.Euler();\\r\\n    var worldRotationMatrix  = new THREE.Matrix4();\\r\\n    var camPosition = new THREE.Vector3();\\r\\n    var camRotation = new THREE.Euler();\\r\\n\\r\\n    this.attach = function ( object ) {\\r\\n\\r\\n      scope.object = object;\\r\\n\\r\\n      this.gizmo[_mode].show();\\r\\n\\r\\n      scope.update();\\r\\n\\r\\n      scope.updateUnitVectors();\\r\\n\\r\\n    };\\r\\n\\r\\n    this.detach = function ( object ) {\\r\\n\\r\\n      scope.object = undefined;\\r\\n      this.axis = null;\\r\\n\\r\\n      this.gizmo[_mode].hide();\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setMode = function ( mode ) {\\r\\n\\r\\n      _mode = mode ? mode : _mode;\\r\\n\\r\\n      if ( _mode == \\\"scale\\\" ) scope.space = \\\"local\\\";\\r\\n\\r\\n      this.gizmo[_mode].show();\\r\\n\\r\\n      this.update();\\r\\n      scope.dispatchEvent( changeEvent );\\r\\n\\r\\n    };\\r\\n\\r\\n    this.getPicker = function () {\\r\\n\\r\\n      return scope.gizmo[_mode].hemiPicker.children;\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setPosition = function ( position ) {\\r\\n\\r\\n      this.object.position.copy ( position );\\r\\n      this.update();\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setNormal = function ( normal ) {\\r\\n\\r\\n      tempQuaternion.setFromUnitVectors( this.normal, normal );\\r\\n      this.unitX.applyQuaternion( tempQuaternion );\\r\\n      this.unitY.applyQuaternion( tempQuaternion );\\r\\n      this.unitZ.applyQuaternion( tempQuaternion );\\r\\n      this.normal.copy( normal );\\r\\n      if (this.object) {\\r\\n        this.object.quaternion.multiply ( tempQuaternion );\\r\\n      }\\r\\n      this.update();\\r\\n    };\\r\\n\\r\\n    this.setSnap = function ( snap, delta ) {\\r\\n\\r\\n      scope.snap = snap;\\r\\n      scope.snapDelta = delta;\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setSize = function ( size ) {\\r\\n\\r\\n      scope.size = size;\\r\\n      this.update();\\r\\n      scope.dispatchEvent( changeEvent );\\r\\n\\r\\n    };\\r\\n\\r\\n    this.setSpace = function ( space ) {\\r\\n\\r\\n      scope.space = space;\\r\\n      this.update();\\r\\n      scope.dispatchEvent( changeEvent );\\r\\n\\r\\n    };\\r\\n\\r\\n    this.update = function (highlight) {\\r\\n\\r\\n      if ( scope.object === undefined ) return;\\r\\n\\r\\n      scope.object.updateMatrixWorld();\\r\\n      worldPosition.setFromMatrixPosition( scope.object.matrixWorld );\\r\\n      worldRotation.setFromRotationMatrix( tempMatrix.extractRotation( scope.object.matrixWorld ) );\\r\\n\\r\\n      camera.updateMatrixWorld();\\r\\n      camPosition.setFromMatrixPosition( camera.matrixWorld );\\r\\n      //camRotation.setFromRotationMatrix( tempMatrix.extractRotation( camera.matrixWorld ) );\\r\\n\\r\\n      this.position.copy( worldPosition );\\r\\n\\r\\n      this.quaternion.setFromEuler( worldRotation );\\r\\n\\r\\n      this.normal.set( 0, 0, 1 );\\r\\n      this.normal.applyEuler( worldRotation );\\r\\n\\r\\n      // keep same screen height (100px)\\r\\n      var dist = worldPosition.distanceTo( camPosition );\\r\\n      var height = camera.isPerspective? 2 * Math.tan( camera.fov * Math.PI / 360 ) * dist : dist;\\r\\n      var rect = domElement.getBoundingClientRect();\\r\\n      scale = 100 * height / rect.height;\\r\\n      this.scale.set( scale, scale, scale );\\r\\n\\r\\n      //eye.copy( camPosition ).sub( worldPosition ).normalize();\\r\\n\\r\\n      //if ( scope.space == \\\"local\\\" )\\r\\n      //    this.gizmo[_mode].update( worldRotation, eye );\\r\\n      //else if ( scope.space == \\\"world\\\" )\\r\\n      //    this.gizmo[_mode].update( new THREE.Euler(), eye );\\r\\n\\r\\n      if (highlight)\\r\\n        this.gizmo[_mode].highlight( scope.axis );\\r\\n\\r\\n    };\\r\\n\\r\\n    this.updateUnitVectors = function () {\\r\\n\\r\\n      this.unitX.set( 1, 0, 0 );\\r\\n      this.unitY.set( 0, 1, 0 );\\r\\n      this.unitZ.set( 0, 0, 1 );\\r\\n      this.unitX.applyEuler( worldRotation );\\r\\n      this.unitY.applyEuler( worldRotation );\\r\\n      this.unitZ.applyEuler( worldRotation );\\r\\n\\r\\n    };\\r\\n\\r\\n    this.showRotationGizmos = function (set) {\\r\\n\\r\\n      var handles = this.gizmo[_mode].handles.children;\\r\\n      for ( var i = 0; i < handles.length; i++ ) {\\r\\n        var child = handles[i];\\r\\n        child.visible = true;\\r\\n        if ( child.name.search(\\\"R\\\") !== -1 ) child.visible = set;\\r\\n      }\\r\\n      this.useAllPickers = set;\\r\\n\\r\\n    };\\r\\n\\r\\n    this.highlight = function () {\\r\\n\\r\\n      this.gizmo[_mode].highlight( this.axis || \\\"Z\\\" );\\r\\n\\r\\n    };\\r\\n\\r\\n    this.onPointerHover = function( event ) {\\r\\n\\r\\n      if ( scope.object === undefined || _dragging === true ) return false;\\r\\n\\r\\n      var pointer = event.pointers ? event.pointers[ 0 ] : event;\\r\\n\\r\\n      var intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\\r\\n\\r\\n      var axis = null;\\r\\n      var mode = \\\"\\\";\\r\\n\\r\\n      if ( intersect ) {\\r\\n\\r\\n        axis = intersect.object.name;\\r\\n        mode = axis.search(\\\"R\\\") != -1 ? \\\"rotate\\\" : \\\"translate\\\";\\r\\n\\r\\n      }\\r\\n\\r\\n      if ( scope.axis !== axis ) {\\r\\n\\r\\n        scope.axis = axis;\\r\\n        scope.gizmo[_mode].activeMode = mode;\\r\\n        scope.update(true);\\r\\n        scope.dispatchEvent( changeEvent );\\r\\n\\r\\n      }\\r\\n\\r\\n      if (scope.axis === null) {\\r\\n\\r\\n        scope.gizmo[_mode].show();\\r\\n\\r\\n      }\\r\\n\\r\\n      return intersect? true : false;\\r\\n\\r\\n    }\\r\\n\\r\\n    this.onPointerDown = function( event ) {\\r\\n\\r\\n      if ( scope.object === undefined || _dragging === true ) return false;\\r\\n\\r\\n      var pointer = event.pointers ? event.pointers[ 0 ] : event;\\r\\n\\r\\n      if ( event.pointerType === 'touch' ) {\\r\\n\\r\\n        var intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\\r\\n\\r\\n        var axis = null;\\r\\n        var mode = \\\"\\\";\\r\\n\\r\\n        if ( intersect ) {\\r\\n\\r\\n          axis = intersect.object.name;\\r\\n          mode = axis.search(\\\"R\\\") != -1 ? \\\"rotate\\\" : \\\"translate\\\";\\r\\n\\r\\n        }\\r\\n\\r\\n        if ( scope.axis !== axis ) {\\r\\n\\r\\n          scope.axis = axis;\\r\\n          scope.gizmo[_mode].activeMode = mode;\\r\\n        }\\r\\n      }\\r\\n\\r\\n      var intersect = null;\\r\\n\\r\\n      if ( pointer.button === 0 || pointer.button === undefined ) {\\r\\n\\r\\n        intersect = intersectObjects( pointer, scope.useAllPickers? scope.gizmo[_mode].pickers.children: scope.gizmo[_mode].subPickers.children );\\r\\n\\r\\n        if ( intersect ) {\\r\\n\\r\\n          scope.dispatchEvent( mouseDownEvent );\\r\\n\\r\\n          scope.axis = intersect.object.name;\\r\\n\\r\\n          scope.update();\\r\\n\\r\\n          eye.copy( camera.position ).sub( worldPosition ).normalize();\\r\\n\\r\\n          scope.gizmo[_mode].setActivePlane( scope.axis, eye );\\r\\n\\r\\n          var planeIntersect = intersectObjects( pointer, [scope.gizmo[_mode].activePlane] );\\r\\n\\r\\n          if ( planeIntersect )\\r\\n            offset.copy( planeIntersect.point );\\r\\n\\r\\n          oldPosition.copy( scope.object.position );\\r\\n          oldScale.copy( scope.object.scale );\\r\\n\\r\\n          oldRotationMatrix.extractRotation( scope.object.matrix );\\r\\n          worldRotationMatrix.extractRotation( scope.object.matrixWorld );\\r\\n\\r\\n          if ( scope.object.parent ) {\\r\\n            parentRotationMatrix.extractRotation( scope.object.parent.matrixWorld );\\r\\n            parentScale.setFromMatrixScale( tempMatrix.getInverse( scope.object.parent.matrixWorld ) );\\r\\n          } else {\\r\\n            parentRotationMatrix.extractRotation( scope.object.matrixWorld );\\r\\n            parentScale.setFromMatrixScale( tempMatrix.getInverse( scope.object.matrixWorld ) );\\r\\n          }\\r\\n\\r\\n          // show rotation start line and ticks\\r\\n          if ( _mode === \\\"transrotate\\\" && scope.gizmo[_mode].activeMode === \\\"rotate\\\" ) {\\r\\n            scope.startLine.geometry.vertices[0].set(0, 0, 0).applyMatrix4( scope.matrixWorld );\\r\\n            scope.startLine.geometry.vertices[1].set(0, 0, 1).applyMatrix4( scope.matrixWorld );\\r\\n            scope.startLine.geometry.verticesNeedUpdate = true;\\r\\n            scope.parent.add( scope.startLine );\\r\\n\\r\\n            var pos = scope.object.geometry.getAttribute('position');\\r\\n            var pt1 = new THREE.Vector3().fromAttribute(pos, 0).applyMatrix4( scope.object.matrixWorld );\\r\\n            var pt2 = new THREE.Vector3().fromAttribute(pos, 1).applyMatrix4( scope.object.matrixWorld );\\r\\n            var pt3 = new THREE.Vector3().fromAttribute(pos, 2).applyMatrix4( scope.object.matrixWorld );\\r\\n            var pt4 = new THREE.Vector3().fromAttribute(pos, 3).applyMatrix4( scope.object.matrixWorld );\\r\\n            if (scope.axis === \\\"RX\\\") {\\r\\n              pt1.lerp(pt3, 0.5);\\r\\n              pt2.lerp(pt4, 0.5);\\r\\n              var dist = pt1.distanceTo(pt2);\\r\\n              scope.centerLine.material.dashSize = dist / 15;\\r\\n              scope.centerLine.material.gapSize = dist / 30;\\r\\n              scope.centerLine.geometry.vertices[0].copy(pt1);\\r\\n              scope.centerLine.geometry.vertices[1].copy(pt2);\\r\\n            } else {\\r\\n              pt1.lerp(pt2, 0.5);\\r\\n              pt3.lerp(pt4, 0.5);\\r\\n              var dist = pt1.distanceTo(pt3);\\r\\n              scope.centerLine.material.dashSize = dist / 15;\\r\\n              scope.centerLine.material.gapSize = dist / 30;\\r\\n              scope.centerLine.geometry.vertices[0].copy(pt1);\\r\\n              scope.centerLine.geometry.vertices[1].copy(pt3);\\r\\n            }\\r\\n            scope.centerLine.geometry.computeLineDistances();\\r\\n            scope.centerLine.geometry.verticesNeedUpdate = true;\\r\\n            scope.parent.add( scope.centerLine );\\r\\n\\r\\n            scope.ticks[scope.axis].position.copy( scope.position );\\r\\n            scope.ticks[scope.axis].quaternion.copy( scope.quaternion );\\r\\n            scope.ticks[scope.axis].scale.copy( scope.scale );\\r\\n            scope.parent.add( scope.ticks[scope.axis] );\\r\\n          }\\r\\n\\r\\n        }\\r\\n\\r\\n      }\\r\\n\\r\\n      _dragging = true;\\r\\n\\r\\n      return intersect? true: false;\\r\\n\\r\\n    }\\r\\n\\r\\n    this.onPointerMove = function( event ) {\\r\\n\\r\\n      if ( scope.object === undefined || scope.axis === null || _dragging === false ) return false;\\r\\n\\r\\n      var pointer = event.pointers ? event.pointers[ 0 ] : event;\\r\\n\\r\\n      var planeIntersect = intersectObjects( pointer, [scope.gizmo[_mode].activePlane] );\\r\\n\\r\\n      if ( planeIntersect )\\r\\n        point.copy( planeIntersect.point );\\r\\n\\r\\n      var mode = scope.gizmo[_mode].activeMode;\\r\\n      if ( mode == \\\"translate\\\" ) {\\r\\n\\r\\n        point.sub( offset );\\r\\n        point.multiply(parentScale);\\r\\n\\r\\n        if ( scope.space == \\\"local\\\" ) {\\r\\n\\r\\n          point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\\r\\n\\r\\n          projX.copy( this.unitX );\\r\\n          projY.copy( this.unitY );\\r\\n          projZ.copy( this.unitZ );\\r\\n          tempVector.set( 0, 0, 0 );\\r\\n          if ( scope.axis.search(\\\"X\\\") != -1 ) {\\r\\n            projX.multiplyScalar( point.dot( this.unitX ) );\\r\\n            tempVector.add( projX );\\r\\n          }\\r\\n          if ( scope.axis.search(\\\"Y\\\") != -1 ) {\\r\\n            projY.multiplyScalar( point.dot( this.unitY ) );\\r\\n            tempVector.add(projY);\\r\\n          }\\r\\n          if ( scope.axis.search(\\\"Z\\\") != -1 ) {\\r\\n            projZ.multiplyScalar( point.dot( this.unitZ ) );\\r\\n            tempVector.add( projZ );\\r\\n          }\\r\\n          point.copy( tempVector );\\r\\n\\r\\n          point.applyMatrix4( oldRotationMatrix );\\r\\n\\r\\n          scope.object.position.copy( oldPosition );\\r\\n          scope.object.position.add( point );\\r\\n\\r\\n        }\\r\\n\\r\\n        if ( scope.space == \\\"world\\\" || scope.axis.search(\\\"XYZ\\\") != -1 ) {\\r\\n\\r\\n          projX.copy( this.unitX );\\r\\n          projY.copy( this.unitY );\\r\\n          projZ.copy( this.unitZ );\\r\\n          tempVector.set( 0, 0, 0 );\\r\\n          if ( scope.axis.search(\\\"X\\\") != -1 ) {\\r\\n            projX.multiplyScalar( point.dot( this.unitX ) );\\r\\n            tempVector.add( projX );\\r\\n          }\\r\\n          if ( scope.axis.search(\\\"Y\\\") != -1 ) {\\r\\n            projY.multiplyScalar( point.dot( this.unitY ) );\\r\\n            tempVector.add(projY);\\r\\n          }\\r\\n          if ( scope.axis.search(\\\"Z\\\") != -1 ) {\\r\\n            projZ.multiplyScalar( point.dot( this.unitZ ) );\\r\\n            tempVector.add( projZ );\\r\\n          }\\r\\n          point.copy( tempVector );\\r\\n\\r\\n          point.applyMatrix4( tempMatrix.getInverse( parentRotationMatrix ) );\\r\\n\\r\\n          scope.object.position.copy( oldPosition );\\r\\n          scope.object.position.add( point );\\r\\n\\r\\n        }\\r\\n\\r\\n      } else if ( mode == \\\"scale\\\" ) {\\r\\n\\r\\n        point.sub( offset );\\r\\n        point.multiply(parentScale);\\r\\n\\r\\n        if ( scope.space == \\\"local\\\" ) {\\r\\n\\r\\n          if ( scope.axis == \\\"XYZ\\\") {\\r\\n\\r\\n            scale = 1 + ( ( point.y ) / 50 );\\r\\n\\r\\n            scope.object.scale.x = oldScale.x * scale;\\r\\n            scope.object.scale.y = oldScale.y * scale;\\r\\n            scope.object.scale.z = oldScale.z * scale;\\r\\n\\r\\n          } else {\\r\\n\\r\\n            point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\\r\\n\\r\\n            if ( scope.axis == \\\"X\\\" ) scope.object.scale.x = oldScale.x * ( 1 + point.x / 50 );\\r\\n            if ( scope.axis == \\\"Y\\\" ) scope.object.scale.y = oldScale.y * ( 1 + point.y / 50 );\\r\\n            if ( scope.axis == \\\"Z\\\" ) scope.object.scale.z = oldScale.z * ( 1 + point.z / 50 );\\r\\n\\r\\n          }\\r\\n\\r\\n        }\\r\\n\\r\\n      } else if ( mode == \\\"rotate\\\") {\\r\\n\\r\\n        point.sub( worldPosition );\\r\\n        point.multiply(parentScale);\\r\\n        tempVector.copy(offset).sub( worldPosition );\\r\\n        tempVector.multiply(parentScale);\\r\\n\\r\\n        if ( scope.axis == \\\"RE\\\" ) {\\r\\n\\r\\n          point.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\\r\\n          tempVector.applyMatrix4( tempMatrix.getInverse( lookAtMatrix ) );\\r\\n\\r\\n          rotation.set( Math.atan2( point.z, point.y ), Math.atan2( point.x, point.z ), Math.atan2( point.y, point.x ) );\\r\\n          offsetRotation.set( Math.atan2( tempVector.z, tempVector.y ), Math.atan2( tempVector.x, tempVector.z ), Math.atan2( tempVector.y, tempVector.x ) );\\r\\n\\r\\n          tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\\r\\n\\r\\n          var rotz = rotation.z - offsetRotation.z;\\r\\n          if ( scope.snap !== null ) {\\r\\n            var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\\r\\n            if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\\r\\n              rotz = rotsnap;\\r\\n            }\\r\\n          }\\r\\n          quaternionE.setFromAxisAngle( eye, rotz );\\r\\n          quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\\r\\n\\r\\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionE );\\r\\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\\r\\n\\r\\n          scope.object.quaternion.copy( tempQuaternion );\\r\\n\\r\\n        } else if ( scope.axis == \\\"RXYZE\\\" ) {\\r\\n\\r\\n          var tempAxis = point.clone().cross(tempVector).normalize(); // rotation axis\\r\\n\\r\\n          tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\\r\\n\\r\\n          var rot = - point.clone().angleTo(tempVector);\\r\\n          if ( scope.snap !== null ) {\\r\\n            var rotsnap = Math.round( rot / scope.snap ) * scope.snap;\\r\\n            if ( Math.abs(rotsnap-rot) < scope.snapDelta ) {\\r\\n              rot = rotsnap;\\r\\n            }\\r\\n          }\\r\\n          quaternionX.setFromAxisAngle( tempAxis, rot );\\r\\n          quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\\r\\n\\r\\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\\r\\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\\r\\n\\r\\n          scope.object.quaternion.copy( tempQuaternion );\\r\\n\\r\\n        } else if ( scope.space == \\\"local\\\" ) {\\r\\n\\r\\n          point.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\\r\\n\\r\\n          tempVector.applyMatrix4( tempMatrix.getInverse( worldRotationMatrix ) );\\r\\n\\r\\n          var projx = point.dot(this.unitX), projy = point.dot(this.unitY), projz = point.dot(this.unitZ);\\r\\n          var tempx = tempVector.dot(this.unitX), tempy = tempVector.dot(this.unitY), tempz = tempVector.dot(this.unitZ);\\r\\n          rotation.set( Math.atan2( projz, projy ), Math.atan2( projx, projz ), Math.atan2( projy, projx ) );\\r\\n          offsetRotation.set( Math.atan2( tempz, tempy ), Math.atan2( tempx, tempz ), Math.atan2( tempy, tempx ) );\\r\\n\\r\\n          var rotx = rotation.x - offsetRotation.x;\\r\\n          var roty = rotation.y - offsetRotation.y;\\r\\n          var rotz = rotation.z - offsetRotation.z;\\r\\n          if ( scope.snap !== null ) {\\r\\n            if ( scope.axis.search(\\\"X\\\") != -1 ) {\\r\\n              var rotsnap = Math.round( rotx / scope.snap ) * scope.snap;\\r\\n              if ( Math.abs(rotsnap-rotx) < scope.snapDelta ) {\\r\\n                rotx = rotsnap;\\r\\n              }\\r\\n            }\\r\\n            if ( scope.axis.search(\\\"Y\\\") != -1 ) {\\r\\n              var rotsnap = Math.round( roty / scope.snap ) * scope.snap;\\r\\n              if ( Math.abs(rotsnap-roty) < scope.snapDelta ) {\\r\\n                roty = rotsnap;\\r\\n              }\\r\\n            }\\r\\n            if ( scope.axis.search(\\\"Z\\\") != -1 ) {\\r\\n              var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\\r\\n              if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\\r\\n                rotz = rotsnap;\\r\\n              }\\r\\n            }\\r\\n          }\\r\\n          quaternionX.setFromAxisAngle( this.unitX, rotx );\\r\\n          quaternionY.setFromAxisAngle( this.unitY, roty );\\r\\n          quaternionZ.setFromAxisAngle( this.unitZ, rotz );\\r\\n          quaternionXYZ.setFromRotationMatrix( oldRotationMatrix );\\r\\n\\r\\n          if ( scope.axis == \\\"RX\\\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionX );\\r\\n          if ( scope.axis == \\\"RY\\\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionY );\\r\\n          if ( scope.axis == \\\"RZ\\\" ) quaternionXYZ.multiplyQuaternions( quaternionXYZ, quaternionZ );\\r\\n\\r\\n          scope.object.quaternion.copy( quaternionXYZ );\\r\\n\\r\\n        } else if ( scope.space == \\\"world\\\" ) {\\r\\n\\r\\n          var projx = point.dot(this.unitX), projy = point.dot(this.unitY), projz = point.dot(this.unitZ);\\r\\n          var tempx = tempVector.dot(this.unitX), tempy = tempVector.dot(this.unitY), tempz = tempVector.dot(this.unitZ);\\r\\n          rotation.set( Math.atan2( projz, projy ), Math.atan2( projx, projz ), Math.atan2( projy, projx ) );\\r\\n          offsetRotation.set( Math.atan2( tempz, tempy ), Math.atan2( tempx, tempz ), Math.atan2( tempy, tempx ) );\\r\\n\\r\\n          tempQuaternion.setFromRotationMatrix( tempMatrix.getInverse( parentRotationMatrix ) );\\r\\n\\r\\n          var rotx = rotation.x - offsetRotation.x;\\r\\n          var roty = rotation.y - offsetRotation.y;\\r\\n          var rotz = rotation.z - offsetRotation.z;\\r\\n          if ( scope.snap !== null ) {\\r\\n            if ( scope.axis.search(\\\"X\\\") != -1 ) {\\r\\n              var rotsnap = Math.round( rotx / scope.snap ) * scope.snap;\\r\\n              if ( Math.abs(rotsnap-rotx) < scope.snapDelta ) {\\r\\n                rotx = rotsnap;\\r\\n              }\\r\\n            }\\r\\n            if ( scope.axis.search(\\\"Y\\\") != -1 ) {\\r\\n              var rotsnap = Math.round( roty / scope.snap ) * scope.snap;\\r\\n              if ( Math.abs(rotsnap-roty) < scope.snapDelta ) {\\r\\n                roty = rotsnap;\\r\\n              }\\r\\n            }\\r\\n            if ( scope.axis.search(\\\"Z\\\") != -1 ) {\\r\\n              var rotsnap = Math.round( rotz / scope.snap ) * scope.snap;\\r\\n              if ( Math.abs(rotsnap-rotz) < scope.snapDelta ) {\\r\\n                rotz = rotsnap;\\r\\n              }\\r\\n            }\\r\\n          }\\r\\n          quaternionX.setFromAxisAngle( this.unitX, rotx );\\r\\n          quaternionY.setFromAxisAngle( this.unitY, roty );\\r\\n          quaternionZ.setFromAxisAngle( this.unitZ, rotz );\\r\\n          quaternionXYZ.setFromRotationMatrix( worldRotationMatrix );\\r\\n\\r\\n          if ( scope.axis == \\\"RX\\\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionX );\\r\\n          if ( scope.axis == \\\"RY\\\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionY );\\r\\n          if ( scope.axis == \\\"RZ\\\" ) tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionZ );\\r\\n\\r\\n          tempQuaternion.multiplyQuaternions( tempQuaternion, quaternionXYZ );\\r\\n\\r\\n          scope.object.quaternion.copy( tempQuaternion );\\r\\n\\r\\n        }\\r\\n\\r\\n        // show rotation end line\\r\\n        if (_mode === \\\"transrotate\\\" ) {\\r\\n          scope.add( scope.endLine );\\r\\n          scope.add( scope.centerMark );\\r\\n        }\\r\\n\\r\\n      }\\r\\n\\r\\n      // update matrix\\r\\n      scope.object.matrixAutoUpdate = true;\\r\\n\\r\\n      scope.update(true);\\r\\n      scope.dispatchEvent( changeEvent );\\r\\n      scope.dispatchEvent( objectChangeEvent );\\r\\n\\r\\n      return planeIntersect? true : false;\\r\\n\\r\\n    }\\r\\n\\r\\n    this.onPointerUp = function( event ) {\\r\\n\\r\\n      if ( _dragging && ( scope.axis !== null ) ) {\\r\\n        mouseUpEvent.mode = _mode;\\r\\n        scope.dispatchEvent( mouseUpEvent )\\r\\n      }\\r\\n      _dragging = false;\\r\\n\\r\\n      this.gizmo[_mode].show();\\r\\n\\r\\n      this.updateUnitVectors();\\r\\n\\r\\n      // remove rotation start/end lines\\r\\n      if ( _mode === \\\"transrotate\\\" && this.gizmo[_mode].activeMode === \\\"rotate\\\" ) {\\r\\n        this.remove( this.endLine );\\r\\n        this.remove( this.centerMark );\\r\\n        this.parent.remove( this.centerLine );\\r\\n        this.parent.remove( this.startLine );\\r\\n        this.parent.remove( this.ticks[this.axis] );\\r\\n      }\\r\\n\\r\\n      return false;\\r\\n\\r\\n    }\\r\\n\\r\\n    function intersectObjects( pointer, objects ) {\\r\\n\\r\\n      var rect = domElement.getBoundingClientRect();\\r\\n      var x = ( ( pointer.clientX - rect.left ) / rect.width ) * 2 - 1;\\r\\n      var y = - ( ( pointer.clientY - rect.top ) / rect.height ) * 2 + 1;\\r\\n\\r\\n      if ( camera.isPerspective ) {\\r\\n        pointerVector.set( x, y, 0.5 );\\r\\n        pointerVector.unproject( camera );\\r\\n        ray.set( camera.position, pointerVector.sub( camera.position ).normalize() );\\r\\n      } else {\\r\\n        pointerVector.set( x, y, -1 );\\r\\n        pointerVector.unproject( camera );\\r\\n        pointerDir.set( 0, 0, -1 );\\r\\n        ray.set( pointerVector, pointerDir.transformDirection( camera.matrixWorld ) );\\r\\n      }\\r\\n\\r\\n      var intersections = ray.intersectObjects( objects, true );\\r\\n      return intersections[0] ? intersections[0] : false;\\r\\n\\r\\n    }\\r\\n\\r\\n  };\\r\\n\\r\\n  THREE.TransformControls.prototype = Object.create( THREE.Object3D.prototype );\\r\\n})()\",\"/* eslint-disable */\\r\\nimport EventsEmitter from '../components/EventsEmitter'\\r\\nimport './TransformGizmos'\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst Autodesk = window.Autodesk;\\r\\nconst THREE = window.THREE;\\r\\n\\r\\nexport default class TransformTool extends EventsEmitter {\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Class constructor\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  constructor (viewer) {\\r\\n\\r\\n    super()\\r\\n\\r\\n    this._dbIds = []\\r\\n\\r\\n    this.active = false\\r\\n\\r\\n    this._viewer = viewer\\r\\n\\r\\n    this._isDragging = false\\r\\n\\r\\n    this.fullTransform = false\\r\\n  \\r\\n    this._transformMesh = null\\r\\n\\r\\n    this._selectedFragProxyMap = {}\\r\\n\\r\\n    this._transformControlTx = null\\r\\n\\r\\n    this._hitPoint = new THREE.Vector3()\\r\\n\\r\\n    this.onTxChange =\\r\\n      this.onTxChange.bind(this)\\r\\n\\r\\n    this.onAggregateSelectionChanged =\\r\\n      this.onAggregateSelectionChanged.bind(this)\\r\\n\\r\\n    this.onCameraChanged =\\r\\n      this.onCameraChanged.bind(this)\\r\\n\\r\\n    this._selectionMode = 'SELECTION_MODE_TRANSFORM'\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  getNames () {\\r\\n\\r\\n    return [\\\"Viewing.Transform.Tool\\\"]\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  getName () {\\r\\n\\r\\n    return \\\"Viewing.Transform.Tool\\\"\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // Creates a dummy mesh to attach control to\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  createTransformMesh() {\\r\\n\\r\\n    var material = new THREE.MeshPhongMaterial(\\r\\n      { color: 0xff0000 })\\r\\n\\r\\n    this._viewer.impl.matman().addMaterial(\\r\\n      'transform-tool-material',\\r\\n      material,\\r\\n      true)\\r\\n\\r\\n    var sphere = new THREE.Mesh(\\r\\n      new THREE.SphereGeometry(0.0001, 5),\\r\\n      material)\\r\\n\\r\\n    sphere.position.set(0, 0, 0)\\r\\n\\r\\n    return sphere\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // on translation change\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  onTxChange() {\\r\\n\\r\\n    if(this._isDragging && this._transformControlTx.visible) {\\r\\n\\r\\n      var translation = new THREE.Vector3(\\r\\n        this._transformMesh.position.x - this._selection.model.offset.x,\\r\\n        this._transformMesh.position.y - this._selection.model.offset.y,\\r\\n        this._transformMesh.position.z - this._selection.model.offset.z)\\r\\n\\r\\n      for(var fragId in this._selectedFragProxyMap) {\\r\\n\\r\\n        var fragProxy = this._selectedFragProxyMap[fragId]\\r\\n\\r\\n        var position = new THREE.Vector3(\\r\\n          this._transformMesh.position.x - fragProxy.offset.x,\\r\\n          this._transformMesh.position.y - fragProxy.offset.y,\\r\\n          this._transformMesh.position.z - fragProxy.offset.z)\\r\\n\\r\\n        fragProxy.position = position\\r\\n\\r\\n        fragProxy.updateAnimTransform()\\r\\n      }\\r\\n\\r\\n      this.emit('transform.translate', {\\r\\n        model: this._selection.model,\\r\\n        translation: translation\\r\\n      })\\r\\n    }\\r\\n\\r\\n    this._viewer.impl.sceneUpdated(true)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // on camera changed\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  onCameraChanged() {\\r\\n\\r\\n    if(this._transformControlTx) {\\r\\n\\r\\n      this._transformControlTx.update()\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // item selected callback\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  onAggregateSelectionChanged (event) {\\r\\n\\r\\n    switch (this._selectionMode) {\\r\\n\\r\\n      case 'SELECTION_MODE_TRANSFORM':\\r\\n\\r\\n        if(event.selections && event.selections.length) {\\r\\n\\r\\n          var selection = event.selections[0]\\r\\n\\r\\n          this.setSelection(selection)\\r\\n\\r\\n        } else {\\r\\n\\r\\n          this.clearSelection()\\r\\n        }\\r\\n\\r\\n        break;\\r\\n\\r\\n      case 'SELECTION_MODE_PICK':\\r\\n\\r\\n        if(event.selections && event.selections.length) {\\r\\n\\r\\n          this._selectionMode = 'SELECTION_MODE_RESUME_TRANSFORM'\\r\\n\\r\\n          this.emit('transform.modelSelected',\\r\\n            this._selection)\\r\\n\\r\\n          this._viewer.clearSelection()\\r\\n\\r\\n          this._viewer.select(this._dbIds)\\r\\n\\r\\n          this.setPosition(this._hitPoint)\\r\\n        }\\r\\n\\r\\n      case 'SELECTION_MODE_RESUME_TRANSFORM':\\r\\n\\r\\n        setTimeout(() => {\\r\\n\\r\\n          this._selectionMode = 'SELECTION_MODE_TRANSFORM'\\r\\n        }, 300)\\r\\n\\r\\n        break;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  setSelection (selection) {\\r\\n\\r\\n    this._selection = selection\\r\\n\\r\\n    this._dbIds = this._selection.dbIdArray\\r\\n\\r\\n    if (this.fullTransform) {\\r\\n\\r\\n      this._selection.fragIdsArray = []\\r\\n\\r\\n      var fragCount = this._selection.model.getFragmentList().\\r\\n        fragments.fragId2dbId.length\\r\\n\\r\\n      for (var fragId = 0; fragId < fragCount; ++fragId) {\\r\\n\\r\\n        this._selection.fragIdsArray.push(fragId)\\r\\n      }\\r\\n\\r\\n      this._selection.dbIdArray = []\\r\\n\\r\\n      var instanceTree =\\r\\n        this._selection.model.getData().instanceTree\\r\\n\\r\\n      var rootId = instanceTree.getRootId()\\r\\n\\r\\n      this._selection.dbIdArray.push(rootId)\\r\\n    }\\r\\n\\r\\n    this.emit('transform.modelSelected',\\r\\n      this._selection)\\r\\n\\r\\n    this.initializeSelection(\\r\\n      this._hitPoint)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  initializeSelection (hitPoint) {\\r\\n\\r\\n    this._selectedFragProxyMap = {}\\r\\n\\r\\n    var modelTransform = this._selection.model.transform ||\\r\\n      { translation: { x:0, y:0, z:0 } }\\r\\n\\r\\n    this._selection.model.offset = {\\r\\n      x: hitPoint.x - modelTransform.translation.x,\\r\\n      y: hitPoint.y - modelTransform.translation.y,\\r\\n      z: hitPoint.z - modelTransform.translation.z\\r\\n    }\\r\\n\\r\\n    this._transformControlTx.visible = true\\r\\n\\r\\n    this._transformControlTx.setPosition(\\r\\n      hitPoint)\\r\\n\\r\\n    this._transformControlTx.addEventListener(\\r\\n      'change', this.onTxChange)\\r\\n\\r\\n    this._viewer.addEventListener(\\r\\n      Autodesk.Viewing.CAMERA_CHANGE_EVENT,\\r\\n      this.onCameraChanged)\\r\\n\\r\\n    this._selection.fragIdsArray.forEach((fragId) => {\\r\\n\\r\\n      var fragProxy = this._viewer.impl.getFragmentProxy(\\r\\n        this._selection.model,\\r\\n        fragId)\\r\\n\\r\\n      fragProxy.getAnimTransform()\\r\\n\\r\\n      fragProxy.offset = {\\r\\n\\r\\n        x: hitPoint.x - fragProxy.position.x,\\r\\n        y: hitPoint.y - fragProxy.position.y,\\r\\n        z: hitPoint.z - fragProxy.position.z\\r\\n      }\\r\\n\\r\\n      this._selectedFragProxyMap[fragId] = fragProxy\\r\\n    })\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  clearSelection () {\\r\\n\\r\\n    if (this.active) {\\r\\n\\r\\n      this._selection = null\\r\\n\\r\\n      this._selectedFragProxyMap = {}\\r\\n\\r\\n      this._transformControlTx.visible = false\\r\\n\\r\\n      this._transformControlTx.removeEventListener(\\r\\n        'change', this.onTxChange)\\r\\n\\r\\n      this._viewer.removeEventListener(\\r\\n        Autodesk.Viewing.CAMERA_CHANGE_EVENT,\\r\\n        this.onCameraChanged)\\r\\n\\r\\n      this._viewer.impl.sceneUpdated(true)\\r\\n\\r\\n      this.emit('transform.clearSelection',\\r\\n        this._selection)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  setPosition (position) {\\r\\n\\r\\n    this._transformControlTx.setPosition(position)\\r\\n\\r\\n    for(var fragId in this._selectedFragProxyMap) {\\r\\n\\r\\n      var fragProxy = this._selectedFragProxyMap[fragId]\\r\\n\\r\\n      var fragPosition = new THREE.Vector3(\\r\\n        position.x - fragProxy.offset.x,\\r\\n        position.y - fragProxy.offset.y,\\r\\n        position.z - fragProxy.offset.z)\\r\\n\\r\\n      fragProxy.position = fragPosition\\r\\n\\r\\n      fragProxy.updateAnimTransform()\\r\\n    }\\r\\n\\r\\n    this._viewer.impl.sceneUpdated(true)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // normalize screen coordinates\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  normalize (screenPoint) {\\r\\n\\r\\n    var viewport = this._viewer.navigation.getScreenViewport()\\r\\n\\r\\n    var n = {\\r\\n      x: (screenPoint.x - viewport.left) / viewport.width,\\r\\n      y: (screenPoint.y - viewport.top) / viewport.height\\r\\n    }\\r\\n\\r\\n    return n\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // get 3d hit point on mesh\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  getHitPoint (event) {\\r\\n\\r\\n    var screenPoint = {\\r\\n      x: event.clientX,\\r\\n      y: event.clientY\\r\\n    }\\r\\n\\r\\n    var n = this.normalize(screenPoint)\\r\\n\\r\\n    var hitPoint = this._viewer.utilities.getHitPoint(n.x, n.y)\\r\\n\\r\\n    return hitPoint\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  hitPoint () {\\r\\n\\r\\n    return this._transformControlTx.position\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  setHitPoint (hitPoint) {\\r\\n\\r\\n    this._hitPoint.x = hitPoint.x\\r\\n    this._hitPoint.y = hitPoint.y\\r\\n    this._hitPoint.z = hitPoint.z\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  activate () {\\r\\n\\r\\n    if(!this.active) {\\r\\n\\r\\n      this.active = true\\r\\n\\r\\n      var bbox = this._viewer.model.getBoundingBox()\\r\\n\\r\\n      this._viewer.impl.createOverlayScene(\\r\\n        'TransformToolOverlay')\\r\\n\\r\\n      this._transformControlTx = new THREE.TransformControls(\\r\\n        this._viewer.impl.camera,\\r\\n        this._viewer.impl.canvas,\\r\\n        \\\"translate\\\")\\r\\n\\r\\n      this._transformControlTx.setSize(\\r\\n        bbox.getBoundingSphere().radius * 5)\\r\\n\\r\\n      this._transformControlTx.visible = false\\r\\n\\r\\n      this._viewer.impl.addOverlay(\\r\\n        'TransformToolOverlay',\\r\\n        this._transformControlTx)\\r\\n\\r\\n      this._transformMesh = this.createTransformMesh()\\r\\n\\r\\n      this._transformControlTx.attach(\\r\\n        this._transformMesh)\\r\\n\\r\\n      this._viewer.addEventListener(\\r\\n        Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\\r\\n        this.onAggregateSelectionChanged)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // deactivate tool\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  deactivate () {\\r\\n\\r\\n    if (this.active) {\\r\\n\\r\\n      this.active = false\\r\\n\\r\\n      this._viewer.impl.removeOverlay(\\r\\n        'TransformToolOverlay',\\r\\n        this._transformControlTx)\\r\\n\\r\\n      this._transformControlTx.removeEventListener(\\r\\n        'change',\\r\\n        this.onTxChange)\\r\\n\\r\\n      this._viewer.impl.removeOverlayScene(\\r\\n        'TransformToolOverlay')\\r\\n\\r\\n      this._viewer.removeEventListener(\\r\\n        Autodesk.Viewing.CAMERA_CHANGE_EVENT,\\r\\n        this.onCameraChanged)\\r\\n\\r\\n      this._viewer.removeEventListener(\\r\\n        Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\\r\\n        this.onAggregateSelectionChanged)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  onPick () {\\r\\n\\r\\n    if(this.active) {\\r\\n\\r\\n      this._selectionMode = 'SELECTION_MODE_PICK'\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  handleButtonDown(event, button) {\\r\\n\\r\\n    this._isDragging = true\\r\\n\\r\\n    if (this._transformControlTx.onPointerDown(event))\\r\\n      return true\\r\\n\\r\\n    var hitPoint = this.getHitPoint(event)\\r\\n\\r\\n    if (hitPoint) {\\r\\n\\r\\n      this._translation = new THREE.Vector3()\\r\\n      this._hitPoint.copy(hitPoint)\\r\\n    }\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  handleButtonUp(event, button) {\\r\\n\\r\\n    this._isDragging = false\\r\\n\\r\\n    if (this._transformControlTx.onPointerUp(event))\\r\\n      return true\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  handleMouseMove(event) {\\r\\n\\r\\n    if (this._isDragging) {\\r\\n\\r\\n      if (this._transformControlTx.onPointerMove(event) ) {\\r\\n\\r\\n        return true\\r\\n      }\\r\\n\\r\\n      return false\\r\\n    }\\r\\n\\r\\n    if (this._transformControlTx.onPointerHover(event))\\r\\n      return true\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  handleKeyDown (event, keyCode) {\\r\\n\\r\\n    if (keyCode === 27) { //ESC\\r\\n\\r\\n      this._viewer.clearSelection()\\r\\n    }\\r\\n\\r\\n    return false\\r\\n  }\\r\\n}\\r\\n\",\"/* eslint-disable */\\r\\nimport EventsEmitter from '../components/EventsEmitter'\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst Autodesk = window.Autodesk;\\r\\nconst THREE = window.THREE;\\r\\n\\r\\nexport default class RotateTool extends EventsEmitter {\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Class constructor\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  constructor (viewer) {\\r\\n\\r\\n    super()\\r\\n\\r\\n    this.keys = {}\\r\\n\\r\\n    this.active = false\\r\\n\\r\\n    this.viewer = viewer\\r\\n\\r\\n    this.fullTransform = false\\r\\n\\r\\n    this._hitPoint = new THREE.Vector3()\\r\\n\\r\\n    this.viewer.toolController.registerTool(this)\\r\\n\\r\\n    this.onAggregateSelectionChangedHandler = (e) => {\\r\\n\\r\\n      this.onAggregateSelectionChanged(e)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  enable (enable) {\\r\\n\\r\\n    var name = this.getName()\\r\\n\\r\\n    if (enable) {\\r\\n\\r\\n      this.viewer.toolController.activateTool(name)\\r\\n\\r\\n    } else {\\r\\n\\r\\n      this.viewer.toolController.deactivateTool(name)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  getNames () {\\r\\n\\r\\n    return ['Viewing.Rotate.Tool']\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  getName () {\\r\\n\\r\\n    return 'Viewing.Rotate.Tool'\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  activate () {\\r\\n\\r\\n    if (!this.active) {\\r\\n\\r\\n      this.active = true\\r\\n\\r\\n      this.viewer.addEventListener(\\r\\n        Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\\r\\n        this.onAggregateSelectionChangedHandler)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // deactivate tool\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  deactivate () {\\r\\n\\r\\n    if (this.active) {\\r\\n\\r\\n      this.active = false\\r\\n\\r\\n      if (this.rotateControl) {\\r\\n\\r\\n        this.rotateControl.remove()\\r\\n        this.rotateControl = null\\r\\n      }\\r\\n\\r\\n      this.viewer.removeEventListener(\\r\\n        Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\\r\\n        this.onAggregateSelectionChangedHandler)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  onAggregateSelectionChanged (event) {\\r\\n\\r\\n    if (this.rotateControl && this.rotateControl.engaged) {\\r\\n\\r\\n      this.rotateControl.engaged = false\\r\\n\\r\\n      //this.viewer.select(this.selection.dbIdArray)\\r\\n\\r\\n      return\\r\\n    }\\r\\n\\r\\n    if (event.selections && event.selections.length) {\\r\\n\\r\\n      var selection = event.selections[0]\\r\\n\\r\\n      this.setSelection(selection)\\r\\n\\r\\n    } else {\\r\\n\\r\\n      this.clearSelection()\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  setSelection(selection) {\\r\\n\\r\\n    this.selection = selection\\r\\n\\r\\n    this.emit('transform.modelSelected',\\r\\n      this.selection)\\r\\n\\r\\n    if (this.fullTransform) {\\r\\n\\r\\n      this.selection.fragIdsArray = []\\r\\n\\r\\n      var fragCount = selection.model.getFragmentList().\\r\\n        fragments.fragId2dbId.length\\r\\n\\r\\n      for (var fragId = 0; fragId < fragCount; ++fragId) {\\r\\n\\r\\n        this.selection.fragIdsArray.push(fragId)\\r\\n      }\\r\\n\\r\\n      this.selection.dbIdArray = []\\r\\n\\r\\n      var instanceTree = selection.model.getData().instanceTree\\r\\n\\r\\n      var rootId = instanceTree.getRootId()\\r\\n\\r\\n      this.selection.dbIdArray.push(rootId)\\r\\n\\r\\n      this.drawAxis()\\r\\n\\r\\n    } else {\\r\\n\\r\\n      this.drawAxis()\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  clearSelection() {\\r\\n\\r\\n    this.selection = null\\r\\n\\r\\n    if (this.rotateControl) {\\r\\n\\r\\n      this.rotateControl.remove()\\r\\n\\r\\n      this.rotateControl = null\\r\\n\\r\\n      this.viewer.impl.sceneUpdated(true)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  drawAxis () {\\r\\n\\r\\n    var bBox = this.geWorldBoundingBox(\\r\\n      this.selection.fragIdsArray,\\r\\n      this.selection.model.getFragmentList())\\r\\n\\r\\n    this.center = new THREE.Vector3(\\r\\n      (bBox.min.x + bBox.max.x) / 2,\\r\\n      (bBox.min.y + bBox.max.y) / 2,\\r\\n      (bBox.min.z + bBox.max.z) / 2)\\r\\n\\r\\n    var size = Math.max(\\r\\n        bBox.max.x - bBox.min.x,\\r\\n        bBox.max.y - bBox.min.y,\\r\\n        bBox.max.z - bBox.min.z) * 0.8\\r\\n\\r\\n    if (this.rotateControl) {\\r\\n\\r\\n      this.rotateControl.remove()\\r\\n    }\\r\\n\\r\\n    this.rotateControl = new RotateControl(\\r\\n      this.viewer, this.center, size)\\r\\n\\r\\n    this.rotateControl.on('transform.rotate', (data) => {\\r\\n\\r\\n      this.rotateFragments(\\r\\n        this.selection.model,\\r\\n        this.selection.fragIdsArray,\\r\\n        data.axis,\\r\\n        data.angle,\\r\\n        this.center)\\r\\n\\r\\n      this.viewer.impl.sceneUpdated(true)\\r\\n    })\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // get 3d hit point on mesh\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  getHitPoint (event) {\\r\\n\\r\\n    var screenPoint = {\\r\\n      x: event.clientX,\\r\\n      y: event.clientY\\r\\n    }\\r\\n\\r\\n    var n = this.normalize(screenPoint)\\r\\n\\r\\n    var hitPoint = this.viewer.utilities.getHitPoint(n.x, n.y)\\r\\n\\r\\n    return hitPoint\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  hitPoint () {\\r\\n\\r\\n    return this._hitPoint\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // normalize screen coordinates\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  normalize (screenPoint) {\\r\\n\\r\\n    var viewport = this.viewer.navigation.getScreenViewport()\\r\\n\\r\\n    var n = {\\r\\n      x: (screenPoint.x - viewport.left) / viewport.width,\\r\\n      y: (screenPoint.y - viewport.top) / viewport.height\\r\\n    }\\r\\n\\r\\n    return n\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  setHitPoint (hitPoint) {\\r\\n\\r\\n    this._hitPoint.copy(hitPoint)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  handleButtonDown (event, button) {\\r\\n\\r\\n    if (this.rotateControl) {\\r\\n\\r\\n      if (this.rotateControl.onPointerDown(event)) {\\r\\n\\r\\n        return true\\r\\n      }\\r\\n    }\\r\\n\\r\\n    if (button === 0 && this.keys.Control) {\\r\\n\\r\\n      this.isDragging = true\\r\\n\\r\\n      this.mousePos = {\\r\\n        x: event.clientX,\\r\\n        y: event.clientY\\r\\n      }\\r\\n\\r\\n      return true\\r\\n    }\\r\\n\\r\\n    var hitPoint = this.getHitPoint(event)\\r\\n\\r\\n    if (hitPoint) {\\r\\n\\r\\n      this._hitPoint = hitPoint\\r\\n    }\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  handleButtonUp (event, button) {\\r\\n\\r\\n    if (this.rotateControl) {\\r\\n\\r\\n      this.rotateControl.onPointerUp(event)\\r\\n    }\\r\\n\\r\\n    if (button === 0) {\\r\\n\\r\\n      this.isDragging = false\\r\\n    }\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  handleMouseMove (event) {\\r\\n\\r\\n    if (this.rotateControl) {\\r\\n\\r\\n      this.rotateControl.onPointerHover(event)\\r\\n    }\\r\\n\\r\\n    if (this.isDragging) {\\r\\n\\r\\n      if (this.selection) {\\r\\n\\r\\n        var offset = {\\r\\n          x: this.mousePos.x - event.clientX,\\r\\n          y: event.clientY - this.mousePos.y\\r\\n        }\\r\\n\\r\\n        this.mousePos = {\\r\\n          x: event.clientX,\\r\\n          y: event.clientY\\r\\n        }\\r\\n\\r\\n        var angle = Math.sqrt(\\r\\n          offset.x * offset.x +\\r\\n          offset.y * offset.y)\\r\\n\\r\\n        var sidewaysDirection = new THREE.Vector3()\\r\\n        var moveDirection = new THREE.Vector3()\\r\\n        var eyeDirection = new THREE.Vector3()\\r\\n        var upDirection = new THREE.Vector3()\\r\\n        var camera = this.viewer.getCamera()\\r\\n        var axis = new THREE.Vector3()\\r\\n        var eye = new THREE.Vector3()\\r\\n\\r\\n        eye.copy(camera.position).sub(camera.target)\\r\\n\\r\\n        eyeDirection.copy(eye).normalize()\\r\\n\\r\\n        upDirection.copy(camera.up).normalize()\\r\\n\\r\\n        sidewaysDirection.crossVectors(\\r\\n          upDirection, eyeDirection).normalize()\\r\\n\\r\\n        upDirection.setLength(offset.y)\\r\\n\\r\\n        sidewaysDirection.setLength(offset.x)\\r\\n\\r\\n        moveDirection.copy(\\r\\n          upDirection.add(\\r\\n            sidewaysDirection))\\r\\n\\r\\n        axis.crossVectors(moveDirection, eye).normalize()\\r\\n\\r\\n        this.rotateFragments(\\r\\n          this.selection.model,\\r\\n          this.selection.fragIdsArray,\\r\\n          axis, angle * Math.PI / 180,\\r\\n          this.center)\\r\\n\\r\\n        this.viewer.impl.sceneUpdated(true)\\r\\n      }\\r\\n\\r\\n      return true\\r\\n    }\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  handleKeyDown (event, keyCode) {\\r\\n\\r\\n    this.keys[event.key] = true\\r\\n\\r\\n    if (keyCode === 27) { //ESC\\r\\n\\r\\n      this.viewer.clearSelection()\\r\\n    }\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  handleKeyUp (event, keyCode) {\\r\\n\\r\\n    this.keys[event.key] = false\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  rotateFragments (model, fragIdsArray, axis, angle, center) {\\r\\n\\r\\n    var quaternion = new THREE.Quaternion()\\r\\n\\r\\n    quaternion.setFromAxisAngle(axis, angle)\\r\\n\\r\\n    fragIdsArray.forEach((fragId, idx) => {\\r\\n\\r\\n      var fragProxy = this.viewer.impl.getFragmentProxy(\\r\\n        model, fragId)\\r\\n\\r\\n      fragProxy.getAnimTransform()\\r\\n\\r\\n      var position = new THREE.Vector3(\\r\\n        fragProxy.position.x - center.x,\\r\\n        fragProxy.position.y - center.y,\\r\\n        fragProxy.position.z - center.z)\\r\\n\\r\\n      position.applyQuaternion(quaternion)\\r\\n\\r\\n      position.add(center)\\r\\n\\r\\n      fragProxy.position = position\\r\\n\\r\\n      fragProxy.quaternion.multiplyQuaternions(\\r\\n        quaternion, fragProxy.quaternion)\\r\\n\\r\\n      if (idx === 0) {\\r\\n\\r\\n        if(this._hitPoint) {\\r\\n\\r\\n          this._hitPoint.sub(center)\\r\\n\\r\\n          this._hitPoint.applyQuaternion(quaternion)\\r\\n\\r\\n          this._hitPoint.add(center)\\r\\n        }\\r\\n\\r\\n        var euler = new THREE.Euler()\\r\\n\\r\\n        euler.setFromQuaternion(\\r\\n          fragProxy.quaternion, 0)\\r\\n\\r\\n        this.emit('transform.rotate', {\\r\\n          rotation: euler,\\r\\n          model\\r\\n        })\\r\\n      }\\r\\n\\r\\n      fragProxy.updateAnimTransform()\\r\\n    })\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // returns bounding box as it appears in the viewer\\r\\n  // (transformations could be applied)\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  geWorldBoundingBox (fragIds, fragList) {\\r\\n\\r\\n    var fragbBox = new THREE.Box3()\\r\\n    var nodebBox = new THREE.Box3()\\r\\n\\r\\n    fragIds.forEach((fragId) => {\\r\\n\\r\\n      fragList.getWorldBounds(fragId, fragbBox)\\r\\n      nodebBox.union(fragbBox)\\r\\n    })\\r\\n\\r\\n    return nodebBox\\r\\n  }\\r\\n}\\r\\n\\r\\n///////////////////////////////////////////////////////////////////////////////\\r\\n//\\r\\n//\\r\\n///////////////////////////////////////////////////////////////////////////////\\r\\nclass RotateControl extends EventsEmitter {\\r\\n\\r\\n  constructor (viewer, center, size) {\\r\\n\\r\\n    super()\\r\\n\\r\\n    this.engaged = false\\r\\n\\r\\n    this.overlayScene = 'rotateControlScene'\\r\\n    this.domElement = viewer.impl.canvas\\r\\n    this.camera = viewer.impl.camera\\r\\n    this.viewer = viewer\\r\\n    this.center = center\\r\\n    this.size = size\\r\\n    this.gizmos = []\\r\\n\\r\\n    this.viewer.impl.createOverlayScene(\\r\\n      this.overlayScene)\\r\\n\\r\\n    this.createAxis(\\r\\n      center, new THREE.Vector3(1, 0, 0),\\r\\n      size * 0.85, 0xFF0000)\\r\\n\\r\\n    this.createAxis(\\r\\n      center, new THREE.Vector3(0, 1, 0),\\r\\n      size * 0.85, 0x00FF00)\\r\\n\\r\\n    this.createAxis(\\r\\n      center, new THREE.Vector3(0, 0, 1),\\r\\n      size * 0.85, 0x0000FF)\\r\\n\\r\\n    // World UP = Y\\r\\n\\r\\n    if (this.camera.worldup.y) {\\r\\n\\r\\n      this.gizmos.push(this.createGizmo(\\r\\n        center,\\r\\n        new THREE.Euler(0, Math.PI / 2, 0),\\r\\n        size * 0.0045,\\r\\n        size * 0.4, 0xFF0000,\\r\\n        Math.PI,\\r\\n        new THREE.Vector3(1, 0, 0)))\\r\\n\\r\\n      this.gizmos.push(this.createGizmo(\\r\\n        center,\\r\\n        new THREE.Euler(Math.PI / 2, 0, 0),\\r\\n        size * 0.0045,\\r\\n        size * 0.4, 0x00FF00,\\r\\n        2 * Math.PI,\\r\\n        new THREE.Vector3(0, 1, 0)))\\r\\n\\r\\n      this.gizmos.push(this.createGizmo(\\r\\n        center,\\r\\n        new THREE.Euler(0, 0, 0),\\r\\n        size * 0.0045,\\r\\n        size * 0.4, 0x0000FF,\\r\\n        Math.PI,\\r\\n        new THREE.Vector3(0, 0, 1)))\\r\\n\\r\\n    } else {\\r\\n\\r\\n      // World UP = Z\\r\\n\\r\\n      this.gizmos.push(this.createGizmo(\\r\\n        center,\\r\\n        new THREE.Euler(Math.PI / 2, Math.PI / 2, 0),\\r\\n        size * 0.0045,\\r\\n        size * 0.4, 0xFF0000,\\r\\n        Math.PI,\\r\\n        new THREE.Vector3(1, 0, 0)))\\r\\n\\r\\n      this.gizmos.push(this.createGizmo(\\r\\n        center,\\r\\n        new THREE.Euler(Math.PI / 2, 0, 0),\\r\\n        size * 0.0045,\\r\\n        size * 0.4, 0x00FF00,\\r\\n        Math.PI,\\r\\n        new THREE.Vector3(0, 1, 0)))\\r\\n\\r\\n      this.gizmos.push(this.createGizmo(\\r\\n        center,\\r\\n        new THREE.Euler(0, 0, 0),\\r\\n        size * 0.0045,\\r\\n        size * 0.4, 0x0000FF,\\r\\n        2 * Math.PI,\\r\\n        new THREE.Vector3(0, 0, 1)))\\r\\n    }\\r\\n\\r\\n    this.picker = this.createSphere(\\r\\n      size * 0.02)\\r\\n\\r\\n    var material = new THREE.LineBasicMaterial({\\r\\n      color: 0xFFFF00,\\r\\n      linewidth: 1,\\r\\n      depthTest: false,\\r\\n      depthWrite: false,\\r\\n      transparent: true\\r\\n    })\\r\\n\\r\\n    this.angleLine =\\r\\n      this.createLine(\\r\\n        this.center,\\r\\n        this.center,\\r\\n        material)\\r\\n\\r\\n    viewer.impl.sceneUpdated(true)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  createLine (start, end, material) {\\r\\n\\r\\n    var geometry = new THREE.Geometry()\\r\\n\\r\\n    geometry.vertices.push(new THREE.Vector3(\\r\\n      start.x, start.y, start.z))\\r\\n\\r\\n    geometry.vertices.push(new THREE.Vector3(\\r\\n      end.x, end.y, end.z))\\r\\n\\r\\n    var line = new THREE.Line(geometry, material)\\r\\n\\r\\n    this.viewer.impl.addOverlay(\\r\\n      this.overlayScene, line)\\r\\n\\r\\n    return line\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  createCone (start, dir, length, material) {\\r\\n\\r\\n    dir.normalize()\\r\\n\\r\\n    var end = {\\r\\n      x: start.x + dir.x * length,\\r\\n      y: start.y + dir.y * length,\\r\\n      z: start.z + dir.z * length\\r\\n    }\\r\\n\\r\\n    var orientation = new THREE.Matrix4()\\r\\n\\r\\n    orientation.lookAt(\\r\\n      start,\\r\\n      end,\\r\\n      new THREE.Object3D().up)\\r\\n\\r\\n    var matrix = new THREE.Matrix4()\\r\\n\\r\\n    matrix.set(\\r\\n      1, 0, 0, 0,\\r\\n      0, 0, 1, 0,\\r\\n      0, -1, 0, 0,\\r\\n      0, 0, 0, 1)\\r\\n\\r\\n    orientation.multiply(matrix)\\r\\n\\r\\n    var geometry = new THREE.CylinderGeometry(\\r\\n      0, length * 0.2, length, 128, 1)\\r\\n\\r\\n    var cone = new THREE.Mesh(geometry, material)\\r\\n\\r\\n    cone.applyMatrix(orientation)\\r\\n\\r\\n    cone.position.x = start.x + dir.x * length / 2\\r\\n    cone.position.y = start.y + dir.y * length / 2\\r\\n    cone.position.z = start.z + dir.z * length / 2\\r\\n\\r\\n    this.viewer.impl.addOverlay(\\r\\n      this.overlayScene, cone)\\r\\n\\r\\n    return cone\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  createAxis (start, dir, size, color) {\\r\\n\\r\\n    var end = {\\r\\n      x: start.x + dir.x * size,\\r\\n      y: start.y + dir.y * size,\\r\\n      z: start.z + dir.z * size\\r\\n    }\\r\\n\\r\\n    var material = new THREE.LineBasicMaterial({\\r\\n      color: color,\\r\\n      linewidth: 2,\\r\\n      depthTest: false,\\r\\n      depthWrite: false,\\r\\n      transparent: true\\r\\n    })\\r\\n\\r\\n    this.createLine(\\r\\n      start, end, material)\\r\\n\\r\\n    this.createCone(\\r\\n      end, dir, size * 0.1, material)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  createGizmo (center, euler, size, radius, color, range, axis) {\\r\\n\\r\\n    var material = new GizmoMaterial({\\r\\n      color: color\\r\\n    })\\r\\n\\r\\n    var subMaterial = new GizmoMaterial({\\r\\n      color: color\\r\\n    })\\r\\n\\r\\n    var torusGizmo = new THREE.Mesh(\\r\\n      new THREE.TorusGeometry(\\r\\n        radius, size, 64, 64, range),\\r\\n      material)\\r\\n\\r\\n    var subTorus = new THREE.Mesh(\\r\\n      new THREE.TorusGeometry(\\r\\n        radius, size, 64, 64, 2 * Math.PI),\\r\\n      subMaterial)\\r\\n\\r\\n    subTorus.material.highlight(true)\\r\\n\\r\\n    var transform = new THREE.Matrix4()\\r\\n\\r\\n    var q = new THREE.Quaternion()\\r\\n\\r\\n    q.setFromEuler(euler)\\r\\n\\r\\n    var s = new THREE.Vector3(1, 1, 1)\\r\\n\\r\\n    transform.compose(center, q, s)\\r\\n\\r\\n    torusGizmo.applyMatrix(transform)\\r\\n\\r\\n    subTorus.applyMatrix(transform)\\r\\n\\r\\n    var plane = this.createBox(\\r\\n      this.size * 100,\\r\\n      this.size * 100,\\r\\n      0.01)\\r\\n\\r\\n    plane.applyMatrix(transform)\\r\\n\\r\\n    subTorus.visible = false\\r\\n\\r\\n    this.viewer.impl.addOverlay(\\r\\n      this.overlayScene, torusGizmo)\\r\\n\\r\\n    this.viewer.impl.addOverlay(\\r\\n      this.overlayScene, subTorus)\\r\\n\\r\\n    torusGizmo.subGizmo = subTorus\\r\\n    torusGizmo.plane = plane\\r\\n    torusGizmo.axis = axis\\r\\n\\r\\n    return torusGizmo\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  createBox (w, h, d) {\\r\\n\\r\\n    var material = new GizmoMaterial({\\r\\n      color: 0x000000\\r\\n    })\\r\\n\\r\\n    var geometry = new THREE.BoxGeometry(w, h, d)\\r\\n\\r\\n    var box = new THREE.Mesh(\\r\\n      geometry, material)\\r\\n\\r\\n    box.visible = false\\r\\n\\r\\n    this.viewer.impl.addOverlay(\\r\\n      this.overlayScene, box)\\r\\n\\r\\n    return box\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  createSphere (radius) {\\r\\n\\r\\n    var material = new GizmoMaterial({\\r\\n      color: 0xFFFF00\\r\\n    })\\r\\n\\r\\n    var geometry = new THREE.SphereGeometry(\\r\\n      radius, 32, 32)\\r\\n\\r\\n    var sphere = new THREE.Mesh(\\r\\n      geometry, material)\\r\\n\\r\\n    sphere.visible = false\\r\\n\\r\\n    this.viewer.impl.addOverlay(\\r\\n      this.overlayScene, sphere)\\r\\n\\r\\n    return sphere\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  pointerToRaycaster (pointer) {\\r\\n\\r\\n    var pointerVector = new THREE.Vector3()\\r\\n    var pointerDir = new THREE.Vector3()\\r\\n    var ray = new THREE.Raycaster()\\r\\n\\r\\n    var rect = this.domElement.getBoundingClientRect()\\r\\n\\r\\n    var x = ((pointer.clientX - rect.left) / rect.width) * 2 - 1\\r\\n    var y = -((pointer.clientY - rect.top) / rect.height) * 2 + 1\\r\\n\\r\\n    if (this.camera.isPerspective) {\\r\\n\\r\\n      pointerVector.set(x, y, 0.5)\\r\\n\\r\\n      pointerVector.unproject(this.camera)\\r\\n\\r\\n      ray.set(this.camera.position,\\r\\n        pointerVector.sub(\\r\\n          this.camera.position).normalize())\\r\\n\\r\\n    } else {\\r\\n\\r\\n      pointerVector.set(x, y, -1)\\r\\n\\r\\n      pointerVector.unproject(this.camera)\\r\\n\\r\\n      pointerDir.set(0, 0, -1)\\r\\n\\r\\n      ray.set(pointerVector,\\r\\n        pointerDir.transformDirection(\\r\\n          this.camera.matrixWorld))\\r\\n    }\\r\\n\\r\\n    return ray\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  onPointerDown (event) {\\r\\n\\r\\n    var pointer = event.pointers ? event.pointers[ 0 ] : event\\r\\n\\r\\n    if (pointer.button === 0) {\\r\\n\\r\\n      var ray = this.pointerToRaycaster(pointer)\\r\\n\\r\\n      var intersectResults = ray.intersectObjects(\\r\\n        this.gizmos, true)\\r\\n\\r\\n      if (intersectResults.length) {\\r\\n\\r\\n        this.gizmos.forEach((gizmo) => {\\r\\n\\r\\n          gizmo.visible = false\\r\\n        })\\r\\n\\r\\n        this.selectedGizmo = intersectResults[0].object\\r\\n\\r\\n        this.selectedGizmo.subGizmo.visible = true\\r\\n\\r\\n        this.picker.position.copy(\\r\\n          intersectResults[0].point)\\r\\n\\r\\n        this.angleLine.geometry.vertices[1].copy(\\r\\n          intersectResults[0].point)\\r\\n\\r\\n        this.lastDir = intersectResults[0].point.sub(\\r\\n          this.center).normalize()\\r\\n\\r\\n        this.angleLine.geometry.verticesNeedUpdate = true\\r\\n\\r\\n        this.angleLine.visible = true\\r\\n\\r\\n        this.picker.visible = true\\r\\n\\r\\n      } else {\\r\\n\\r\\n        this.picker.visible = false\\r\\n      }\\r\\n\\r\\n      this.engaged = this.picker.visible\\r\\n\\r\\n      this.viewer.impl.sceneUpdated(true)\\r\\n    }\\r\\n\\r\\n    return this.picker.visible\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  onPointerHover (event) {\\r\\n\\r\\n    var pointer = event.pointers ? event.pointers[ 0 ] : event\\r\\n\\r\\n    if (this.engaged) {\\r\\n\\r\\n      var ray = this.pointerToRaycaster(pointer)\\r\\n\\r\\n      var intersectResults = ray.intersectObjects(\\r\\n        [this.selectedGizmo.plane], true)\\r\\n\\r\\n      if (intersectResults.length) {\\r\\n\\r\\n        var intersectPoint = intersectResults[0].point\\r\\n\\r\\n        var dir = intersectPoint.sub(\\r\\n          this.center).normalize()\\r\\n\\r\\n        var cross = new THREE.Vector3()\\r\\n\\r\\n        cross.crossVectors(this.lastDir, dir)\\r\\n\\r\\n        var sign = Math.sign(\\r\\n          cross.dot(this.selectedGizmo.axis))\\r\\n\\r\\n        this.emit('transform.rotate', {\\r\\n          angle: sign * dir.angleTo(this.lastDir),\\r\\n          axis: this.selectedGizmo.axis\\r\\n        })\\r\\n\\r\\n        this.lastDir = dir\\r\\n\\r\\n        var pickerPoint = new THREE.Vector3(\\r\\n          this.center.x + dir.x * this.size * 0.8,\\r\\n          this.center.y + dir.y * this.size * 0.8,\\r\\n          this.center.z + dir.z * this.size * 0.8)\\r\\n\\r\\n        this.picker.position.copy(\\r\\n          pickerPoint)\\r\\n\\r\\n        this.angleLine.geometry.vertices[1].copy(\\r\\n          pickerPoint)\\r\\n      }\\r\\n\\r\\n      this.angleLine.visible = true\\r\\n\\r\\n      this.angleLine.geometry.verticesNeedUpdate = true\\r\\n\\r\\n    } else {\\r\\n\\r\\n      this.angleLine.visible = false\\r\\n\\r\\n      var ray = this.pointerToRaycaster(pointer)\\r\\n\\r\\n      var intersectResults = ray.intersectObjects(\\r\\n        this.gizmos, true)\\r\\n\\r\\n      if (intersectResults.length) {\\r\\n\\r\\n        this.picker.position.set(\\r\\n          intersectResults[ 0 ].point.x,\\r\\n          intersectResults[ 0 ].point.y,\\r\\n          intersectResults[ 0 ].point.z)\\r\\n\\r\\n        this.picker.visible = true\\r\\n\\r\\n      } else {\\r\\n\\r\\n        this.picker.visible = false\\r\\n      }\\r\\n    }\\r\\n\\r\\n    this.viewer.impl.sceneUpdated(true)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  onPointerUp (event) {\\r\\n\\r\\n    this.angleLine.visible = false\\r\\n\\r\\n    this.picker.visible = false\\r\\n\\r\\n    this.gizmos.forEach((gizmo) => {\\r\\n\\r\\n      gizmo.visible = true\\r\\n      gizmo.subGizmo.visible = false\\r\\n    })\\r\\n\\r\\n    this.viewer.impl.sceneUpdated(true)\\r\\n\\r\\n    setTimeout(() => {\\r\\n      this.engaged = false\\r\\n    }, 100)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  normalize(screenPoint) {\\r\\n\\r\\n    var viewport = this.viewer.navigation.getScreenViewport()\\r\\n\\r\\n    var n = {\\r\\n      x: (screenPoint.x - viewport.left) / viewport.width,\\r\\n      y: (screenPoint.y - viewport.top) / viewport.height\\r\\n    }\\r\\n\\r\\n    return n\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  projectOntoPlane (worldPoint, normal) {\\r\\n\\r\\n    var dist = normal.dot(worldPoint)\\r\\n\\r\\n    return new THREE.Vector3(\\r\\n      worldPoint.x - dist * normal.x,\\r\\n      worldPoint.y - dist * normal.y,\\r\\n      worldPoint.z - dist * normal.z)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  remove () {\\r\\n\\r\\n    this.viewer.impl.removeOverlayScene(\\r\\n      this.overlayScene)\\r\\n  }\\r\\n}\\r\\n\\r\\n///////////////////////////////////////////////////////////////////////////////\\r\\n//\\r\\n//\\r\\n///////////////////////////////////////////////////////////////////////////////\\r\\nclass GizmoMaterial extends THREE.MeshBasicMaterial {\\r\\n\\r\\n  constructor (parameters) {\\r\\n\\r\\n    super()\\r\\n\\r\\n    this.setValues(parameters)\\r\\n\\r\\n    this.colorInit = this.color.clone()\\r\\n    this.opacityInit = this.opacity\\r\\n    this.side = THREE.FrontSide\\r\\n    this.depthWrite = false\\r\\n    this.transparent = true\\r\\n    this.depthTest = false\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  highlight (highlighted) {\\r\\n\\r\\n    if (highlighted) {\\r\\n\\r\\n      this.color.setRGB(1, 230 / 255, 3 / 255)\\r\\n      this.opacity = 1\\r\\n\\r\\n    } else {\\r\\n\\r\\n      this.color.copy(this.colorInit)\\r\\n      this.opacity = this.opacityInit\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\",\"//import Snap from 'imports-loader?this=>window,fix=>module.exports=0!snapsvg/dist/snap.svg.js'\\r\\n/* eslint-disable */\\r\\nimport EventsEmitter from '../EventsEmitter'\\r\\nimport './Viewer.Tooltip.css'\\r\\n\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst $ = window.$;\\r\\nconst THREE = window.THREE;\\r\\n\\r\\n\\r\\nexport default class ViewerTooltip extends EventsEmitter {\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Class constructor\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  constructor (viewer) {\\r\\n\\r\\n    super()\\r\\n\\r\\n    this.markerId = this.guid()\\r\\n\\r\\n    this.svgId = this.guid()\\r\\n\\r\\n    const htmlMarker = `\\r\\n      <div id=\\\"${this.markerId}\\\" class=\\\"tooltip-marker\\\">\\r\\n        <svg id=\\\"${this.svgId}\\\"></svg>\\r\\n      </div>`\\r\\n\\r\\n    viewer.toolController.registerTool(this)\\r\\n\\r\\n    $(viewer.container).append(htmlMarker)\\r\\n\\r\\n    this.$marker = $(`#${this.markerId}`)\\r\\n\\r\\n    // this.pointer = this.createPointer(\\r\\n    //   $(`#${this.svgId}`)[0])\\r\\n\\r\\n    this.viewer = viewer\\r\\n\\r\\n    this.active = false\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // createPointer (element) {\\r\\n\\r\\n  //   const snap = Snap(element)\\r\\n\\r\\n  //   let circle = snap.paper.circle(\\r\\n  //     25, 25, 0)\\r\\n\\r\\n  //   circle.attr({\\r\\n  //     stroke: '#00FF00',\\r\\n  //     fillOpacity: 0.4,\\r\\n  //     fill: '#00FF00',\\r\\n  //     strokeWidth: 2,\\r\\n  //     opacity: 1\\r\\n  //   })\\r\\n\\r\\n  //   return circle\\r\\n  // }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // animatePointer (id) {\\r\\n\\r\\n  //   if(this.animateId === id) {\\r\\n\\r\\n  //     this.pointer.attr({\\r\\n  //       fillOpacity: 0.8,\\r\\n  //       opacity: 1,\\r\\n  //       r: 0\\r\\n  //     })\\r\\n\\r\\n  //     this.pointer.animate({\\r\\n  //         fillOpacity: 0.2,\\r\\n  //         opacity: 0.4,\\r\\n  //         r: 16\\r\\n  //       },\\r\\n  //       2000,\\r\\n  //       mina.easein, () => {\\r\\n\\r\\n  //         if (this.pointerVisible) {\\r\\n\\r\\n  //           this.animatePointer(id)\\r\\n  //         }\\r\\n  //       })\\r\\n  //   }\\r\\n  // }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  setContent (html, selector) {\\r\\n\\r\\n    this.tooltipSelector = selector\\r\\n\\r\\n    $(this.viewer.container).append(html)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Tool names\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  getNames () {\\r\\n\\r\\n    return ['Viewer.Tooltip.Tool']\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Tool name\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  getName () {\\r\\n\\r\\n    return 'Viewer.Tooltip.Tool'\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Activate Tool\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  activate () {\\r\\n\\r\\n    if(!this.active) {\\r\\n\\r\\n      this.active = true\\r\\n\\r\\n      this.viewer.toolController.activateTool(\\r\\n        this.getName())\\r\\n\\r\\n      $(this.tooltipSelector).css({\\r\\n        display: 'block'\\r\\n      })\\r\\n\\r\\n      this.emit('activate')\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Deactivate tool\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  deactivate () {\\r\\n\\r\\n    if (this.active) {\\r\\n\\r\\n      this.active = false\\r\\n\\r\\n      this.viewer.toolController.deactivateTool(\\r\\n        this.getName())\\r\\n\\r\\n      $(this.tooltipSelector).css({\\r\\n        display: 'none'\\r\\n      })\\r\\n\\r\\n      this.pointerVisible = false\\r\\n\\r\\n      this.$marker.css({\\r\\n        display: 'none'\\r\\n      })\\r\\n\\r\\n      this.emit('deactivate')\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  handleSingleClick (event, button) {\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  handleMouseMove (event) {\\r\\n\\r\\n    const $offset = $(this.viewer.container).offset()\\r\\n\\r\\n    $(this.tooltipSelector).css({\\r\\n      top  : event.clientY - $offset.top - 30 + 'px',\\r\\n      left : event.clientX - $offset.left + 'px'\\r\\n    })\\r\\n\\r\\n    const screenPoint = {\\r\\n      x: event.clientX,\\r\\n      y: event.clientY\\r\\n    }\\r\\n\\r\\n    const worldPoint = this.screenToWorld(screenPoint)\\r\\n\\r\\n    if (worldPoint && this.active) {\\r\\n\\r\\n      //console.log(worldPoint)\\r\\n\\r\\n      const offset = $(this.viewer.container).offset()\\r\\n\\r\\n      this.$marker.css({\\r\\n        left: screenPoint.x - offset.left - this.$marker.width()/2,\\r\\n        top: screenPoint.y - offset.top - this.$marker.height()/2,\\r\\n        display: 'block'\\r\\n      })\\r\\n\\r\\n      if (!this.pointerVisible) {\\r\\n\\r\\n        this.pointerVisible = true\\r\\n\\r\\n        this.animateId = this.guid()\\r\\n\\r\\n        // this.animatePointer(\\r\\n        //   this.animateId)\\r\\n      }\\r\\n\\r\\n    } else {\\r\\n\\r\\n      this.pointerVisible = false\\r\\n\\r\\n      this.$marker.css({\\r\\n        display: 'none'\\r\\n      })\\r\\n\\r\\n\\r\\n      // NOT USING DROPDOWN IN XYPLANE SAMPLE SO NO NEED TO GET ATTR FOR MODEL NAME\\r\\n      // ERRORS WHEN UNCOMMENTED SINCE ATTR IS UNDEFINED, SINCE OPTS IS ALSO IN DROPDOWN CLASS\\r\\n      \\r\\n      // this.pointer.attr({\\r\\n      //   r: 0\\r\\n      // })\\r\\n    }\\r\\n\\r\\n    return false\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  screenToWorld (screenPoint) {\\r\\n\\r\\n    var viewport = this.viewer.navigation.getScreenViewport()\\r\\n\\r\\n    var n = {\\r\\n      x: (screenPoint.x - viewport.left) / viewport.width,\\r\\n      y: (screenPoint.y - viewport.top ) / viewport.height\\r\\n    }\\r\\n\\r\\n    return this.viewer.utilities.getHitPoint(n.x, n.y)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  // world -> screen coords conversion\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////////////\\r\\n  worldToScreen (worldPoint, camera) {\\r\\n\\r\\n    var p = new THREE.Vector4()\\r\\n\\r\\n    p.x = worldPoint.x\\r\\n    p.y = worldPoint.y\\r\\n    p.z = worldPoint.z\\r\\n    p.w = 1\\r\\n\\r\\n    p.applyMatrix4(camera.matrixWorldInverse)\\r\\n    p.applyMatrix4(camera.projectionMatrix)\\r\\n\\r\\n    // Don't want to mirror values with negative z (behind camera)\\r\\n    // if camera is inside the bounding box,\\r\\n    // better to throw markers to the screen sides.\\r\\n    if (p.w > 0) {\\r\\n\\r\\n      p.x /= p.w;\\r\\n      p.y /= p.w;\\r\\n      p.z /= p.w;\\r\\n    }\\r\\n\\r\\n    // This one is multiplying by width/2 and height/2,\\r\\n    // and offsetting by canvas location\\r\\n    var point = this._viewer.impl.viewportToClient(p.x, p.y);\\r\\n\\r\\n    // snap to the center of the pixel\\r\\n    point.x = Math.floor(point.x) + 0.5;\\r\\n    point.y = Math.floor(point.y) + 0.5;\\r\\n\\r\\n    return point;\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  handleKeyDown (event, keyCode) {\\r\\n\\r\\n    return false\\r\\n  }\\r\\n}\\r\\n\",\"import ViewerTooltip from './Viewer.Tooltip'\\r\\nimport './Viewer.Tooltip.css'\\r\\n\\r\\nexport default ViewerTooltip\\r\\n\",\"/* eslint-disable */\\r\\n/////////////////////////////////////////////////////////////////\\r\\n//\\r\\n//\\r\\n/////////////////////////////////////////////////////////////////\\r\\nimport EventsEmitter from '../EventsEmitter'\\r\\nimport velocity from 'velocity-animate'\\r\\nimport './ToolPanelBase.css'\\r\\n\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst Autodesk = window.Autodesk;\\r\\nconst $ = window.$;\\r\\n\\r\\nfunction getDefaultOptions () {\\r\\n\\r\\n  return {\\r\\n    shadow: true,\\r\\n    movable: true,\\r\\n    closable: true\\r\\n  }\\r\\n}\\r\\n\\r\\nexport default class ToolPanelBase extends\\r\\n  EventsEmitter.Composer (Autodesk.Viewing.UI.DockingPanel) {\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  static guid(format = 'xxxxxxxxxx') {\\r\\n\\r\\n    var d = new Date().getTime()\\r\\n\\r\\n    var guid = format.replace(\\r\\n      /[xy]/g,\\r\\n      function (c) {\\r\\n        var r = (d + Math.random() * 16) % 16 | 0\\r\\n        d = Math.floor(d / 16)\\r\\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\\r\\n      })\\r\\n\\r\\n    return guid\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  constructor(container, title, options = {}) {\\r\\n\\r\\n    super(container,\\r\\n      ToolPanelBase.guid(),\\r\\n      title,\\r\\n      Object.assign(getDefaultOptions(), options))\\r\\n\\r\\n    this._dialogResult = 'CANCEL'\\r\\n\\r\\n    this._isVisible = false\\r\\n    this._isMinimized = false\\r\\n\\r\\n    this._btnElement = options.buttonElement\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  htmlContent(id) {\\r\\n\\r\\n    return '<div></div>'\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  unload() {\\r\\n\\r\\n    this.setVisible(false)\\r\\n\\r\\n    $(this.container).remove()\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  isVisible() {\\r\\n\\r\\n    return this._isVisible\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // setVisible override\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  setVisible (show = false) {\\r\\n\\r\\n    if (show) {\\r\\n\\r\\n      $(this.container).velocity({\\r\\n        rotateY: [0, -90]\\r\\n      })\\r\\n    }\\r\\n\\r\\n    if (show !== this._isVisible) {\\r\\n\\r\\n      if( typeof this._events !== 'undefined') {\\r\\n\\r\\n        this.emit((show ? 'open' : 'close'), {\\r\\n          result: this._dialogResult\\r\\n        })\\r\\n      }\\r\\n    }\\r\\n\\r\\n    this._isVisible = show\\r\\n\\r\\n    if (this._btnElement) {\\r\\n\\r\\n      if (show) {\\r\\n\\r\\n        this._btnElement.classList.add('active')\\r\\n\\r\\n      } else {\\r\\n\\r\\n        this._btnElement.classList.remove('active')\\r\\n      }\\r\\n    }\\r\\n\\r\\n    super.setVisible(show)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // Toggles panel visibility\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  toggleVisibility () {\\r\\n\\r\\n    this.setVisible(!this._isVisible)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // initialize override\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  initialize() {\\r\\n\\r\\n    this.title = this.createTitleBar(\\r\\n      this.titleLabel || this.container.id)\\r\\n\\r\\n    $(this.container).append(this.title)\\r\\n\\r\\n    this.setTitle(\\r\\n      this.titleLabel || this.container.id,\\r\\n      this.options)\\r\\n\\r\\n    if(this.options.movable) {\\r\\n      this.initializeMoveHandlers(this.title)\\r\\n    }\\r\\n\\r\\n    if(this.options.closable){\\r\\n      this.closer = this.createCloseButton()\\r\\n      $(this.title).append(this.closer)\\r\\n    }\\r\\n\\r\\n    var $content = $(this.htmlContent(\\r\\n      this.container.id))\\r\\n\\r\\n    this.content = $content[0]\\r\\n\\r\\n    $(this.container).append($content)\\r\\n\\r\\n    this.container.classList.add('toolPanelBase')\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // createTitleBar override\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  createTitleBar (title) {\\r\\n\\r\\n    var titleBar = document.createElement(\\\"div\\\")\\r\\n\\r\\n    titleBar.className = \\\"dockingPanelTitle\\\"\\r\\n\\r\\n    this.titleTextId = ToolPanelBase.guid()\\r\\n\\r\\n    this.titleImgId = ToolPanelBase.guid()\\r\\n\\r\\n    var html = `\\r\\n      <span id=\\\"${this.titleImgId}\\\"></span>\\r\\n      <div id=\\\"${this.titleTextId}\\\" class=\\\"dockingPanelTitleText\\\">\\r\\n        ${title}\\r\\n      </div>\\r\\n    `\\r\\n\\r\\n    $(titleBar).append(html)\\r\\n\\r\\n    this.addEventListener(titleBar, 'click', (event)=> {\\r\\n\\r\\n      if (!this.movedSinceLastClick) {\\r\\n\\r\\n        this.onTitleClick(event)\\r\\n      }\\r\\n\\r\\n      this.movedSinceLastClick = false\\r\\n    })\\r\\n\\r\\n    this.addEventListener(titleBar, 'dblclick', (event) => {\\r\\n\\r\\n      this.onTitleDoubleClick(event)\\r\\n    })\\r\\n\\r\\n    return titleBar\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // setTitle override\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  setTitle (text, options) {\\r\\n\\r\\n    if (options && options.localizeTitle) {\\r\\n\\r\\n      $(`#${this.titleTextId}`).attr('data-i18n', text)\\r\\n\\r\\n      text = Autodesk.Viewing.i18n.translate(text)\\r\\n\\r\\n    } else {\\r\\n\\r\\n      $(`#${this.titleTextId}`).removeAttr('data-i18n')\\r\\n    }\\r\\n\\r\\n    $(`#${this.titleTextId}`).text(text)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // onTitleDoubleClick override\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  onTitleDoubleClick(event) {\\r\\n\\r\\n    this._isMinimized = !this._isMinimized\\r\\n\\r\\n    if(this._isMinimized) {\\r\\n\\r\\n      this._height = $(this.container).css('height')\\r\\n\\r\\n      $(this.container).css({\\r\\n        'min-height':'32px',\\r\\n        overflow: 'hidden',\\r\\n        height:'32px'\\r\\n      })\\r\\n\\r\\n    } else {\\r\\n\\r\\n      $(this.container).css({\\r\\n        height:this._height,\\r\\n        'min-height':'100px',\\r\\n        overflow: 'visible'\\r\\n      })\\r\\n    }\\r\\n  }\\r\\n}\\r\\n\",\"import ToolPanelBase from './ToolPanelBase'\\r\\n\\r\\nexport default ToolPanelBase\\r\\n\",\"/* eslint-disable */\\r\\n/////////////////////////////////////////////////////////////\\r\\n// switch button\\r\\n//\\r\\n/////////////////////////////////////////////////////////////\\r\\nimport EventsEmitter from '../EventsEmitter';\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\nimport $ from \\\"jquery\\\";\\r\\n// const $ = window.$;\\r\\n\\r\\nexport default class SwitchButton extends EventsEmitter {\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  constructor(container, checked = true){\\r\\n\\r\\n    super();\\r\\n\\r\\n    var _this = this;\\r\\n\\r\\n    var labelId = guid();\\r\\n\\r\\n    this._inputId = guid();\\r\\n\\r\\n    var html = `\\r\\n        <p class=\\\"onoffswitch\\\">\\r\\n          <input id=\\\"${this._inputId}\\\" type=\\\"checkbox\\\" name=\\\"onoffswitch\\\"\\r\\n            class=\\\"onoffswitch-checkbox\\\" ${checked?\\\"checked\\\":\\\"\\\"}>\\r\\n          <label id=\\\"${labelId}\\\" class=\\\"onoffswitch-label\\\">\\r\\n            <span class=\\\"onoffswitch-inner\\\"></span>\\r\\n            <span class=\\\"onoffswitch-switch\\\"></span>\\r\\n          </label>\\r\\n        </p>\\r\\n      `;\\r\\n\\r\\n    $(container).append(html);\\r\\n\\r\\n    $('#' + labelId).click((e)=>{\\r\\n\\r\\n      var $input = $('#' + this._inputId)[0];\\r\\n\\r\\n      $input.checked = !$input.checked;\\r\\n\\r\\n      _this.emit('checked', $input.checked);\\r\\n    });\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  checked() {\\r\\n\\r\\n    return  $('#' + this._inputId)[0].checked;\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  setChecked(checked) {\\r\\n\\r\\n    $('#' + this._inputId).prop(\\r\\n      'checked', checked);\\r\\n\\r\\n    this.emit('checked', checked);\\r\\n  }\\r\\n}\\r\\n\\r\\nfunction guid() {\\r\\n\\r\\n  var d = new Date().getTime();\\r\\n\\r\\n  var guid = 'xxxx-xxxx-xxxx-xxxx'.replace(\\r\\n    /[xy]/g,\\r\\n    function (c) {\\r\\n      var r = (d + Math.random() * 16) % 16 | 0;\\r\\n      d = Math.floor(d / 16);\\r\\n      return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\\r\\n    });\\r\\n\\r\\n  return guid;\\r\\n}\\r\\n\\r\\n//https://proto.io/freebies/onoff/\\r\\nvar css = `\\r\\n\\r\\n  .onoffswitch {\\r\\n    position: relative; width: 50px;\\r\\n    -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;\\r\\n  }\\r\\n  .onoffswitch-checkbox {\\r\\n    display: none;\\r\\n  }\\r\\n  .onoffswitch-label {\\r\\n    display: block; overflow: hidden; cursor: pointer;\\r\\n    border: 2px solid #999999; border-radius: 8px;\\r\\n  }\\r\\n  .onoffswitch-inner {\\r\\n    display: block; width: 200%; margin-left: -100%;\\r\\n    transition: margin 0.3s ease-in 0s;\\r\\n  }\\r\\n  .onoffswitch-inner:before, .onoffswitch-inner:after {\\r\\n    display: block;\\r\\n    float: left;\\r\\n    width: 50%;\\r\\n    height: 15px;\\r\\n    padding: 0;\\r\\n    line-height: 15px;\\r\\n    font-size: 10px;\\r\\n    color: white;\\r\\n    font-family: Trebuchet, Arial, sans-serif;\\r\\n    font-weight: bold;\\r\\n    box-sizing: border-box;\\r\\n  }\\r\\n  .onoffswitch-inner:before {\\r\\n    content: \\\"ON\\\";\\r\\n    background-color: #0E8200;\\r\\n    color: #FFFFFF;\\r\\n  }\\r\\n  .onoffswitch-inner:after {\\r\\n    content: \\\"OFF\\\";\\r\\n    padding-right: 10px;\\r\\n    background-color: #d9534f;\\r\\n    color: #FFFFFF;\\r\\n    text-align: right;\\r\\n  }\\r\\n  .onoffswitch-switch {\\r\\n    display: block;\\r\\n    width: 12px;\\r\\n    margin: 2px;\\r\\n    background: #FFFFFF;\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    bottom: 0;\\r\\n    right: 31px;\\r\\n    border: 2px solid #999999;\\r\\n    border-radius: 8px;\\r\\n    transition: all 0.3s ease-in 0s;\\r\\n  }\\r\\n  .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {\\r\\n    margin-left: 0;\\r\\n  }\\r\\n  .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch {\\r\\n    right: -1px;\\r\\n  }\\r\\n`;\\r\\n\\r\\n$('<style type=\\\"text/css\\\">' + css + '</style>').appendTo('head');\\r\\n\",\"import SwitchButton from './SwitchButton'\\r\\n\\r\\nexport default SwitchButton\\r\\n\",\"import UIComponent from './UIComponent'\\r\\n\\r\\nexport default UIComponent\\r\\n\",\"/* eslint-disable */\\r\\n/////////////////////////////////////////////////////////////\\r\\n//\\r\\n//\\r\\n/////////////////////////////////////////////////////////////\\r\\nimport EventsEmitter from '../EventsEmitter';\\r\\n\\r\\nexport default class UIComponent extends EventsEmitter {\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  constructor () {\\r\\n\\r\\n    super()\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  showPayload (uri, target = '_blank') {\\r\\n\\r\\n    var link = document.createElement('a')\\r\\n    link.target = target\\r\\n    link.href = uri\\r\\n    link.click()\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  guid (format = 'xxxxxxxxxx') {\\r\\n\\r\\n    var d = new Date().getTime()\\r\\n\\r\\n    var guid = format.replace(\\r\\n      /[xy]/g,\\r\\n      function (c) {\\r\\n        var r = (d + Math.random() * 16) % 16 | 0\\r\\n        d = Math.floor(d / 16)\\r\\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\\r\\n      })\\r\\n\\r\\n    return guid\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  static guid (format = 'xxxxxxxxxx') {\\r\\n\\r\\n    var d = new Date().getTime()\\r\\n\\r\\n    var guid = format.replace(\\r\\n      /[xy]/g,\\r\\n      function (c) {\\r\\n        var r = (d + Math.random() * 16) % 16 | 0\\r\\n        d = Math.floor(d / 16)\\r\\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\\r\\n      })\\r\\n\\r\\n    return guid\\r\\n  }\\r\\n}\",\"/////////////////////////////////////////////////////////////\\r\\n// Create dropwdown menu\\r\\n//\\r\\n/////////////////////////////////////////////////////////////\\r\\n/* eslint-disable */\\r\\n\\r\\nimport UIComponent from '../UIComponent'\\r\\nimport './Dropdown.css'\\r\\n\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst $ = window.$;\\r\\n\\r\\nexport default class Dropdown extends UIComponent {\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // opts = {\\r\\n  //   container: viewer.container,\\r\\n  //   title: 'Material',\\r\\n  //   prompt: 'Select from list',\\r\\n  //   pos: {\\r\\n  //    top: 10,\\r\\n  //    left: 10\\r\\n  //   },\\r\\n  //   selectedItemIdx: 2,\\r\\n  //   menuItems: [\\r\\n  //    {\\r\\n  //      name: item1,\\r\\n  //      handler: function(){}\\r\\n  //    }\\r\\n  //   ]\\r\\n  // }\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  constructor (opts) {\\r\\n\\r\\n    super()\\r\\n\\r\\n    this.dropdownId = guid()\\r\\n\\r\\n    this.buttonId = guid()\\r\\n\\r\\n    this.labelId = guid()\\r\\n\\r\\n    this.listId = guid()\\r\\n\\r\\n    this.opts = opts\\r\\n\\r\\n    this.currentItem = null\\r\\n\\r\\n    this.title = opts.title || 'Select Item: '\\r\\n\\r\\n    var html = `\\r\\n      <div id=\\\"${this.dropdownId}\\\" class=\\\"dropdown lmv-dropdown\\\">\\r\\n      <button id=\\\"${this.buttonId}\\\" class=\\\"btn dropdown-toggle\\\"\\r\\n        type=\\\"button\\\"\\r\\n        data-toggle=\\\"dropdown\\\" disabled>\\r\\n        <div class=\\\"label-container\\\">\\r\\n          <label id=\\\"${this.labelId}\\\" class=\\\"label\\\">${this.title}</label>\\r\\n        </div>\\r\\n        <span class=\\\"caret\\\"></span>\\r\\n      </button>\\r\\n      <ul id=\\\"${this.listId}\\\" class=\\\"dropdown-menu scrollable-menu\\\">\\r\\n      </ul>\\r\\n      </div>\\r\\n    `\\r\\n\\r\\n    $(opts.container).append(html)\\r\\n\\r\\n    $('#' + this.dropdownId).css(opts.pos)\\r\\n\\r\\n    opts.menuItems = opts.menuItems || []\\r\\n\\r\\n    var text = opts.prompt || this.title + ': ' +\\r\\n     opts.menuItems[opts.selectedItemIdx || 0].name\\r\\n\\r\\n    $('#' + this.labelId).text(text)\\r\\n\\r\\n    opts.menuItems.forEach((item)=> {\\r\\n\\r\\n      this.addItem(item)\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  addItem (item, setActive = false) {\\r\\n\\r\\n    $('#' + this.buttonId).prop('disabled', false)\\r\\n\\r\\n    var itemId = item.id || guid()\\r\\n\\r\\n    var itemHtml = `\\r\\n      <li id=\\\"${itemId}\\\">\\r\\n        <a href=\\\"\\\">${item.name}</a>\\r\\n      </li>`\\r\\n\\r\\n    $('#' + this.listId).append(itemHtml)\\r\\n\\r\\n    var onClick = (event)=> {\\r\\n\\r\\n      if(event){\\r\\n\\r\\n        event.preventDefault()\\r\\n      }\\r\\n\\r\\n      this.currentItem = item\\r\\n\\r\\n      var eventResult = this.emit(\\r\\n        'item.selected',\\r\\n        item)\\r\\n\\r\\n      if(item.handler) {\\r\\n\\r\\n        item.handler()\\r\\n      }\\r\\n\\r\\n      $('#' + this.labelId).text(\\r\\n        this.title + ': ' + item.name)\\r\\n    }\\r\\n\\r\\n    $('#' + itemId).click((e)=>{\\r\\n      onClick(e)\\r\\n    })\\r\\n\\r\\n    if(setActive){\\r\\n      onClick()\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  setCurrentItem (item) {\\r\\n\\r\\n    this.currentItem = item\\r\\n\\r\\n    $('#' + this.labelId).text(\\r\\n      this.title + ': ' + item.name)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  setItems (items, selectedItemIdx = 0) {\\r\\n\\r\\n    $(`#${this.listId} li`).remove()\\r\\n\\r\\n    if (selectedItemIdx < 0) {\\r\\n\\r\\n      $('#' + this.labelId).text(this.opts.prompt)\\r\\n\\r\\n    }  else {\\r\\n\\r\\n      var text = this.title + ': ' +\\r\\n        items[selectedItemIdx].name\\r\\n\\r\\n      $('#' + this.labelId).text(text)\\r\\n    }\\r\\n\\r\\n    items.forEach((item) => {\\r\\n\\r\\n      this.addItem(item)\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  removeCurrentItem () {\\r\\n\\r\\n    if(this.currentItem){\\r\\n\\r\\n      $('#' + this.currentItem.id).remove()\\r\\n\\r\\n      if($('#' + this.listId + ' > li').length === 0){\\r\\n\\r\\n        $('#' + this.buttonId).prop('disabled', true)\\r\\n      }\\r\\n\\r\\n      this.currentItem = null\\r\\n    }\\r\\n\\r\\n    $('#' + this.labelId).text(this.title)\\r\\n\\r\\n    this.emit('item.selected', null)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  removeItem (item) {\\r\\n\\r\\n    if(this.currentItem && this.currentItem.id === item.id) {\\r\\n\\r\\n      $('#' + this.labelId).text(this.title)\\r\\n\\r\\n      this.currentItem = null\\r\\n    }\\r\\n\\r\\n    $('#' + item.id).remove()\\r\\n\\r\\n    if($('#' + this.listId + ' > li').length === 0){\\r\\n\\r\\n      $('#' + this.buttonId).prop('disabled', true)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  setVisible (show) {\\r\\n\\r\\n    $('#' + this.dropdownId).css({\\r\\n      display: show ? 'block' : 'none'\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  setPosition (pos) {\\r\\n\\r\\n    $('#' + this.dropdownId).css(opts.pos)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  open() {\\r\\n\\r\\n    $('#' + this.dropdownId).addClass('open')\\r\\n    $('#' + this.dropdownId).trigger('click.bs.dropdown')\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  clear() {\\r\\n\\r\\n    $('#' + this.buttonId).prop('disabled', true)\\r\\n\\r\\n    $(`#${this.listId} li`).remove()\\r\\n\\r\\n    this.currentItem = null\\r\\n  }\\r\\n}\\r\\n\\r\\n/////////////////////////////////////////////////////////////\\r\\n//\\r\\n//\\r\\n/////////////////////////////////////////////////////////////\\r\\nfunction guid(format='xxxxxxxx') {\\r\\n\\r\\n  var d = new Date().getTime()\\r\\n\\r\\n  var guid = format.replace(\\r\\n    /[xy]/g,\\r\\n    function (c) {\\r\\n      var r = (d + Math.random() * 16) % 16 | 0\\r\\n      d = Math.floor(d / 16)\\r\\n      return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\\r\\n    })\\r\\n\\r\\n  return guid\\r\\n}\\r\\n\",\"import Dropdown from './Dropdown'\\r\\n\\r\\nexport default Dropdown\\r\\n\",\"/////////////////////////////////////////////////////////////////////\\r\\n//\\r\\n//\\r\\n//\\r\\n/////////////////////////////////////////////////////////////////////\\r\\n/* eslint-disable */\\r\\nimport TranslateTool from './Viewing.Tool.Translate'\\r\\nimport './Viewing.Extension.ModelTransformer.css'\\r\\nimport RotateTool from './Viewing.Tool.Rotate'\\r\\nimport ViewerTooltip from '../components/Viewer.Tooltip'\\r\\nimport ToolPanelBase from '../components/ToolPanelBase'\\r\\nimport SwitchButton from '../components/SwitchButton'\\r\\nimport Dropdown from '../components/Dropdown'\\r\\nconst Autodesk = window.Autodesk;\\r\\nconst THREE = window.THREE;\\r\\nconst $ = window.$;\\r\\n\\r\\n\\r\\nexport default class ModelTransformerPanel extends ToolPanelBase {\\r\\n\\r\\n  constructor(viewer, btnElement) {\\r\\n\\r\\n    super(viewer.container, 'Transform Models', {\\r\\n      buttonElement: btnElement,\\r\\n      closable: true,\\r\\n      movable: true,\\r\\n      shadow: true\\r\\n    })\\r\\n\\r\\n    $(this.container).addClass('model-transformer')\\r\\n\\r\\n    this.dropdown = new Dropdown({\\r\\n      container: '#' + this.dropdownContainerId,\\r\\n      title: 'Select Model',\\r\\n      prompt: 'Select Model ...',\\r\\n      pos: {\\r\\n        top: 0, left: 0\\r\\n      }\\r\\n    })\\r\\n\\r\\n    this.dropdown.on('item.selected', (model) => {\\r\\n\\r\\n      this.currentModel = model\\r\\n\\r\\n      if (model) {\\r\\n\\r\\n        this.setTransform(model.transform)\\r\\n\\r\\n        this.emit('model.selected', {\\r\\n          fitToView: true,\\r\\n          model\\r\\n        })\\r\\n      }\\r\\n    })\\r\\n\\r\\n    var applyTransform = (model, fitToView = false) => {\\r\\n      console.log(model);\\r\\n      this.txTool.clearSelection()\\r\\n      this.rxTool.clearSelection()\\r\\n\\r\\n      if (model) {\\r\\n\\r\\n        this.emit('model.transform', {\\r\\n\\r\\n          model: model,\\r\\n\\r\\n          fitToView,\\r\\n\\r\\n          transform: {\\r\\n            translation: this.getTranslation(),\\r\\n            rotation: this.getRotation(),\\r\\n            scale: this.getScale()\\r\\n          }\\r\\n        })\\r\\n      }\\r\\n    };\\r\\n    // Adding this but needs improvement since Panel should be completely separate\\r\\n    // from the use of the Model Transformation of the model.\\r\\n    this.applyTransform = applyTransform;\\r\\n\\r\\n    this.fullTransformSwitch = new SwitchButton(\\r\\n      `#${this.container.id}-full-transform-switch`)\\r\\n\\r\\n    this.fullTransform = true\\r\\n\\r\\n    this.fullTransformSwitch.on('checked', (checked) => {\\r\\n\\r\\n      this.txTool.fullTransform = checked\\r\\n      this.rxTool.fullTransform = checked\\r\\n      this.fullTransform = checked\\r\\n\\r\\n      this.txTool.clearSelection()\\r\\n      this.rxTool.clearSelection()\\r\\n    })\\r\\n\\r\\n    $(`#${this.container.id}-unload-btn`).click(() => {\\r\\n\\r\\n      this.txTool.clearSelection()\\r\\n\\r\\n      if (this.currentModel) {\\r\\n\\r\\n        this.emit('model.delete', {\\r\\n\\r\\n          model: this.currentModel\\r\\n        })\\r\\n\\r\\n        this.dropdown.removeCurrentItem()\\r\\n      }\\r\\n    })\\r\\n\\r\\n    this.viewer = viewer\\r\\n\\r\\n    this.txTool = new TranslateTool(viewer)\\r\\n    this.rxTool = new RotateTool(viewer)\\r\\n\\r\\n    this.txTool.fullTransform = true\\r\\n    this.rxTool.fullTransform = true\\r\\n\\r\\n    this.viewer.toolController.registerTool(this.txTool)\\r\\n    this.viewer.toolController.registerTool(this.rxTool)\\r\\n\\r\\n    this.txTool.on('transform.translate', (data) => {\\r\\n\\r\\n      data.model.transform.translation = data.translation\\r\\n\\r\\n      this.setTranslation(\\r\\n        data.model.transform.translation)\\r\\n    })\\r\\n\\r\\n    this.rxTool.on('transform.rotate', (data) => {\\r\\n\\r\\n      data.model.transform.rotation = data.rotation\\r\\n\\r\\n      this.setRotation({\\r\\n        x: (data.rotation.x * 180 / Math.PI) % 360,\\r\\n        y: (data.rotation.y * 180 / Math.PI) % 360,\\r\\n        z: (data.rotation.z * 180 / Math.PI) % 360\\r\\n      })\\r\\n    })\\r\\n\\r\\n    var onModelSelected = (selection) => {\\r\\n\\r\\n      $('#' + this.transPickBtnId).prop(\\r\\n        'disabled', !this.txTool.active)\\r\\n\\r\\n      this.dropdown.setCurrentItem(selection.model)\\r\\n\\r\\n      this.setTransform(selection.model.transform)\\r\\n\\r\\n      this.currentModel = selection.model\\r\\n\\r\\n      this.emit('model.selected', {\\r\\n        model: selection.model,\\r\\n        fitToView: false\\r\\n      })\\r\\n\\r\\n      this.tooltip.deactivate()\\r\\n    }\\r\\n\\r\\n    this.txTool.on('transform.modelSelected',\\r\\n      onModelSelected)\\r\\n\\r\\n    this.txTool.on('transform.clearSelection', () => {\\r\\n\\r\\n      $('#' + this.transPickBtnId).prop(\\r\\n        'disabled', true)\\r\\n\\r\\n      this.tooltip.deactivate()\\r\\n    })\\r\\n\\r\\n    this.rxTool.on('transform.modelSelected',\\r\\n      onModelSelected)\\r\\n\\r\\n    this.on('open', () => {\\r\\n\\r\\n      this.viewer.toolController.activateTool(\\r\\n        this.txTool.getName())\\r\\n    })\\r\\n\\r\\n    this.on('close', () => {\\r\\n\\r\\n      this.viewer.toolController.deactivateTool(\\r\\n        this.txTool.getName())\\r\\n\\r\\n      this.viewer.toolController.deactivateTool(\\r\\n        this.rxTool.getName())\\r\\n\\r\\n      $('#' + this.transPickBtnId).prop(\\r\\n        'disabled', true)\\r\\n    })\\r\\n\\r\\n    $('.model-transformer .trans, ' +\\r\\n      '.model-transformer .rot').on(\\r\\n      'change keyup input paste', ()=>{\\r\\n\\r\\n        applyTransform(this.currentModel)\\r\\n    })\\r\\n\\r\\n    $('.model-transformer .trans').on(\\r\\n      'focus', () => {\\r\\n\\r\\n        this.viewer.toolController.deactivateTool(\\r\\n          this.rxTool.getName())\\r\\n\\r\\n        this.viewer.toolController.activateTool(\\r\\n          this.txTool.getName())\\r\\n    })\\r\\n\\r\\n    $('.model-transformer .rot').on(\\r\\n      'focus', () => {\\r\\n\\r\\n        this.viewer.toolController.deactivateTool(\\r\\n          this.txTool.getName())\\r\\n\\r\\n        this.viewer.toolController.activateTool(\\r\\n          this.rxTool.getName())\\r\\n    })\\r\\n\\r\\n    $(`#${this.container.id}-Sx`).on('change keyup', () => {\\r\\n\\r\\n      var scale = $(`#${this.container.id}-Sx`).val()\\r\\n\\r\\n      $(`#${this.container.id}-Sy`).val(scale)\\r\\n      $(`#${this.container.id}-Sz`).val(scale)\\r\\n\\r\\n      applyTransform(this.currentModel, true)\\r\\n    })\\r\\n\\r\\n    $('#' + this.transPickBtnId).click(() => {\\r\\n\\r\\n      this.txTool.onPick()\\r\\n\\r\\n      this.tooltip.activate()\\r\\n    })\\r\\n\\r\\n    this.tooltip = new ViewerTooltip(viewer)\\r\\n\\r\\n    this.tooltip.setContent(`\\r\\n      <div id=\\\"pickTooltipId\\\" class=\\\"pick-tooltip\\\">\\r\\n        <b>Pick position ...</b>\\r\\n      </div>`, '#pickTooltipId')\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  htmlContent(id) {\\r\\n\\r\\n    this.dropdownContainerId = ToolPanelBase.guid()\\r\\n\\r\\n    this.transPickBtnId = ToolPanelBase.guid()\\r\\n\\r\\n    return `\\r\\n\\r\\n      <div class=\\\"container\\\">\\r\\n\\r\\n         <div id=\\\"${this.dropdownContainerId}\\\">\\r\\n        </div>\\r\\n\\r\\n        <hr class=\\\"v-spacer\\\">\\r\\n\\r\\n        <span class=\\\"text-span\\\">\\r\\n            Snap:\\r\\n          </span>\\r\\n\\r\\n          <hr class=\\\"v-spacer\\\">\\r\\n\\r\\n        <button id=\\\"${this.transPickBtnId}\\\"\\r\\n            class=\\\"btn btn-trans-pick\\\" disabled>\\r\\n            <span class=\\\"glyphicon glyphicon-screenshot btn-span\\\">\\r\\n            </span>\\r\\n          </button>\\r\\n\\r\\n        <hr class=\\\"v-spacer\\\">\\r\\n\\r\\n        <div>\\r\\n\\r\\n          <span class=\\\"text-span\\\">\\r\\n            Translation:\\r\\n          </span>\\r\\n\\r\\n          <hr class=\\\"v-spacer\\\">\\r\\n\\r\\n          \\r\\n\\r\\n          <input id=\\\"${id}-Tx\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric trans\\\"\\r\\n            placeholder=\\\"  x (0.0)\\\">\\r\\n\\r\\n          <input id=\\\"${id}-Ty\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric trans\\\"\\r\\n            placeholder=\\\"  y (0.0)\\\">\\r\\n\\r\\n          <input id=\\\"${id}-Tz\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric trans\\\"\\r\\n            placeholder=\\\"  z (0.0)\\\">\\r\\n\\r\\n          <hr class=\\\"v-spacer\\\">\\r\\n\\r\\n          <span class=\\\"text-span\\\">\\r\\n            Rotation (deg):\\r\\n          </span>\\r\\n\\r\\n          <hr class=\\\"v-spacer\\\">\\r\\n\\r\\n          <input id=\\\"${id}-Rx\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric rot\\\"\\r\\n            placeholder=\\\"  x (0.0)\\\">\\r\\n\\r\\n          <input id=\\\"${id}-Ry\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric rot\\\"\\r\\n            placeholder=\\\"  y (0.0)\\\">\\r\\n\\r\\n          <input id=\\\"${id}-Rz\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric rot\\\"\\r\\n            placeholder=\\\"  z (0.0)\\\">\\r\\n\\r\\n          <span class=\\\"text-span\\\">\\r\\n            Scale:\\r\\n          </span>\\r\\n\\r\\n          <hr class=\\\"v-spacer\\\">\\r\\n\\r\\n          <input id=\\\"${id}-Sx\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric scale\\\"\\r\\n            placeholder=\\\"  x (1.0)\\\">\\r\\n\\r\\n          <input id=\\\"${id}-Sy\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric scale\\\"\\r\\n            placeholder=\\\"  y (1.0)\\\">\\r\\n\\r\\n          <input id=\\\"${id}-Sz\\\" type=\\\"text\\\"\\r\\n            class=\\\"input numeric scale\\\"\\r\\n            placeholder=\\\"  z (1.0)\\\">\\r\\n\\r\\n          <hr class=\\\"v-spacer-large\\\">\\r\\n\\r\\n        </div>\\r\\n\\r\\n        <div style=\\\"margin-top:8px\\\">\\r\\n\\r\\n          <div style=\\\"color:white;\\\">\\r\\n          Full Model Transform\\r\\n            <div id=\\\"${id}-full-transform-switch\\\"\\r\\n              style=\\\"float:left; margin-right:8px;\\\">\\r\\n            </div>\\r\\n          </div>\\r\\n\\r\\n          <hr class=\\\"v-spacer-large\\\">\\r\\n\\r\\n          <button class=\\\"btn btn-danger\\\" id=\\\"${id}-unload-btn\\\">\\r\\n            <span class=\\\"glyphicon glyphicon-save-file btn-span\\\">\\r\\n            </span>\\r\\n             Unload Model\\r\\n          </button>\\r\\n        </div>\\r\\n\\r\\n      </div>`\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  setTransform (transform) {\\r\\n\\r\\n    $(`#${this.container.id}-Tx`).val(transform.translation.x.toFixed(2))\\r\\n    $(`#${this.container.id}-Ty`).val(transform.translation.y.toFixed(2))\\r\\n    $(`#${this.container.id}-Tz`).val(transform.translation.z.toFixed(2))\\r\\n\\r\\n    $(`#${this.container.id}-Rx`).val(transform.rotation.x.toFixed(2))\\r\\n    $(`#${this.container.id}-Ry`).val(transform.rotation.y.toFixed(2))\\r\\n    $(`#${this.container.id}-Rz`).val(transform.rotation.z.toFixed(2))\\r\\n\\r\\n    $(`#${this.container.id}-Sx`).val(transform.scale.x)\\r\\n    $(`#${this.container.id}-Sy`).val(transform.scale.y)\\r\\n    $(`#${this.container.id}-Sz`).val(transform.scale.z)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // Gets input transform\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  getScale () {\\r\\n\\r\\n    var x = parseFloat($(`#${this.container.id}-Sx`).val())\\r\\n    var y = parseFloat($(`#${this.container.id}-Sy`).val())\\r\\n    var z = parseFloat($(`#${this.container.id}-Sz`).val())\\r\\n\\r\\n    x = isNaN(x) ? 1.0 : x\\r\\n    y = isNaN(y) ? 1.0 : y\\r\\n    z = isNaN(z) ? 1.0 : z\\r\\n\\r\\n    return new THREE.Vector3(x, y, z)\\r\\n  }\\r\\n\\r\\n  getTranslation () {\\r\\n\\r\\n    var x = parseFloat($(`#${this.container.id}-Tx`).val())\\r\\n    var y = parseFloat($(`#${this.container.id}-Ty`).val())\\r\\n    var z = parseFloat($(`#${this.container.id}-Tz`).val())\\r\\n\\r\\n    x = isNaN(x) ? 0.0 : x\\r\\n    y = isNaN(y) ? 0.0 : y\\r\\n    z = isNaN(z) ? 0.0 : z\\r\\n\\r\\n    return new THREE.Vector3(x, y, z)\\r\\n  }\\r\\n\\r\\n  getRotation () {\\r\\n\\r\\n    var x = parseFloat($(`#${this.container.id}-Rx`).val())\\r\\n    var y = parseFloat($(`#${this.container.id}-Ry`).val())\\r\\n    var z = parseFloat($(`#${this.container.id}-Rz`).val())\\r\\n\\r\\n    x = isNaN(x) ? 0.0 : x\\r\\n    y = isNaN(y) ? 0.0 : y\\r\\n    z = isNaN(z) ? 0.0 : z\\r\\n\\r\\n    return new THREE.Vector3(x, y, z)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  setScale (scale) {\\r\\n\\r\\n    $(`#${this.container.id}-Sx`).val(scale.x.toFixed(2))\\r\\n    $(`#${this.container.id}-Sy`).val(scale.y.toFixed(2))\\r\\n    $(`#${this.container.id}-Sz`).val(scale.z.toFixed(2))\\r\\n  }\\r\\n  \\r\\n  setTranslation (translation) {\\r\\n\\r\\n    $(`#${this.container.id}-Tx`).val(translation.x.toFixed(2))\\r\\n    $(`#${this.container.id}-Ty`).val(translation.y.toFixed(2))\\r\\n    $(`#${this.container.id}-Tz`).val(translation.z.toFixed(2))\\r\\n  }\\r\\n\\r\\n  setRotation (rotation) {\\r\\n\\r\\n    $(`#${this.container.id}-Rx`).val(rotation.x.toFixed(2))\\r\\n    $(`#${this.container.id}-Ry`).val(rotation.y.toFixed(2))\\r\\n    $(`#${this.container.id}-Rz`).val(rotation.z.toFixed(2))\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  clearSelection () {\\r\\n\\r\\n    this.txTool.clearSelection()\\r\\n    this.rxTool.clearSelection()\\r\\n  }\\r\\n}\",\"import ViewerExtensionBase from './Viewer.ExtensionBase'\\r\\n\\r\\nexport default ViewerExtensionBase\\r\\n\",\"/* eslint-disable */\\r\\n///////////////////////////////////////////////////////////////////////////////\\r\\n//\\r\\n//\\r\\n//\\r\\n///////////////////////////////////////////////////////////////////////////////\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst Autodesk = window.Autodesk;\\r\\n\\r\\nexport default class ExtensionBase extends Autodesk.Viewing.Extension {\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Class constructor\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  constructor(viewer, options = {}) {\\r\\n\\r\\n    super(viewer, options)\\r\\n\\r\\n    this._viewer = viewer\\r\\n\\r\\n    this._options = options\\r\\n\\r\\n    this._events = {}\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Extension Id\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static get ExtensionId() {\\r\\n\\r\\n    return 'Viewing.Extension.Base'\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  static guid(format = 'xxxxxxxxxx') {\\r\\n\\r\\n    var d = new Date().getTime()\\r\\n\\r\\n    var guid = format.replace(\\r\\n      /[xy]/g,\\r\\n      function (c) {\\r\\n        var r = (d + Math.random() * 16) % 16 | 0\\r\\n        d = Math.floor(d / 16)\\r\\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16)\\r\\n      })\\r\\n\\r\\n    return guid\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Load callback\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  load() {\\r\\n\\r\\n    return true\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Unload callback\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  unload() {\\r\\n\\r\\n    return true\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  on(event, fct) {\\r\\n\\r\\n    this._events[event] = this._events[event]\\t|| []\\r\\n    this._events[event].push(fct)\\r\\n    return fct\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  off(event, fct) {\\r\\n\\r\\n    if(event in this._events === false)\\r\\n      return\\r\\n\\r\\n    this._events[event].splice(\\r\\n      this._events[event].indexOf(fct), 1)\\r\\n  }\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  emit(event /* , args... */) {\\r\\n\\r\\n    if(this._events[event] === undefined)\\r\\n      return\\r\\n\\r\\n    var tmpArray = this._events[event].slice()\\r\\n\\r\\n    for(var i = 0; i < tmpArray.length; ++i) {\\r\\n      var result = tmpArray[i].apply(this,\\r\\n        Array.prototype.slice.call(arguments, 1))\\r\\n\\r\\n      if(result !== undefined )\\r\\n        return result\\r\\n    }\\r\\n\\r\\n    return undefined\\r\\n  }\\r\\n}\\r\\n\\r\\n\",\"/* eslint-disable */\\r\\n\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst Autodesk = window.Autodesk;\\r\\nconst THREE = window.THREE;\\r\\n\\r\\nexport default class ViewerToolkit {\\r\\n\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  ///////////////////////////////////////////////////////////////////\\r\\n  static guid(format = 'xxxxxxxxxxxx') {\\r\\n\\r\\n    var d = new Date().getTime();\\r\\n\\r\\n    var guid = format.replace(\\r\\n      /[xy]/g,\\r\\n      function (c) {\\r\\n        var r = (d + Math.random() * 16) % 16 | 0;\\r\\n        d = Math.floor(d / 16);\\r\\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\\r\\n      });\\r\\n\\r\\n    return guid;\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////\\r\\n  //mobile detection\\r\\n  //\\r\\n  /////////////////////////////////////////////\\r\\n  static get mobile() {\\r\\n\\r\\n    return {\\r\\n\\r\\n      getUserAgent: function () {\\r\\n        return navigator.userAgent;\\r\\n      },\\r\\n      isAndroid: function () {\\r\\n        return this.getUserAgent().match(/Android/i);\\r\\n      },\\r\\n      isBlackBerry: function () {\\r\\n        return this.getUserAgent().match(/BlackBerry/i);\\r\\n      },\\r\\n      isIOS: function () {\\r\\n        return this.getUserAgent().match(/iPhone|iPad|iPod/i);\\r\\n      },\\r\\n      isOpera: function () {\\r\\n        return this.getUserAgent().match(/Opera Mini/i);\\r\\n      },\\r\\n      isWindows: function () {\\r\\n        return this.isWindowsDesktop() || this.isWindowsMobile();\\r\\n      },\\r\\n      isWindowsMobile: function () {\\r\\n        return this.getUserAgent().match(/IEMobile/i);\\r\\n      },\\r\\n      isWindowsDesktop: function () {\\r\\n        return this.getUserAgent().match(/WPDesktop/i);\\r\\n      },\\r\\n      isAny: function () {\\r\\n\\r\\n        return this.isAndroid() ||\\r\\n          this.isBlackBerry() ||\\r\\n          this.isIOS() ||\\r\\n          this.isWindowsMobile();\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  // Return default viewable path: first 3d or 2d item\\r\\n  //\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  static getDefaultViewablePath (doc, roles = ['3d', '2d']) {\\r\\n\\r\\n    var rootItem = doc.getRootItem()\\r\\n\\r\\n    let roleArray = [...roles]\\r\\n\\r\\n    let items = []\\r\\n\\r\\n    roleArray.forEach((role) => {\\r\\n\\r\\n      items = [ ...items,\\r\\n        ...Autodesk.Viewing.Document.getSubItemsWithProperties(\\r\\n          rootItem, { type: 'geometry', role }, true) ]\\r\\n    })\\r\\n\\r\\n    return items.length ? doc.getViewablePath(items[0]) : null\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Toolbar button\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static createButton(id, className, tooltip, handler) {\\r\\n\\r\\n    var button = new Autodesk.Viewing.UI.Button(id);\\r\\n\\r\\n    button.icon.style.fontSize = '24px';\\r\\n\\r\\n    button.icon.className = className;\\r\\n\\r\\n    button.setToolTip(tooltip);\\r\\n\\r\\n    button.onClick = handler;\\r\\n\\r\\n    return button;\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Control group\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static createControlGroup(viewer, ctrlGroupName) {\\r\\n\\r\\n    var viewerToolbar = viewer.getToolbar(true);\\r\\n\\r\\n    if(viewerToolbar){\\r\\n\\r\\n      var ctrlGroup =  new Autodesk.Viewing.UI.ControlGroup(\\r\\n        ctrlGroupName);\\r\\n\\r\\n      viewerToolbar.addControl(ctrlGroup);\\r\\n\\r\\n      return ctrlGroup;\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static getLeafNodes (model, dbIds) {\\r\\n\\r\\n    return new Promise((resolve, reject)=>{\\r\\n\\r\\n      try {\\r\\n\\r\\n        const instanceTree = model.getData().instanceTree\\r\\n\\r\\n        dbIds = dbIds || instanceTree.getRootId()\\r\\n\\r\\n        const dbIdArray = Array.isArray(dbIds) ? dbIds : [dbIds]\\r\\n\\r\\n        let leafIds = []\\r\\n\\r\\n        const getLeafNodesRec = (id) => {\\r\\n\\r\\n          var childCount = 0;\\r\\n\\r\\n          instanceTree.enumNodeChildren(id, (childId) => {\\r\\n\\r\\n              getLeafNodesRec(childId)\\r\\n\\r\\n              ++childCount\\r\\n            })\\r\\n\\r\\n          if (childCount == 0) {\\r\\n\\r\\n            leafIds.push(id)\\r\\n          }\\r\\n        }\\r\\n\\r\\n        for (var i = 0; i < dbIdArray.length; ++i) {\\r\\n\\r\\n          getLeafNodesRec(dbIdArray[i])\\r\\n        }\\r\\n\\r\\n        return resolve(leafIds)\\r\\n\\r\\n      } catch(ex){\\r\\n\\r\\n        return reject(ex)\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // get node fragIds\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static getFragIds (model, dbIds) {\\r\\n\\r\\n    return new Promise(async(resolve, reject) => {\\r\\n\\r\\n      try{\\r\\n\\r\\n        const dbIdArray = Array.isArray(dbIds) ? dbIds : [dbIds]\\r\\n\\r\\n        const instanceTree = model.getData().instanceTree\\r\\n\\r\\n        const leafIds = await ViewerToolkit.getLeafNodes(\\r\\n          model, dbIdArray)\\r\\n\\r\\n        let fragIds = []\\r\\n\\r\\n        for(var i=0; i< leafIds.length; ++i) {\\r\\n\\r\\n          instanceTree.enumNodeFragments(\\r\\n            leafIds[i], (fragId) => {\\r\\n              fragIds.push(fragId)\\r\\n            })\\r\\n        }\\r\\n\\r\\n        return resolve(fragIds)\\r\\n\\r\\n      } catch(ex){\\r\\n\\r\\n        return reject(ex)\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Node bounding box\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static getWorldBoundingBox(model, dbId) {\\r\\n\\r\\n    return new Promise(async(resolve, reject)=>{\\r\\n\\r\\n      try{\\r\\n\\r\\n        var fragIds = await ViewerToolkit.getFragIds(\\r\\n          model, dbId);\\r\\n\\r\\n        if(!fragIds.length){\\r\\n\\r\\n          return reject('No geometry, invalid dbId?');\\r\\n        }\\r\\n\\r\\n        var fragList = model.getFragmentList();\\r\\n\\r\\n        var fragbBox = new THREE.Box3();\\r\\n        var nodebBox = new THREE.Box3();\\r\\n\\r\\n        fragIds.forEach(function(fragId) {\\r\\n\\r\\n          fragList.getWorldBounds(fragId, fragbBox);\\r\\n          nodebBox.union(fragbBox);\\r\\n        });\\r\\n\\r\\n        return resolve(nodebBox);\\r\\n      }\\r\\n      catch(ex){\\r\\n\\r\\n        return reject(ex);\\r\\n      }\\r\\n    });\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Gets properties from component\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static getProperties(model, dbId, requestedProps = null) {\\r\\n\\r\\n    return new Promise((resolve, reject) => {\\r\\n\\r\\n      try {\\r\\n\\r\\n        if (requestedProps) {\\r\\n\\r\\n          const propTasks = requestedProps.map((displayName) => {\\r\\n\\r\\n            return ViewerToolkit.getProperty(\\r\\n              model, dbId, displayName, 'Not Available')\\r\\n          })\\r\\n\\r\\n          Promise.all(propTasks).then((properties) => {\\r\\n\\r\\n            resolve(properties)\\r\\n          })\\r\\n\\r\\n        } else {\\r\\n\\r\\n          model.getProperties(dbId, function(result) {\\r\\n\\r\\n            if (result.properties) {\\r\\n\\r\\n              return resolve(\\r\\n                result.properties)\\r\\n            }\\r\\n\\r\\n            return reject('No Properties')\\r\\n          })\\r\\n        }\\r\\n\\r\\n      } catch (ex) {\\r\\n\\r\\n          console.log(ex)\\r\\n          return reject(ex)\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static getProperty(model, dbId, displayName, defaultValue) {\\r\\n\\r\\n    return new Promise((resolve, reject) => {\\r\\n\\r\\n      try{\\r\\n\\r\\n        model.getProperties(dbId, (result) => {\\r\\n\\r\\n          if (result.properties) {\\r\\n\\r\\n            result.properties.forEach((prop) => {\\r\\n\\r\\n              prop.dbId = dbId\\r\\n\\r\\n              if (typeof displayName === 'function') {\\r\\n\\r\\n                if (displayName(prop.displayName)){\\r\\n\\r\\n                  resolve(prop)\\r\\n                }\\r\\n\\r\\n              } else if (displayName === prop.displayName) {\\r\\n\\r\\n                resolve(prop)\\r\\n              }\\r\\n            })\\r\\n\\r\\n            if (defaultValue) {\\r\\n\\r\\n              return resolve({\\r\\n                displayValue: defaultValue,\\r\\n                displayName,\\r\\n                dbId\\r\\n              })\\r\\n            }\\r\\n\\r\\n            reject(new Error('Not Found'))\\r\\n\\r\\n          } else {\\r\\n\\r\\n            reject(new Error('Error getting properties'));\\r\\n          }\\r\\n        })\\r\\n\\r\\n      } catch(ex){\\r\\n\\r\\n        return reject(ex)\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Gets all existing properties from component  dbIds\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static getPropertyList (model, dbIds) {\\r\\n\\r\\n    return new Promise(async(resolve, reject) => {\\r\\n\\r\\n      try{\\r\\n\\r\\n        var propertyTasks = dbIds.map((dbId) => {\\r\\n\\r\\n          return ViewerToolkit.getProperties(model, dbId)\\r\\n        })\\r\\n\\r\\n        var propertyResults = await Promise.all(\\r\\n          propertyTasks)\\r\\n\\r\\n        var properties = []\\r\\n\\r\\n        propertyResults.forEach((propertyResult)=>{\\r\\n\\r\\n          propertyResult.forEach((prop)=>{\\r\\n\\r\\n            if(properties.indexOf(prop.displayName) < 0){\\r\\n\\r\\n              properties.push(prop.displayName)\\r\\n            }\\r\\n          })\\r\\n        })\\r\\n\\r\\n        return resolve(properties.sort())\\r\\n\\r\\n      } catch(ex){\\r\\n\\r\\n        return reject(ex)\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static getBulkPropertiesAsync (model, dbIds, propFilter) {\\r\\n\\r\\n    return new Promise(async(resolve, reject) => {\\r\\n\\r\\n      if (typeof propFilter === 'function') {\\r\\n\\r\\n        const propTasks = dbIds.map((dbId) => {\\r\\n\\r\\n          return this.getProperty(\\r\\n            model, dbId, propFilter, 'Not Found')\\r\\n        })\\r\\n\\r\\n        const propRes = await Promise.all(propTasks)\\r\\n\\r\\n        const filteredRes = propRes.filter((res) => {\\r\\n\\r\\n          return res.displayValue !== 'Not Found'\\r\\n        })\\r\\n\\r\\n        resolve(filteredRes.map((res) => {\\r\\n\\r\\n          return {\\r\\n            properties: [res],\\r\\n            dbId: res.dbId\\r\\n          }\\r\\n        }))\\r\\n\\r\\n      } else {\\r\\n\\r\\n        model.getBulkProperties(dbIds, propFilter, (result) => {\\r\\n\\r\\n          resolve (result)\\r\\n\\r\\n        }, (error) => {\\r\\n\\r\\n          reject(error)\\r\\n        })\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Maps components by property\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static mapComponentsByProp (model, propFilter, components, defaultProp) {\\r\\n\\r\\n    return new Promise(async (resolve, reject) => {\\r\\n\\r\\n      try {\\r\\n\\r\\n        const results = await ViewerToolkit.getBulkPropertiesAsync(\\r\\n          model, components, propFilter)\\r\\n\\r\\n        const propertyResults = results.map((result) => {\\r\\n\\r\\n          return Object.assign({}, result.properties[0], {\\r\\n            dbId: result.dbId\\r\\n          })\\r\\n        })\\r\\n\\r\\n        var componentsMap = {};\\r\\n\\r\\n        propertyResults.forEach((result) => {\\r\\n\\r\\n          var value = result.displayValue;\\r\\n\\r\\n          if (typeof value == 'string') {\\r\\n\\r\\n            value = value.split(':')[0]\\r\\n          }\\r\\n\\r\\n          if (!componentsMap[value]) {\\r\\n\\r\\n            componentsMap[value] = []\\r\\n          }\\r\\n\\r\\n          componentsMap[value].push(result.dbId)\\r\\n        })\\r\\n\\r\\n        return resolve(componentsMap)\\r\\n\\r\\n      } catch(ex){\\r\\n\\r\\n        return reject(ex);\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  // Runs recursively the argument task on each node\\r\\n  // of the data tree\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////\\r\\n  static runTaskOnDataTree(root, taskFunc) {\\r\\n\\r\\n    var tasks = [];\\r\\n\\r\\n    var runTaskOnDataTreeRec = (node, parent=null)=> {\\r\\n\\r\\n      if (node.children) {\\r\\n\\r\\n        node.children.forEach((childNode)=> {\\r\\n\\r\\n          runTaskOnDataTreeRec(childNode, node);\\r\\n        });\\r\\n      }\\r\\n\\r\\n      var task = taskFunc(node, parent);\\r\\n\\r\\n      tasks.push(task);\\r\\n    }\\r\\n\\r\\n    runTaskOnDataTreeRec(root);\\r\\n\\r\\n    return Promise.all(tasks);\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static drawBox(viewer, min, max, material = null) {\\r\\n\\r\\n    var _material = material;\\r\\n\\r\\n    if(!_material) {\\r\\n\\r\\n      _material = new THREE.LineBasicMaterial({\\r\\n        color: 0xffff00,\\r\\n        linewidth: 2\\r\\n      });\\r\\n\\r\\n      viewer.impl.matman().addMaterial(\\r\\n        'ADN-Material-Line',\\r\\n        _material,\\r\\n        true);\\r\\n    }\\r\\n\\r\\n    function drawLines(coordsArray, mat) {\\r\\n\\r\\n      var lines = [];\\r\\n\\r\\n      for (var i = 0; i < coordsArray.length; i+=2) {\\r\\n\\r\\n        var start = coordsArray[i];\\r\\n        var end = coordsArray[i+1];\\r\\n\\r\\n        var geometry = new THREE.Geometry();\\r\\n\\r\\n        geometry.vertices.push(new THREE.Vector3(\\r\\n          start.x, start.y, start.z));\\r\\n\\r\\n        geometry.vertices.push(new THREE.Vector3(\\r\\n          end.x, end.y, end.z));\\r\\n\\r\\n        geometry.computeLineDistances();\\r\\n\\r\\n        var line = new THREE.Line(geometry, mat);\\r\\n\\r\\n        viewer.impl.scene.add(line);\\r\\n\\r\\n        lines.push(line);\\r\\n      }\\r\\n\\r\\n      return lines;\\r\\n    }\\r\\n\\r\\n    var lines = drawLines([\\r\\n\\r\\n        {x: min.x, y: min.y, z: min.z},\\r\\n        {x: max.x, y: min.y, z: min.z},\\r\\n\\r\\n        {x: max.x, y: min.y, z: min.z},\\r\\n        {x: max.x, y: min.y, z: max.z},\\r\\n\\r\\n        {x: max.x, y: min.y, z: max.z},\\r\\n        {x: min.x, y: min.y, z: max.z},\\r\\n\\r\\n        {x: min.x, y: min.y, z: max.z},\\r\\n        {x: min.x, y: min.y, z: min.z},\\r\\n\\r\\n        {x: min.x, y: max.y, z: max.z},\\r\\n        {x: max.x, y: max.y, z: max.z},\\r\\n\\r\\n        {x: max.x, y: max.y, z: max.z},\\r\\n        {x: max.x, y: max.y, z: min.z},\\r\\n\\r\\n        {x: max.x, y: max.y, z: min.z},\\r\\n        {x: min.x, y: max.y, z: min.z},\\r\\n\\r\\n        {x: min.x, y: max.y, z: min.z},\\r\\n        {x: min.x, y: max.y, z: max.z},\\r\\n\\r\\n        {x: min.x, y: min.y, z: min.z},\\r\\n        {x: min.x, y: max.y, z: min.z},\\r\\n\\r\\n        {x: max.x, y: min.y, z: min.z},\\r\\n        {x: max.x, y: max.y, z: min.z},\\r\\n\\r\\n        {x: max.x, y: min.y, z: max.z},\\r\\n        {x: max.x, y: max.y, z: max.z},\\r\\n\\r\\n        {x: min.x, y: min.y, z: max.z},\\r\\n        {x: min.x, y: max.y, z: max.z}],\\r\\n\\r\\n      _material);\\r\\n\\r\\n    viewer.impl.sceneUpdated(true);\\r\\n\\r\\n    return lines;\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Set component material\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static async setMaterial(model, dbId, material) {\\r\\n\\r\\n    const fragIds = await ViewerToolkit.getFragIds(\\r\\n      model, dbId)\\r\\n\\r\\n    const fragList = model.getFragmentList()\\r\\n\\r\\n    fragIds.forEach((fragId)=> {\\r\\n\\r\\n      fragList.setMaterial(fragId, material)\\r\\n    })\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Recursively builds the model tree\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static buildModelTree(model, createNodeFunc = null){\\r\\n\\r\\n    //builds model tree recursively\\r\\n    function _buildModelTreeRec(node){\\r\\n\\r\\n      instanceTree.enumNodeChildren(node.dbId,\\r\\n        function(childId) {\\r\\n\\r\\n          var childNode = null;\\r\\n\\r\\n          if(createNodeFunc){\\r\\n\\r\\n            childNode = createNodeFunc(childId);\\r\\n\\r\\n          } else {\\r\\n\\r\\n            node.children = node.children || [];\\r\\n\\r\\n            childNode = {\\r\\n              dbId: childId,\\r\\n              name: instanceTree.getNodeName(childId)\\r\\n            }\\r\\n\\r\\n            node.children.push(childNode);\\r\\n          }\\r\\n\\r\\n          _buildModelTreeRec(childNode);\\r\\n        });\\r\\n    }\\r\\n\\r\\n    //get model instance tree and root component\\r\\n    var instanceTree = model.getData().instanceTree;\\r\\n\\r\\n    var rootId = instanceTree.getRootId();\\r\\n\\r\\n    var rootNode = {\\r\\n      dbId: rootId,\\r\\n      name: instanceTree.getNodeName(rootId)\\r\\n    }\\r\\n\\r\\n    _buildModelTreeRec(rootNode);\\r\\n\\r\\n    return rootNode;\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Recursively execute task on model tree\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static executeTaskOnModelTree(model, task) {\\r\\n\\r\\n    var taskResults = [];\\r\\n\\r\\n    function _executeTaskOnModelTreeRec(dbId){\\r\\n\\r\\n      instanceTree.enumNodeChildren(dbId,\\r\\n        function(childId) {\\r\\n\\r\\n          taskResults.push(task(model, childId));\\r\\n\\r\\n          _executeTaskOnModelTreeRec(childId);\\r\\n        });\\r\\n    }\\r\\n\\r\\n    //get model instance tree and root component\\r\\n    var instanceTree = model.getData().instanceTree;\\r\\n\\r\\n    var rootId = instanceTree.getRootId();\\r\\n\\r\\n    _executeTaskOnModelTreeRec(rootId);\\r\\n\\r\\n    return taskResults;\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static isolateFull (viewer, model = null, dbIds = []) {\\r\\n\\r\\n    return new Promise(async(resolve, reject) => {\\r\\n\\r\\n      try {\\r\\n\\r\\n        model = model || viewer.model\\r\\n\\r\\n        viewer.isolate(dbIds)\\r\\n\\r\\n        const targetIds = Array.isArray(dbIds) ? dbIds : [dbIds]\\r\\n\\r\\n        const targetLeafIds = await ViewerToolkit.getLeafNodes(\\r\\n          model, targetIds)\\r\\n\\r\\n        const leafIds = await ViewerToolkit.getLeafNodes (model)\\r\\n\\r\\n        const leafTasks = leafIds.map((dbId) => {\\r\\n\\r\\n          return new Promise((resolveLeaf) => {\\r\\n\\r\\n            const show = !targetLeafIds.length  ||\\r\\n              targetLeafIds.indexOf(dbId) > -1\\r\\n\\r\\n            viewer.impl.visibilityManager.setNodeOff(\\r\\n              dbId, !show)\\r\\n\\r\\n            resolveLeaf()\\r\\n          })\\r\\n        })\\r\\n\\r\\n        return Promise.all(leafTasks)\\r\\n\\r\\n      } catch(ex){\\r\\n\\r\\n        return reject(ex)\\r\\n      }\\r\\n    })\\r\\n  }\\r\\n}\\r\\n\\r\\n\",\"import ViewerToolkit from './Viewer.Toolkit'\\r\\n\\r\\nexport default ViewerToolkit\\r\\n\",\"/////////////////////////////////////////////////////////////////////\\r\\n// Viewing.Extension.ModelTransfomerExtension\\r\\n// by Philippe Leefsma, April 2016\\r\\n//\\r\\n/////////////////////////////////////////////////////////////////////\\r\\n/* eslint-disable */\\r\\nimport Panel from './Viewing.Extension.ModelTransformer.Panel'\\r\\nimport ExtensionBase from '../components/Viewer.ExtensionBase'\\r\\nimport ViewerToolkit from '../components/Viewer.Toolkit'\\r\\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\\r\\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\\r\\n\\r\\nconst Autodesk = window.Autodesk;\\r\\nconst THREE = window.THREE;\\r\\n\\r\\nclass ModelTransformerExtension extends ExtensionBase {\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Class constructor\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  constructor (viewer, options) {\\r\\n\\r\\n    super(viewer, options)\\r\\n\\r\\n    this.firstModelLoaded = null\\r\\n    this.modelCollection = {}\\r\\n\\r\\n    this.onGeometryLoadedHandler = (e) => {\\r\\n\\r\\n      this.onGeometryLoaded(e)\\r\\n    }\\r\\n\\r\\n    this.onAggregateSelectionChangedHandler = (e) => {\\r\\n\\r\\n      this.onAggregateSelectionChanged(e)\\r\\n    }\\r\\n\\r\\n    this.selectedDbIdArray = []\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Extension Id\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  static get ExtensionId () {\\r\\n\\r\\n    return 'Viewing.Extension.ModelTransformer'\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Load callback\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  load () {\\r\\n\\r\\n    this.loadControls()\\r\\n\\r\\n    const hotkeyMng = Autodesk.Viewing.theHotkeyManager\\r\\n\\r\\n    this.hotkeysId = ExtensionBase.guid()\\r\\n\\r\\n    const hotKeyTranslate = {\\r\\n\\r\\n      keycodes: [\\r\\n        hotkeyMng.KEYCODES.t\\r\\n      ],\\r\\n      onPress: (hotkeys) => {\\r\\n        //handled\\r\\n        return true\\r\\n      },\\r\\n      onRelease: (hotkeys) => {\\r\\n\\r\\n        var hitPoint = null\\r\\n\\r\\n        if (this.panel.rxTool.active) {\\r\\n\\r\\n          hitPoint = this.panel.rxTool.hitPoint()\\r\\n\\r\\n          this._viewer.toolController.deactivateTool(\\r\\n            this.panel.rxTool.getName())\\r\\n        }\\r\\n\\r\\n        if (!this.panel.txTool.active) {\\r\\n\\r\\n          this._viewer.toolController.activateTool(\\r\\n            this.panel.txTool.getName())\\r\\n\\r\\n          if (hitPoint) {\\r\\n\\r\\n            this.panel.txTool.setHitPoint(hitPoint)\\r\\n\\r\\n            const selections =\\r\\n              this._viewer.getAggregateSelection()\\r\\n\\r\\n            if (selections.length) {\\r\\n\\r\\n              const model = selections[0].model\\r\\n\\r\\n              const dbIdArray = selections[0].selection\\r\\n\\r\\n              ViewerToolkit.getFragIds(\\r\\n                model, dbIdArray).then((fragIdsArray) => {\\r\\n\\r\\n                  this.panel.txTool.setSelection({\\r\\n                    fragIdsArray,\\r\\n                    dbIdArray,\\r\\n                    model\\r\\n                  })\\r\\n                })\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n\\r\\n        return true\\r\\n      }\\r\\n    }\\r\\n\\r\\n    const hotKeyRotate = {\\r\\n\\r\\n      keycodes: [\\r\\n        hotkeyMng.KEYCODES.r\\r\\n      ],\\r\\n      onPress: (hotkeys) => {\\r\\n        //handled\\r\\n        return true\\r\\n      },\\r\\n      onRelease: (hotkeys) => {\\r\\n\\r\\n        var hitPoint = null\\r\\n\\r\\n        if (this.panel.txTool.active) {\\r\\n\\r\\n          hitPoint = this.panel.txTool.hitPoint()\\r\\n\\r\\n          this._viewer.toolController.deactivateTool(\\r\\n            this.panel.txTool.getName())\\r\\n        }\\r\\n\\r\\n        if (!this.panel.rxTool.active) {\\r\\n\\r\\n          this._viewer.toolController.activateTool(\\r\\n            this.panel.rxTool.getName())\\r\\n\\r\\n          if (hitPoint) {\\r\\n\\r\\n            this.panel.rxTool.setHitPoint(hitPoint)\\r\\n\\r\\n            const selections =\\r\\n              this._viewer.getAggregateSelection()\\r\\n\\r\\n            if (selections.length) {\\r\\n\\r\\n              const model = selections[0].model\\r\\n\\r\\n              const dbIdArray = selections[0].selection\\r\\n\\r\\n              ViewerToolkit.getFragIds(\\r\\n                model, dbIdArray).then((fragIdsArray) => {\\r\\n\\r\\n                  this.panel.rxTool.setSelection({\\r\\n                    fragIdsArray,\\r\\n                    dbIdArray,\\r\\n                    model\\r\\n                  })\\r\\n                })\\r\\n            }\\r\\n          }\\r\\n        }\\r\\n\\r\\n        return true\\r\\n      }\\r\\n    }\\r\\n\\r\\n    hotkeyMng.pushHotkeys(\\r\\n      this.hotkeysId, [\\r\\n          hotKeyTranslate,\\r\\n          hotKeyRotate\\r\\n        ], {\\r\\n        tryUntilSuccess: true\\r\\n      })\\r\\n\\r\\n    this._viewer.addEventListener(\\r\\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\\r\\n      this.onGeometryLoadedHandler)\\r\\n\\r\\n    this._viewer.addEventListener(\\r\\n      Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\\r\\n      this.onAggregateSelectionChangedHandler)\\r\\n\\r\\n    console.log('Viewing.Extension.ModelTransformer loaded')\\r\\n\\r\\n    return true\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  loadControls () {\\r\\n\\r\\n    this.control = ViewerToolkit.createButton(\\r\\n      'toolbar-model-transformer',\\r\\n      'adsk-button-icon model-transformer-icon fa fa-gears',\\r\\n      'Transform Models', () => {\\r\\n\\r\\n        this.panel.toggleVisibility()\\r\\n      })\\r\\n\\r\\n    this.panel = new Panel(\\r\\n      this._viewer,\\r\\n      this.control.container)\\r\\n\\r\\n    this.panel.on('open', () => {\\r\\n\\r\\n      if(this._options.autoLoad) {\\r\\n\\r\\n        var loadedModels = this._viewer.impl.modelQueue().getModels()\\r\\n\\r\\n        loadedModels.forEach((model) => {\\r\\n\\r\\n          model.modelId = model.modelId || ExtensionBase.guid()\\r\\n\\r\\n          if (!this.modelCollection[ model.modelId ]) {\\r\\n\\r\\n            model.name = model.name ||\\r\\n            'Model ' + (Object.keys(this.modelCollection).length + 1)\\r\\n\\r\\n            this.addModel(model)\\r\\n          }\\r\\n        })\\r\\n      }\\r\\n    })\\r\\n\\r\\n    this.panel.on('model.transform', (data) => {\\r\\n\\r\\n      data.model.transform = data.transform\\r\\n\\r\\n      this.applyTransform(data.model)\\r\\n\\r\\n      this._viewer.impl.sceneUpdated(true)\\r\\n\\r\\n      // DISABLING FIT TO VIEW for XYPLANE DEMO\\r\\n\\r\\n      // if (data.fitToView) {\\r\\n      //   this.fitModelToView(data.model)\\r\\n      // }\\r\\n    })\\r\\n\\r\\n    this.panel.on('model.delete', (data) => {\\r\\n      this.deleteModel(\\r\\n        data.model)\\r\\n\\r\\n      this._viewer.impl.sceneUpdated(true)\\r\\n    })\\r\\n\\r\\n    this.panel.on('model.selected', (data) => {\\r\\n\\r\\n      this.currentSelection = data.selection\\r\\n\\r\\n      // DISABLING FIT TO VIEW for XYPLANE DEMO\\r\\n\\r\\n      // if (data.fitToView) {\\r\\n      //   this.fitModelToView(data.model)\\r\\n      // }\\r\\n    })\\r\\n\\r\\n    if (this._options.parentControl) {\\r\\n\\r\\n      if(typeof this._options.parentControl === 'string') {\\r\\n\\r\\n        this.parentControl = this._viewer.getToolbar().getControl(\\r\\n          this._options.parentControl)\\r\\n\\r\\n      } else if (typeof this._options.parentControl === 'object') {\\r\\n\\r\\n        this.parentControl = this._options.parentControl\\r\\n      }\\r\\n\\r\\n    } else {\\r\\n\\r\\n      var viewerToolbar = this._viewer.getToolbar(true)\\r\\n\\r\\n      this.parentControl = new Autodesk.Viewing.UI.ControlGroup(\\r\\n        'model-transformer')\\r\\n\\r\\n      viewerToolbar.addControl(this.parentControl)\\r\\n    }\\r\\n\\r\\n    if (this.parentControl) {\\r\\n\\r\\n      this.parentControl.addControl(\\r\\n        this.control)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  onGeometryLoaded (e) {\\r\\n    // In Philippes extension he uses e.target\\r\\n    if(this._options.autoLoad) {\\r\\n      var model = e.model\\r\\n\\r\\n      model.modelId = model.modelId || ExtensionBase.guid()\\r\\n\\r\\n      if (!this.modelCollection[ model.modelId ]) {\\r\\n\\r\\n        model.name = model.name ||\\r\\n        'Model ' + (Object.keys(this.modelCollection).length + 1)\\r\\n\\r\\n        this.addModel(model)\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Unload callback\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  unload () {\\r\\n\\r\\n    Autodesk.Viewing.theHotkeyManager.popHotkeys(\\r\\n      this.hotkeysId)\\r\\n\\r\\n    this._viewer.removeEventListener(\\r\\n      Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\\r\\n      this.onGeometryLoadedHandler)\\r\\n\\r\\n    this._viewer.removeEventListener(\\r\\n      Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,\\r\\n      this.onAggregateSelectionChangedHandler)\\r\\n\\r\\n    if (this.control) {\\r\\n\\r\\n      this.parentControl.removeControl(\\r\\n        this.control)\\r\\n    }\\r\\n\\r\\n    console.log('Viewing.Extension.ModelTransfomer unloaded')\\r\\n\\r\\n    return true\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Fix model structure when selecting model\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  onAggregateSelectionChanged (event) {\\r\\n\\r\\n    if (event.selections && event.selections.length) {\\r\\n\\r\\n      var selection = event.selections[0]\\r\\n\\r\\n      this.selectedDbIdArray = event.selections[0].dbIdArray\\r\\n\\r\\n      this.setStructure(selection.model)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  // Applies transform to specific model\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  applyTransform (model) {\\r\\n\\r\\n    var viewer = this._viewer\\r\\n\\r\\n    var euler = new THREE.Euler(\\r\\n      model.transform.rotation.x * Math.PI/180,\\r\\n      model.transform.rotation.y * Math.PI/180,\\r\\n      model.transform.rotation.z * Math.PI/180,\\r\\n      'XYZ')\\r\\n\\r\\n    var quaternion = new THREE.Quaternion()\\r\\n\\r\\n    quaternion.setFromEuler(euler)\\r\\n\\r\\n    function _transformFragProxy (fragId) {\\r\\n\\r\\n      var fragProxy = viewer.impl.getFragmentProxy(\\r\\n        model,\\r\\n        fragId)\\r\\n\\r\\n      fragProxy.getAnimTransform()\\r\\n\\r\\n      fragProxy.position = model.transform.translation\\r\\n\\r\\n      fragProxy.scale = model.transform.scale\\r\\n\\r\\n      //Not a standard three.js quaternion\\r\\n      fragProxy.quaternion._x = quaternion.x\\r\\n      fragProxy.quaternion._y = quaternion.y\\r\\n      fragProxy.quaternion._z = quaternion.z\\r\\n      fragProxy.quaternion._w = quaternion.w\\r\\n\\r\\n      fragProxy.updateAnimTransform()\\r\\n    }\\r\\n\\r\\n    var fragCount = model.getFragmentList().\\r\\n      fragments.fragId2dbId.length\\r\\n\\r\\n    //fragIds range from 0 to fragCount-1\\r\\n    for (var fragId = 0; fragId < fragCount; ++fragId) {\\r\\n\\r\\n      _transformFragProxy(fragId)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  fitModelToView (model) {\\r\\n\\r\\n    var instanceTree = model.getData().instanceTree\\r\\n\\r\\n    if (instanceTree) {\\r\\n\\r\\n      var rootId = instanceTree.getRootId()\\r\\n\\r\\n      this._viewer.model = model\\r\\n\\r\\n      this._viewer.fitToView([rootId])\\r\\n    }\\r\\n  }\\r\\n\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  setStructure (model) {\\r\\n\\r\\n    var instanceTree = model.getData().instanceTree\\r\\n\\r\\n    if (instanceTree && this._viewer.modelstructure) {\\r\\n\\r\\n      this._viewer.modelstructure.setModel(\\r\\n        instanceTree)\\r\\n    }\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  addModel (model) {\\r\\n\\r\\n    this.modelCollection[model.modelId] = model\\r\\n\\r\\n    if (!model.transform) {\\r\\n\\r\\n      model.transform = {\\r\\n        scale: {\\r\\n          x: 1.0, y: 1.0, z: 1.0\\r\\n        },\\r\\n        translation: {\\r\\n          x: 0.0, y: 0.0, z: 0.0\\r\\n        },\\r\\n        rotation: {\\r\\n          x: 0.0, y: 0.0, z: 0.0\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n\\r\\n    this.panel.dropdown.addItem(\\r\\n      model, true)\\r\\n  }\\r\\n\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  modelTransformToMatrix (transform) {\\r\\n\\r\\n    var matrix = new THREE.Matrix4()\\r\\n\\r\\n    var translation = new THREE.Vector3(\\r\\n      transform.translation.x,\\r\\n      transform.translation.y,\\r\\n      transform.translation.z)\\r\\n\\r\\n    var euler = new THREE.Euler(\\r\\n      transform.rotation.x * Math.PI / 180,\\r\\n      transform.rotation.y * Math.PI / 180,\\r\\n      transform.rotation.z * Math.PI / 180,\\r\\n      'XYZ')\\r\\n\\r\\n    var quaternion = new THREE.Quaternion()\\r\\n\\r\\n    quaternion.setFromEuler(euler)\\r\\n\\r\\n    var scale = new THREE.Vector3(\\r\\n      transform.scale.x,\\r\\n      transform.scale.y,\\r\\n      transform.scale.z)\\r\\n\\r\\n    matrix.compose(translation, quaternion, scale)\\r\\n\\r\\n    return matrix\\r\\n  }\\r\\n\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  //////////////////////////////////////////////////////////////////////////\\r\\n  buildPlacementTransform (modelName) {\\r\\n\\r\\n    var placementTransform = new THREE.Matrix4()\\r\\n\\r\\n    if (!this.firstModelLoaded) {\\r\\n\\r\\n      this.firstModelLoaded = modelName\\r\\n    }\\r\\n\\r\\n    // those file type have different orientation\\r\\n    // than other, so need to correct it\\r\\n    // upon insertion\\r\\n    const zOriented = ['rvt', 'nwc']\\r\\n\\r\\n    var firstExt = this.firstModelLoaded.split('.').pop(-1)\\r\\n\\r\\n    var modelExt = modelName.split(\\\".\\\").pop(-1)\\r\\n\\r\\n    if (zOriented.indexOf(firstExt) > -1) {\\r\\n\\r\\n      if (zOriented.indexOf(modelExt) < 0) {\\r\\n\\r\\n        placementTransform.makeRotationX(\\r\\n          90 * Math.PI/180)\\r\\n      }\\r\\n\\r\\n    } else {\\r\\n\\r\\n      if(zOriented.indexOf(modelExt) > -1) {\\r\\n\\r\\n        placementTransform.makeRotationX(\\r\\n          -90 * Math.PI/180)\\r\\n      }\\r\\n    }\\r\\n\\r\\n    return placementTransform\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  deleteModel (model, fireEvent = true) {\\r\\n    debugger\\r\\n    delete this.modelCollection[model.modelId]\\r\\n\\r\\n    if(Object.keys(this.modelCollection).length === 0){\\r\\n\\r\\n      this.firstModelLoaded = null\\r\\n    }\\r\\n\\r\\n    if(fireEvent) {\\r\\n\\r\\n      this.emit('model.delete', model)\\r\\n    }\\r\\n\\r\\n    this._viewer.impl.unloadModel(model)\\r\\n  }\\r\\n\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  //\\r\\n  //\\r\\n  /////////////////////////////////////////////////////////////////\\r\\n  clearModels () {\\r\\n\\r\\n    this.panel.clearSelection()\\r\\n\\r\\n    this.panel.dropdown.clear()\\r\\n\\r\\n    this.modelCollection = {}\\r\\n  }\\r\\n}\\r\\n\\r\\nAutodesk.Viewing.theExtensionManager.registerExtension(\\r\\n  ModelTransformerExtension.ExtensionId,\\r\\n  ModelTransformerExtension)\\r\\n\",\"import './Viewing.Extension.ModelTransformer'\\r\\n\\r\\nexport default 'Viewing.Extension.ModelTransformer'\",\"// List hodnot pro tabulku\\r\\n// var myList =\\r\\n//     [\\r\\n//         { id: '1', number: '1111', description: 'Nyt 1' },\\r\\n//         { id: '2', number: '222', description: 'Nyt 2' }\\r\\n//     ];\\r\\n\\r\\nimport jQuery from \\\"jquery\\\";\\r\\nimport $ from \\\"jquery\\\";\\r\\n// Loads rivets data from server and fill table\\r\\nfunction getRivets(callback) {\\r\\n    jQuery.ajax({\\r\\n        url: '/rivetec/getrivets',\\r\\n        success: function (res) {\\r\\n            console.log('rivets portflio', res);\\r\\n            callback(res);\\r\\n        }\\r\\n    });\\r\\n\\r\\n}\\r\\n\\r\\n\\r\\n// Builds the HTML Table out of myList json data from Ivy restful service.\\r\\nfunction buildHtmlTable(rivetsData) {\\r\\n    var columns = addAllColumnHeaders(rivetsData);\\r\\n\\r\\n    for (var i = 0; i < rivetsData.length; i++) {\\r\\n        var row$ = $('<tr/>');\\r\\n        for (var colIndex = 0; colIndex < columns.length; colIndex++) {\\r\\n            var cellValue = rivetsData[i][columns[colIndex]];\\r\\n\\r\\n            if (cellValue == null) { cellValue = \\\"\\\"; }\\r\\n\\r\\n            row$.append($('<td/>').html(cellValue));\\r\\n        }\\r\\n        $(\\\"#csvDataTable\\\").append(row$);\\r\\n    }\\r\\n};\\r\\n\\r\\n// Adds a header row to the table and returns the set of columns.\\r\\n// Need to do union of keys from all records as some records may not contain\\r\\n// all records\\r\\nfunction addAllColumnHeaders(myList) {\\r\\n    var columnSet = [];\\r\\n    var headerTr$ = $('<tr/>');\\r\\n\\r\\n    for (var i = 0; i < myList.length; i++) {\\r\\n        var rowHash = myList[i];\\r\\n        for (var key in rowHash) {\\r\\n            if ($.inArray(key, columnSet) === -1) {\\r\\n                columnSet.push(key);\\r\\n                headerTr$.append($('<th/>').html(key));\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n    $(\\\"#csvDataTable\\\").append(headerTr$);\\r\\n\\r\\n    return columnSet;\\r\\n}\\r\\n\\r\\n// vycisteni tabulky\\r\\nfunction clearTable() {\\r\\n    $(\\\"#csvDataTable\\\").empty()\\r\\n}\\r\\n\\r\\nexport var rowID;\\r\\n// Oznaceni radku v tabulce\\r\\nfunction selectedRowOnTable() {\\r\\n    $(\\\"#csvDataTable tr\\\").click(function () {\\r\\n        $(this).addClass('selected').siblings().removeClass('selected');\\r\\n        var value = $(this).find('td:first').html();\\r\\n        console.log(value);\\r\\n        rowID = value;\\r\\n    });\\r\\n}\\r\\n\\r\\n// Nacti data CLICK\\r\\n$(\\\"#btnDataImport\\\").click(function () {\\r\\n    getRivets(function (rivetsData) {\\r\\n        clearTable();\\r\\n        buildHtmlTable(rivetsData);\\r\\n        selectedRowOnTable();\\r\\n    })\\r\\n})\\r\\n\\r\\nexport default \\\"importCsvData\\\";\",\"// 'use strict'\\r\\nimport $ from \\\"jquery\\\";\\r\\nimport {getForgeToken} from \\\"./oauth\\\";\\r\\n// import Client from './extensions/components/Client';\\r\\nimport ModelTransformerExtension from './extensions/Viewing.Extension.ModelTransformer';\\r\\n// import EventTool from './extensions/components/Viewer.EventTool';\\r\\nimport importCsvData from \\\"./importCsvData\\\";\\r\\n\\r\\n// var ModelTransformerExtension = require('./extensions/Viewing.Extension.ModelTransformer');\\r\\n// import { ModelTransformerExtension } from \\\"./extensions/Viewing.Extension.ModelTransformer\\\";\\r\\n// import ModelTransformerExtension from './extensions/Viewing.Extension.ModelTransformer';\\r\\nconst Autodesk = window.Autodesk;\\r\\nconst THREE = window.THREE;\\r\\nvar viewer;\\r\\nvar pointData ={};\\r\\nvar pointer;\\r\\nvar options = {\\r\\n    env: 'AutodeskProduction',\\r\\n    getAccessToken: getForgeToken\\r\\n}\\r\\n\\r\\nvar documentId = 'urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTEyLTA1LTEwLTA0LTM3LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0JvZHlfT2JhbF8xLmlwdA';\\r\\nvar documentId2 = 'urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE5LTAxLTAzLTE0LTI4LTI4LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0hlYWQwMS5pcHQ';\\r\\n// Button_Click\\r\\n// document.getElementById(\\\"openViewerBtn\\\").addEventListener(\\\"click\\\",function(){\\r\\n// Autodesk.Viewing.Initializer(options, function onInitialized() {\\r\\n//     Autodesk.Viewing.Document.load(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\\r\\n// });\\r\\n\\r\\nlaunchViewer(documentId);\\r\\nfunction launchViewer(documentId) {\\r\\n     \\r\\n       var viewerDiv = document.getElementById('forgeViewer');\\r\\n       viewer = new Autodesk.Viewing.Private.GuiViewer3D(viewerDiv);\\r\\n   \\r\\n       Autodesk.Viewing.Initializer(options, function onInitialized(){\\r\\n           var errorCode = viewer.start();\\r\\n   \\r\\n           // Check for initialization errors.\\r\\n           if (errorCode) {\\r\\n               console.error('viewer.start() error - errorCode:' + errorCode);\\r\\n               return;\\r\\n           }\\r\\n               Autodesk.Viewing.Document.load(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\\r\\n           });\\r\\n   }\\r\\n\\r\\n/**\\r\\n * Autodesk.Viewing.Document.load() success callback.\\r\\n * Proceeds with model initialization.\\r\\n */\\r\\nfunction onDocumentLoadSuccess(doc) {\\r\\n\\r\\n    // A document contains references to 3D and 2D viewables.\\r\\n    var viewables = Autodesk.Viewing.Document.getSubItemsWithProperties(doc.getRootItem(), {'type':'geometry'}, true);\\r\\n    if (viewables.length === 0) {\\r\\n        console.error('Document contains no viewables.');\\r\\n        return;\\r\\n    }\\r\\n\\r\\n    // var eventTool = new EventTool(viewer)\\r\\n    // eventTool.activate()\\r\\n    // eventTool.on('singleclick', (event) => {\\r\\n    //     pointer = event\\r\\n    // })\\r\\n\\r\\n    //load model.\\r\\n    viewer.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT, onGeometryLoadedHandler);\\r\\n    viewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,onSelection);\\r\\n    viewer.prefs.tag('ignore-producer');\\r\\n    \\r\\n    //viewer.impl.disableRollover(true); removed for viewer version 3.2\\r\\n    viewer.loadExtension(ModelTransformerExtension, {\\r\\n         parentControl: 'modelTools',\\r\\n         autoLoad: true\\r\\n    })  \\r\\n    // Choose any of the available viewables.\\r\\n    var indexViewable = 0;\\r\\n    var lmvDoc = doc;\\r\\n\\r\\n    // Everything is setup, load the model.\\r\\n    loadModel(viewables, lmvDoc, indexViewable);\\r\\n}\\r\\n\\r\\n/**\\r\\n* Autodesk.Viewing.Document.load() failuire callback.\\r\\n**/\\r\\n// function onDocumentLoadFailure(viewerErrorCode) {\\r\\n//     console.error('onDocumentLoadFailure() - errorCode:' + viewerErrorCode);\\r\\n// }\\r\\n\\r\\n//////////////////////////////////////////////////////////////////////////\\r\\n// Model Geometry loaded callback\\r\\n//\\r\\n//////////////////////////////////////////////////////////////////////////\\r\\nfunction onGeometryLoadedHandler(event) {\\r\\n        event.target.model = event.model\\r\\n        var viewer = event.target;\\r\\n        viewer.removeEventListener(\\r\\n                Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\\r\\n                onGeometryLoadedHandler);\\r\\n        viewer.setQualityLevel(false,false);\\r\\n        viewer.setGroundShadow(false);\\r\\n        //viewer.showAll();\\r\\n        viewer.fitToView();\\r\\n}\\r\\n\\r\\n\\r\\n// function loadNextModel(documentId) {\\r\\n//      const extInstance = viewer.getExtension(ModelTransformerExtension);\\r\\n//      const pickVar = extInstance.panel;\\r\\n\\r\\n//      pickVar.tooltip.setContent(`\\r\\n//       <div id=\\\"pickTooltipId\\\" class=\\\"pick-tooltip\\\">\\r\\n//         <b>Pick position ...</b>\\r\\n//       </div>`, '#pickTooltipId')\\r\\n\\r\\n//     if (!pointData.point){\\r\\n//         alert('You need to select a point in your house to snap the AC first');\\r\\n//         pickVar.tooltip.activate();\\r\\n//     }\\r\\n//     else{\\r\\n//         Autodesk.Viewing.Document.load(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\\r\\n//         pickVar.tooltip.deactivate();\\r\\n//     }\\r\\n   \\r\\n// }\\r\\n\\r\\n\\r\\nfunction onSelection (event) {\\r\\n    if (event.selections && event.selections.length) {\\r\\n        pointData = viewer.clientToWorld(\\r\\n            pointer.canvasX,\\r\\n            pointer.canvasY,\\r\\n            true)\\r\\n    }\\r\\n}\\r\\n/**\\r\\n * Autodesk.Viewing.Document.load() success callback.\\r\\n * Proceeds with model initialization.\\r\\n */\\r\\n// function onDocumentLoadSuccess(doc) {\\r\\n\\r\\n//     // A document contains references to 3D and 2D viewables.\\r\\n//     var viewable = Autodesk.Viewing.Document.getSubItemsWithProperties(doc.getRootItem(), {\\r\\n//         'type': 'geometry',\\r\\n//         'role': '3d'\\r\\n//     }, true);\\r\\n//     if (viewable.length === 0) {\\r\\n//         console.error('Document contains no viewables.');\\r\\n//         return;\\r\\n//     }\\r\\n\\r\\n//     // Choose any of the available viewable\\r\\n//     var initialViewable = viewable[0]; // You can check for other available views in your model,\\r\\n//     var svfUrl = doc.getViewablePath(initialViewable);\\r\\n//     var modelOptions = {\\r\\n//         sharedPropertyDbPath: doc.getPropertyDbPath()\\r\\n//     };\\r\\n\\r\\n//     var viewerDiv = document.getElementById('forgeViewer');\\r\\n\\r\\n//     ///////////////USE ONLY ONE OPTION AT A TIME/////////////////////////\\r\\n\\r\\n//     /////////////////////// Headless Viewer /////////////////////////////\\r\\n//     // viewer = new Autodesk.Viewing.Viewer3D(viewerDiv);\\r\\n//     //////////////////////////////////////////////////////////////////////\\r\\n\\r\\n//     //////////////////Viewer with Autodesk Toolbar///////////////////////\\r\\n//     viewer = new Autodesk.Viewing.Private.GuiViewer3D(viewerDiv);\\r\\n//     //////////////////////////////////////////////////////////////////////\\r\\n\\r\\n//     viewer.start(svfUrl, modelOptions, onLoadModelSuccess, onLoadModelError);\\r\\n//     // loadModel(viewable,doc,0);\\r\\n// }\\r\\n\\r\\n/**\\r\\n * Autodesk.Viewing.Document.load() failure callback.\\r\\n */\\r\\nfunction onDocumentLoadFailure(viewerErrorCode) {\\r\\n    console.error('onDocumentLoadFailure() - errorCode:' + viewerErrorCode);\\r\\n}\\r\\n\\r\\n/**\\r\\n * viewer.loadModel() success callback.\\r\\n * Invoked after the model's SVF has been initially loaded.\\r\\n * It may trigger before any geometry has been downloaded and displayed on-screen.\\r\\n */\\r\\nfunction onLoadModelSuccess(model) {\\r\\n    console.log('onLoadModelSuccess()!');\\r\\n    console.log('Validate model loaded: ' + (viewer.model === model));\\r\\n    console.log(model);\\r\\n}\\r\\n\\r\\n/**\\r\\n * viewer.loadModel() failure callback.\\r\\n * Invoked when there's an error fetching the SVF file.\\r\\n */\\r\\nfunction onLoadModelError(viewerErrorCode) {\\r\\n    console.error('onLoadModelError() - errorCode:' + viewerErrorCode);\\r\\n}\\r\\n\\r\\n// Testovaci vlozeni dilu do vieweru\\r\\n$(\\\"#addModelBtn\\\").click(function(){\\r\\n//Ziskani vyberu z tabulky   \\r\\n    //Najiti modelu v databazi (seznamu)\\r\\n    findModelInDatabase(getRowId());\\r\\n    //Automaticke prelozeni modelu pro prohlizec\\r\\n    \\r\\n    //Vlozeni modelu do prohlizece\\r\\n    Autodesk.Viewing.Document.load(documentId2, onDocumentLoadSuccess, onDocumentLoadFailure);\\r\\n    //Automaticke umisteni na spravne misto v prohlizeci\\r\\n\\r\\n})\\r\\n\\r\\nfunction findModelInDatabase(modelID) {\\r\\n    var modelURN = \\\"\\\";\\r\\n    if (modelID === \\\"1\\\") {\\r\\n        //Pro ucely dema je vlozen jiz prelozeny model (URN)\\r\\n        //V tomto pripade se vlozi model \\\"Head01.ipt\\\"\\r\\n        modelURN = 'urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE5LTAxLTAzLTE0LTI4LTI4LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0hlYWQwMS5pcHQ';\\r\\n    }\\r\\n    else {\\r\\n        modelURN =\\\"\\\";\\r\\n        alert(\\\"Model s tmto ID nemm v databzi\\\");\\r\\n    }\\r\\n\\r\\n    console.log(\\\"model URN: \\\"+ modelURN);\\r\\n    \\r\\n    // loadModel(viewable,modelURN,viewable[0])\\r\\n    return modelURN;\\r\\n    \\r\\n}\\r\\n\\r\\nfunction getRowId() {\\r\\n    var modelID = importCsvData.rowID;\\r\\n    console.log(\\\"Kliknul jsi na ADD SELECTED a rowId je: \\\" + modelID);\\r\\n    // console.log(rowID);\\r\\n    return modelID;\\r\\n}\\r\\n\\r\\nfunction loadModel(viewables, lmvDoc, indexViewable) {\\r\\n\\r\\n    return new Promise(async(resolve, reject)=> {\\r\\n        var initialViewable = viewables[indexViewable];\\r\\n        var svfUrl = lmvDoc.getViewablePath(initialViewable);\\r\\n        var panel;\\r\\n        var modelName;\\r\\n\\r\\n        var modelOptions = {\\r\\n                    sharedPropertyDbPath: lmvDoc.getPropertyDbPath(),\\r\\n        };\\r\\n\\r\\n        viewer.loadModel(svfUrl, modelOptions, (model) => {\\r\\n            \\r\\n            switch (lmvDoc.myData.status.toString() === \\\"success\\\" ) {\\r\\n            case (lmvDoc.myData.guid.toString() === \\\"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE5LTAxLTAzLTE0LTI4LTI4LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0hlYWQwMS5pcHQ\\\"):\\r\\n                \\r\\n                panel = viewer.getExtension(ModelTransformerExtension).panel;\\r\\n                panel.setTransform(wallOneTransform());\\r\\n                panel.applyTransform(model);\\r\\n                modelName = \\\"Head01.ipt\\\"    \\r\\n                break;\\r\\n\\r\\n            // case (lmvDoc.myData.guid.toString() === \\\"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTA2LTA2LTEzLTUzLTQ3LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL09LTk9fMi5pcHQ\\\"):\\r\\n                \\r\\n            //     panel = viewer.getExtension(ModelTransformerExtension).panel;\\r\\n            //     panel.setTransform(wallTwoTransform()); \\r\\n            //     panel.applyTransform(model); \\r\\n            //     modelName = \\\"OKNO_2.ipt\\\"\\r\\n            //     break;\\r\\n                \\r\\n            // case (lmvDoc.myData.guid.toString() === \\\"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTA2LTA2LTEzLTU2LTMwLWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0RWRVJFLmlwdA\\\"):\\r\\n            //     panel = viewer.getExtension(ModelTransformerExtension).panel;\\r\\n            //     panel.setTransform(floorTransform());\\r\\n            //     panel.applyTransform(model);\\r\\n            //     modelName = \\\"DVERE.ipt\\\"\\r\\n            //     break;\\r\\n            default:\\r\\n                //viewer.impl.toggleCelShading(true);\\r\\n                modelName = \\\"Body_Obal_1.ipt\\\";\\r\\n            }\\r\\n\\r\\n            model.name = modelName;\\r\\n            resolve(model)\\r\\n        })\\r\\n    })\\r\\n}\\r\\n\\r\\nfunction wallOneTransform(){\\r\\n\\r\\n    var transform = {\\r\\n        translation: new THREE.Vector3(0.0, 0.0, 0.0),\\r\\n        rotation: new THREE.Vector3(0.0, 0.0, 0.0),\\r\\n        scale: new THREE.Vector3(1, 1, 1)\\r\\n    }\\r\\n    switch (pointData.face.normal.x * pointData.face.normal.y === 0){\\r\\n    case (pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === 1):\\r\\n        transform.translation = new THREE.Vector3(pointData.point.x , pointData.point.y+0.3, pointData.point.z);\\r\\n        transform.rotation = new THREE.Vector3(0, 0, 180);\\r\\n        console.log('Inside Y = 1 Wall');\\r\\n        break;\\r\\n    case (pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === -1) :\\r\\n        transform.translation = new THREE.Vector3(pointData.point.x , pointData.point.y-0.3, pointData.point.z);\\r\\n        transform.rotation = new THREE.Vector3(0, 0, 0);\\r\\n        console.log('Inside Y = -1 Wall');\\r\\n        break;\\r\\n    case (Math.round(pointData.face.normal.x) === 1 && pointData.face.normal.y === 0):\\r\\n        transform.translation = new THREE.Vector3(pointData.point.x+0.3 , pointData.point.y, pointData.point.z);\\r\\n        transform.rotation = new THREE.Vector3(90, 90, 0);\\r\\n        console.log('Inside X = 1 Wall');\\r\\n        break;\\r\\n    case (Math.round(pointData.face.normal.x) === -1 && pointData.face.normal.y === 0):\\r\\n        transform.translation = new THREE.Vector3(pointData.point.x-0.35 , pointData.point.y, pointData.point.z);\\r\\n        transform.rotation = new THREE.Vector3(0, 180, 90);\\r\\n        console.log('Inside X = -1 Wall');\\r\\n        break;\\r\\n    default:\\r\\n        alert('You need to select one of the walls for this AC Unit');\\r\\n    }\\r\\n    return transform\\r\\n}\\r\\n\\r\\n// }) //EndOfButton_Click\\r\\n\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n// //\\r\\n// // Load Viewer Background Color Extension\\r\\n// //\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n\\r\\n// function changeBackground (){\\r\\n//        viewer.setBackgroundColor(0, 59, 111, 255,255, 255);\\r\\n// }\\r\\n\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n// //\\r\\n// // Unload Viewer Background Color Extension\\r\\n// //\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n\\r\\n// function resetBackground (){\\r\\n//        viewer.setBackgroundColor(169,169,169, 255,255, 255);\\r\\n// }\\r\\n\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n// //\\r\\n// // Load Viewer Markup3D Extension\\r\\n// //\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n// // 3D Markup extension to display values of the selected objects in the model. \\r\\n\\r\\n// function loadMarkup3D (){\\r\\n//        viewer.loadExtension('Viewing.Extension.Markup3D');\\r\\n// }\\r\\n\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n// //\\r\\n// // Load Viewer Transform Extension\\r\\n// //\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n// // Transformation is allowed with this extension to move object selected in the XYZ\\r\\n// // position or rotation in XYZ as well.\\r\\n\\r\\n// function loadTransform (){\\r\\n//   viewer.loadExtension('./extensions/Viewing.Extension.ModelTransformer');\\r\\n// }\\r\\n\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n// //\\r\\n// // Load Viewer Control Selector Extension\\r\\n// //\\r\\n// /////////////////////////////////////////////////////////////////////////////////\\r\\n// // This extension allows you to remove certain extensions from the original toolbar \\r\\n// // provided to you.\\r\\n\\r\\n// function loadControlSelector(){\\r\\n//        viewer.loadExtension('_Viewing.Extension.ControlSelector');\\r\\n// }\\r\\n\\r\\n// export default ForgeViewer;\",\"import jQuery from \\\"jquery\\\";\\r\\nexport function getForgeToken(callback) {\\r\\n    jQuery.ajax({\\r\\n      url: '/user/token',\\r\\n      success: function (res) {\\r\\n        console.log('res de token client', res);\\r\\n        callback(res.access_token, res.expires_in)\\r\\n      }\\r\\n    });\\r\\n  \\r\\n  }\",\"import React from \\\"react\\\";\\r\\nimport ReactDOM from \\\"react-dom\\\";\\r\\nimport ForgeViewer from \\\"./js/ForgeViewer\\\"\\r\\n\\r\\n// function App() {\\r\\n//   return (\\r\\n//     <div className=\\\"App\\\">\\r\\n\\r\\n//         <h1>Hello CodeSandbox</h1>\\r\\n//         <h2>Start editing to see some magic happen!</h2>\\r\\n\\r\\n\\r\\n//     </div>\\r\\n//   );\\r\\n// }\\r\\n\\r\\n// const rootElement = document.getElementById(\\\"rootViewer\\\");\\r\\n// ReactDOM.render(<App />, rootElement);\\r\\n\\r\\nReactDOM.render(\\r\\n  <h1>Hello world jeste jednou</h1>,\\r\\n  document.getElementById('root')\\r\\n);\\r\\n\\r\\n// ForgeViewer;\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){},15:function(e,t,n){e.exports=n(31)},23:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){\"use strict\";n.r(t);var i=n(10),o=n.n(i),r=n(13),a=n.n(r),s=n(6),l=n.n(s),c=n(8),h=n(3),u=n.n(h);var d=n(0),p=n(2),m=n(4),v=n(1),f=n(5),y=n(7),w=function(){function e(){Object(d.a)(this,e),this._events={}}return Object(p.a)(e,[{key:\"on\",value:function(e,t){var n=this;return e.split(\" \").forEach(function(e){n._events[e]=n._events[e]||[],n._events[e].push(t)}),this}},{key:\"off\",value:function(e,t){var n=this;if(void 0!=e)return e.split(\" \").forEach(function(e){e in n._events!==!1&&(t?n._events[e].splice(n._events[e].indexOf(t),1):n._events[e]=[])}),this;this._events={}}},{key:\"emit\",value:function(e){if(void 0!==this._events[e])for(var t=this._events[e].slice(),n=0;n<t.length;++n){var i=t[n].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==i)return i}}},{key:\"guid\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"xxxxxxxxxxxx\",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(\"x\"==e?n:7&n|8).toString(16)});return n}}]),e}();w.Composer=function(e){return function(e){function t(e,n,i,o,r){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(v.a)(t).call(this,e,n,i,o,r)))._events={},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"on\",value:function(e,t){var n=this;return e.split(\" \").forEach(function(e){n._events[e]=n._events[e]||[],n._events[e].push(t)}),this}},{key:\"off\",value:function(e,t){var n=this;if(void 0!=e)return e.split(\" \").forEach(function(e){e in n._events!==!1&&(t?n._events[e].splice(n._events[e].indexOf(t),1):n._events[e]=[])}),this;this._events={}}},{key:\"emit\",value:function(e){if(void 0!==this._events[e])for(var t=this._events[e].slice(),n=0;n<t.length;++n){var i=t[n].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==i)return i}}},{key:\"guid\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"xxxxxxxxxxxx\",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(\"x\"==e?n:7&n|8).toString(16)});return n}}]),t}(e)};var g=w,x=window.Autodesk,b=window.THREE;!function(){var e=function e(t){Object(d.a)(this,e),b.MeshBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.side=b.FrontSide,this.transparent=!0,this.setValues(t),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(e){e?(this.color.setRGB(1,230/255,3/255),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};e.prototype=Object.create(b.MeshBasicMaterial.prototype);var t=function e(t){Object(d.a)(this,e),b.LineBasicMaterial.call(this),this.depthTest=!1,this.depthWrite=!1,this.transparent=!0,this.linewidth=3,this.setValues(t),this.oldColor=this.color.clone(),this.oldOpacity=this.opacity,this.highlight=function(e){e?(this.color.setRGB(1,230/255,3/255),this.opacity=1):(this.color.copy(this.oldColor),this.opacity=this.oldOpacity)}};t.prototype=Object.create(b.LineBasicMaterial.prototype),void 0===b.PolyhedronGeometry&&(b.PolyhedronGeometry=function(e,t,n,i){b.Geometry.call(this),this.type=\"PolyhedronGeometry\",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1,i=i||0;for(var o=this,r=0,a=e.length;r<a;r+=3)x(new b.Vector3(e[r],e[r+1],e[r+2]));var s=this.vertices,l=[],c=(r=0,0);for(a=t.length;r<a;r+=3,c++){var h=s[t[r]],u=s[t[r+1]],d=s[t[r+2]];l[c]=new b.Face3(h.index,u.index,d.index,[h.clone(),u.clone(),d.clone()])}var p=new b.Vector3;for(r=0,a=l.length;r<a;r++)k(l[r],i);for(r=0,a=this.faceVertexUvs[0].length;r<a;r++){var m=this.faceVertexUvs[0][r],v=m[0].x,f=m[1].x,y=m[2].x,w=Math.max(v,Math.max(f,y)),g=Math.min(v,Math.min(f,y));w>.9&&g<.1&&(v<.2&&(m[0].x+=1),f<.2&&(m[1].x+=1),y<.2&&(m[2].x+=1))}for(r=0,a=this.vertices.length;r<a;r++)this.vertices[r].multiplyScalar(n);function x(e){var t=e.normalize().clone();t.index=o.vertices.push(t)-1;var n=T(e)/2/Math.PI+.5,i=function(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}(e)/Math.PI+.5;return t.uv=new b.Vector2(n,1-i),t}function M(e,t,n){var i=new b.Face3(e.index,t.index,n.index,[e.clone(),t.clone(),n.clone()]);o.faces.push(i),p.copy(e).add(t).add(n).divideScalar(3);var r=T(p);o.faceVertexUvs[0].push([z(e.uv,e,r),z(t.uv,t,r),z(n.uv,n,r)])}function k(e,t){for(var n=Math.pow(2,t),i=(Math.pow(4,t),x(o.vertices[e.a])),r=x(o.vertices[e.b]),a=x(o.vertices[e.c]),s=[],l=0;l<=n;l++){s[l]=[];for(var c=x(i.clone().lerp(a,l/n)),h=x(r.clone().lerp(a,l/n)),u=n-l,d=0;d<=u;d++)s[l][d]=0==d&&l==n?c:x(c.clone().lerp(h,d/u))}for(l=0;l<n;l++)for(d=0;d<2*(n-l)-1;d++){var p=Math.floor(d/2);d%2==0?M(s[l][p+1],s[l+1][p],s[l][p]):M(s[l][p+1],s[l+1][p+1],s[l+1][p])}}function T(e){return Math.atan2(e.z,-e.x)}function z(e,t,n){return n<0&&1===e.x&&(e=new b.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new b.Vector2(n/2/Math.PI+.5,e.y)),e.clone()}this.mergeVertices(),this.computeFaceNormals(),this.boundingSphere=new b.Sphere(new b.Vector3,n)},b.PolyhedronGeometry.prototype=Object.create(b.Geometry.prototype)),void 0===b.OctahedronGeometry&&(b.OctahedronGeometry=function(e,t){this.parameters={radius:e,detail:t};b.PolyhedronGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type=\"OctahedronGeometry\",this.parameters={radius:e,detail:t}},b.OctahedronGeometry.prototype=Object.create(b.Geometry.prototype)),void 0===b.TorusGeometry&&(b.TorusGeometry=function(e,t,n,i,o){b.Geometry.call(this),this.type=\"TorusGeometry\",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:o},e=e||100,t=t||40,n=n||8,i=i||6,o=o||2*Math.PI;for(var r=new b.Vector3,a=[],s=[],l=0;l<=n;l++)for(var c=0;c<=i;c++){var h=c/i*o,u=l/n*Math.PI*2;r.x=e*Math.cos(h),r.y=e*Math.sin(h);var d=new b.Vector3;d.x=(e+t*Math.cos(u))*Math.cos(h),d.y=(e+t*Math.cos(u))*Math.sin(h),d.z=t*Math.sin(u),this.vertices.push(d),a.push(new b.Vector2(c/i,l/n)),s.push(d.clone().sub(r).normalize())}for(l=1;l<=n;l++)for(c=1;c<=i;c++){var p=(i+1)*l+c-1,m=(i+1)*(l-1)+c-1,v=(i+1)*(l-1)+c,f=(i+1)*l+c,y=new b.Face3(p,m,f,[s[p].clone(),s[m].clone(),s[f].clone()]);this.faces.push(y),this.faceVertexUvs[0].push([a[p].clone(),a[m].clone(),a[f].clone()]),y=new b.Face3(m,v,f,[s[m].clone(),s[v].clone(),s[f].clone()]),this.faces.push(y),this.faceVertexUvs[0].push([a[m].clone(),a[v].clone(),a[f].clone()])}this.computeFaceNormals()},b.TorusGeometry.prototype=Object.create(b.Geometry.prototype));var n=function(e,t,n){var i=new b.Geometry;n=n||1;for(var o=0;o<=64*n;++o)\"x\"==t&&i.vertices.push(new b.Vector3(0,Math.cos(o/32*Math.PI),Math.sin(o/32*Math.PI)).multiplyScalar(e)),\"y\"==t&&i.vertices.push(new b.Vector3(Math.cos(o/32*Math.PI),0,Math.sin(o/32*Math.PI)).multiplyScalar(e)),\"z\"==t&&i.vertices.push(new b.Vector3(Math.sin(o/32*Math.PI),Math.cos(o/32*Math.PI),0).multiplyScalar(e));return i},i=function(e,t,n,i,o,r){var a=new b.Geometry,s=new b.Mesh(new b.CylinderGeometry(e,t,n,i,o,r));return s.position.y=.5,s.updateMatrix(),a.merge(s.geometry,s.matrix),a},o=function(e){var t=new b.Geometry;return\"X\"===e?t.vertices.push(new b.Vector3(0,0,0),new b.Vector3(1,0,0)):\"Y\"===e?t.vertices.push(new b.Vector3(0,0,0),new b.Vector3(0,1,0)):\"Z\"===e&&t.vertices.push(new b.Vector3(0,0,0),new b.Vector3(0,0,1)),t};b.TransformGizmo=function(){var e=this;this.init=function(){b.Object3D.call(this),this.handles=new b.Object3D,this.pickers=new b.Object3D,this.planes=new b.Object3D,this.highlights=new b.Object3D,this.hemiPicker=new b.Object3D,this.subPickers=new b.Object3D,this.add(this.handles),this.add(this.pickers),this.add(this.planes),this.add(this.highlights),this.add(this.hemiPicker),this.add(this.subPickers);var e=new b.PlaneBufferGeometry(50,50,2,2),t=new b.MeshBasicMaterial({wireframe:!0});t.side=b.DoubleSide;var n={XY:new b.Mesh(e,t),YZ:new b.Mesh(e,t),XZ:new b.Mesh(e,t),XYZE:new b.Mesh(e,t)};for(var i in this.activePlane=n.XYZE,n.YZ.rotation.set(0,Math.PI/2,0),n.XZ.rotation.set(-Math.PI/2,0,0),n)n[i].name=i,this.planes.add(n[i]),this.planes[i]=n[i],n[i].visible=!1;this.setupGizmos(),this.activeMode=\"\",this.traverse(function(e){if(e instanceof b.Mesh){e.updateMatrix();var t=new b.Geometry;e.geometry instanceof b.BufferGeometry&&(e.geometry=(new b.Geometry).fromBufferGeometry(e.geometry)),t.merge(e.geometry,e.matrix),e.geometry=t,e.position.set(0,0,0),e.rotation.set(0,0,0),e.scale.set(1,1,1)}})},this.hide=function(){this.traverse(function(e){e.visible=!1})},this.show=function(){this.traverse(function(t){t.visible=!0,t.parent!=e.pickers&&t.parent!=e.hemiPicker||(t.visible=!1),t.parent==e.planes&&(t.visible=!1)}),this.activePlane.visible=!1},this.highlight=function(e){this.traverse(function(t){t.material&&t.material.highlight&&(t.name==e?t.material.highlight(!0):t.material.highlight(!1))})},this.setupGizmos=function(){var e=function(e,t){for(var n in e)for(var i=e[n].length;i--;){var o=e[n][i][0],r=e[n][i][1],a=e[n][i][2],s=e[n][i][3];o.name=n,r&&o.position.set(r[0],r[1],r[2]),a&&o.rotation.set(a[0],a[1],a[2]),s&&(o.visble=s),t.add(o)}};this.setHandlePickerGizmos(),e(this.handleGizmos,this.handles),e(this.pickerGizmos,this.pickers),e(this.highlightGizmos,this.highlights),e(this.hemiPickerGizmos,this.hemiPicker),e(this.subPickerGizmos,this.subPickers),this.hide(),this.show()}},b.TransformGizmo.prototype=Object.create(b.Object3D.prototype),b.TransformGizmo.prototype.update=function(e,t){var n=new b.Vector3(0,0,0),i=new b.Vector3(0,1,0),o=new b.Matrix4;this.traverse(function(r){r.name&&(-1!=r.name.search(\"E\")?r.quaternion.setFromRotationMatrix(o.lookAt(t,n,i)):-1==r.name.search(\"X\")&&-1==r.name.search(\"Y\")&&-1==r.name.search(\"Z\")||r.quaternion.setFromEuler(e))})},b.TransformGizmoTranslate=function(){b.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){var n=i(0,.05,.2,12,1,!1),r=o(\"X\"),a=o(\"Y\"),s=o(\"Z\");this.handleGizmos={X:[[new b.Mesh(n,new e({color:15805484})),[.5,0,0],[0,0,-Math.PI/2]],[new b.Line(r,new t({color:15805484}))]],Y:[[new b.Mesh(n,new e({color:768011})),[0,.5,0]],[new b.Line(a,new t({color:768011}))]],Z:[[new b.Mesh(n,new e({color:2895089})),[0,0,.5],[Math.PI/2,0,0]],[new b.Line(s,new t({color:2895089}))]],XYZ:[[new b.Mesh(new b.OctahedronGeometry(.1,0),new e({color:16777215,opacity:.25})),[0,0,0],[0,0,0]]],XY:[[new b.Mesh(new b.PlaneBufferGeometry(.29,.29),new e({color:16776960,opacity:.25})),[.15,.15,0]]],YZ:[[new b.Mesh(new b.PlaneBufferGeometry(.29,.29),new e({color:65535,opacity:.25})),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new b.Mesh(new b.PlaneBufferGeometry(.29,.29),new e({color:16711935,opacity:.25})),[.15,0,.15],[-Math.PI/2,0,0]]]},this.pickerGizmos={X:[[new b.Mesh(new b.CylinderGeometry(.2,0,1,4,1,!1),new e({color:16711680,opacity:.25})),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new b.Mesh(new b.CylinderGeometry(.2,0,1,4,1,!1),new e({color:65280,opacity:.25})),[0,.6,0]]],Z:[[new b.Mesh(new b.CylinderGeometry(.2,0,1,4,1,!1),new e({color:255,opacity:.25})),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new b.Mesh(new b.OctahedronGeometry(.2,0),new e({color:16777215,opacity:.25}))]],XY:[[new b.Mesh(new b.PlaneBufferGeometry(.4,.4),new e({color:16776960,opacity:.25})),[.2,.2,0]]],YZ:[[new b.Mesh(new b.PlaneBufferGeometry(.4,.4),new e({color:65535,opacity:.25})),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new b.Mesh(new b.PlaneBufferGeometry(.4,.4),new e({color:16711935,opacity:.25})),[.2,0,.2],[-Math.PI/2,0,0]]]},this.hemiPickerGizmos={XYZ:[[new b.Mesh(new b.BoxGeometry(1.2,1.2,1.2),new e({color:255})),[.5,.5,.5],null,!1]]}},this.setActivePlane=function(e,t){var n=new b.Matrix4;t.applyMatrix4(n.getInverse(n.extractRotation(this.planes.XY.matrixWorld))),\"X\"==e&&(this.activePlane=this.planes.XY,Math.abs(t.y)>Math.abs(t.z)&&(this.activePlane=this.planes.XZ)),\"Y\"==e&&(this.activePlane=this.planes.XY,Math.abs(t.x)>Math.abs(t.z)&&(this.activePlane=this.planes.YZ)),\"Z\"==e&&(this.activePlane=this.planes.XZ,Math.abs(t.x)>Math.abs(t.y)&&(this.activePlane=this.planes.YZ)),\"XYZ\"==e&&(this.activePlane=this.planes.XYZE),\"XY\"==e&&(this.activePlane=this.planes.XY),\"YZ\"==e&&(this.activePlane=this.planes.YZ),\"XZ\"==e&&(this.activePlane=this.planes.XZ),this.hide(),this.show()},this.init()},b.TransformGizmoTranslate.prototype=Object.create(b.TransformGizmo.prototype),b.TransformGizmoRotate=function(){b.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){this.handleGizmos={RX:[[new b.Line(n(1,\"x\",.5),new t({color:16711680}))]],RY:[[new b.Line(n(1,\"y\",.5),new t({color:65280}))]],RZ:[[new b.Line(n(1,\"z\",.5),new t({color:255}))]],RE:[[new b.Line(n(1.25,\"z\",1),new t({color:65535}))]],RXYZE:[[new b.Line(n(1,\"z\",1),new t({color:16711935}))]]},this.pickerGizmos={RX:[[new b.Mesh(new b.TorusGeometry(1,.12,4,12,Math.PI),new e({color:16711680,opacity:.25})),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],RY:[[new b.Mesh(new b.TorusGeometry(1,.12,4,12,Math.PI),new e({color:65280,opacity:.25})),[0,0,0],[Math.PI/2,0,0]]],RZ:[[new b.Mesh(new b.TorusGeometry(1,.12,4,12,Math.PI),new e({color:255,opacity:.25})),[0,0,0],[0,0,-Math.PI/2]]],RE:[[new b.Mesh(new b.TorusGeometry(1.25,.12,2,24),new e({color:65535,opacity:.25}))]],RXYZE:[[new b.Mesh(new b.TorusGeometry(1,.12,2,24),new e({color:16711935,opacity:.25}))]]}},this.setActivePlane=function(e){\"RE\"==e&&(this.activePlane=this.planes.XYZE),\"RX\"==e&&(this.activePlane=this.planes.YZ),\"RY\"==e&&(this.activePlane=this.planes.XZ),\"RZ\"==e&&(this.activePlane=this.planes.XY),this.hide(),this.show()},this.update=function(e,t){b.TransformGizmo.prototype.update.apply(this,arguments);var n=new b.Matrix4,i=new b.Euler(0,0,1),o=new b.Quaternion,r=new b.Vector3(1,0,0),a=new b.Vector3(0,1,0),s=new b.Vector3(0,0,1),l=new b.Quaternion,c=new b.Quaternion,h=new b.Quaternion,u=t.clone();i.copy(this.planes.XY.rotation),o.setFromEuler(i),n.makeRotationFromQuaternion(o).getInverse(n),u.applyMatrix4(n),this.traverse(function(e){o.setFromEuler(i),\"RX\"==e.name&&(l.setFromAxisAngle(r,Math.atan2(-u.y,u.z)),o.multiplyQuaternions(o,l),e.quaternion.copy(o)),\"RY\"==e.name&&(c.setFromAxisAngle(a,Math.atan2(u.x,u.z)),o.multiplyQuaternions(o,c),e.quaternion.copy(o)),\"RZ\"==e.name&&(h.setFromAxisAngle(s,Math.atan2(u.y,u.x)),o.multiplyQuaternions(o,h),e.quaternion.copy(o))})},this.init()},b.TransformGizmoRotate.prototype=Object.create(b.TransformGizmo.prototype),b.TransformGizmoTranslateRotate=function(){b.TransformGizmo.call(this);var t=this;this.setHandlePickerGizmos=function(){var t=i(0,.05,.2,12,1,!1);(new b.Geometry).vertices.push(new b.Vector3(0,0,-.1),new b.Vector3(0,0,.1),new b.Vector3(-.1,0,0),new b.Vector3(.1,0,0));this.handleGizmos={Z:[[new b.Mesh(t,new e({color:16777215})),[0,0,.25],[Math.PI/2,0,0]],[new b.Mesh(new b.CylinderGeometry(.015,.015,.6,4,1,!1),new e({color:16777215})),[0,0,.5],[Math.PI/2,0,0]]],RX:[[new b.Mesh(new b.TorusGeometry(1,.015,12,60,.3*Math.PI),new e({color:16711680})),[0,0,0],[.15*Math.PI,-Math.PI/2,0]],[new b.Mesh(new b.CylinderGeometry(.05,.05,.015,60,1,!1),new e({color:16711680})),[0,0,1],[Math.PI/2,0,0]]],RY:[[new b.Mesh(new b.TorusGeometry(1,.015,12,60,.3*Math.PI),new e({color:255})),[0,0,0],[Math.PI/2,0,.35*Math.PI]],[new b.Mesh(new b.CylinderGeometry(.05,.05,.01,60,1,!1),new e({color:255})),[0,0,1]]]},this.pickerGizmos={Z:[[new b.Mesh(new b.CylinderGeometry(.12,.12,.65,4,1,!1),new e({color:255,opacity:.25})),[0,0,.5],[Math.PI/2,0,0]]],RX:[[new b.Mesh(new b.TorusGeometry(1,.12,4,12,.3*Math.PI),new e({color:16711680,opacity:.25})),[0,0,0],[.15*Math.PI,-Math.PI/2,0]]],RY:[[new b.Mesh(new b.TorusGeometry(1,.12,4,12,.3*Math.PI),new e({color:255,opacity:.25})),[0,0,0],[Math.PI/2,0,.35*Math.PI]]]},this.subPickerGizmos={Z:[[new b.Mesh(new b.CylinderGeometry(.12,.12,.65,4,1,!1),new e({color:255,opacity:.25})),[0,0,.5],[Math.PI/2,0,0]]]},this.highlightGizmos={Z:[],RX:[[new b.Mesh(new b.TorusGeometry(1,.02,12,60,2*Math.PI),new e({color:16711680,opacity:1})),[0,0,0],[0,-Math.PI/2,-Math.PI/2],!1]],RY:[[new b.Mesh(new b.TorusGeometry(1,.02,12,60,2*Math.PI),new e({color:255,opacity:1})),[0,0,0],[Math.PI/2,0,0],!1]]},this.hemiPickerGizmos={XYZ:[[new b.Mesh(new b.SphereGeometry(1.2,8,8,0,Math.PI),new e({color:255})),null,null,!1]]}},this.setActivePlane=function(e,t){if(\"translate\"==this.activeMode){var n=new b.Matrix4;t.applyMatrix4(n.getInverse(n.extractRotation(this.planes.XY.matrixWorld))),\"X\"==e&&(this.activePlane=this.planes.XY,Math.abs(t.y)>Math.abs(t.z)&&(this.activePlane=this.planes.XZ)),\"Y\"==e&&(this.activePlane=this.planes.XY,Math.abs(t.x)>Math.abs(t.z)&&(this.activePlane=this.planes.YZ)),\"Z\"==e&&(this.activePlane=this.planes.XZ,Math.abs(t.x)>Math.abs(t.y)&&(this.activePlane=this.planes.YZ))}else\"rotate\"==this.activeMode&&(\"RX\"==e&&(this.activePlane=this.planes.YZ),\"RY\"==e&&(this.activePlane=this.planes.XZ),\"RZ\"==e&&(this.activePlane=this.planes.XY));this.hide(),this.show()},this.update=function(e,t){if(\"translate\"==this.activeMode)b.TransformGizmo.prototype.update.apply(this,arguments);else if(\"rotate\"==this.activeMode){b.TransformGizmo.prototype.update.apply(this,arguments);var n=new b.Matrix4,i=new b.Euler(0,0,1),o=new b.Quaternion,r=new b.Vector3(1,0,0),a=new b.Vector3(0,1,0),s=new b.Vector3(0,0,1),l=new b.Quaternion,c=new b.Quaternion,h=new b.Quaternion,u=t.clone();i.copy(this.planes.XY.rotation),o.setFromEuler(i),n.makeRotationFromQuaternion(o).getInverse(n),u.applyMatrix4(n),this.traverse(function(e){o.setFromEuler(i),\"RX\"==e.name&&(l.setFromAxisAngle(r,Math.atan2(-u.y,u.z)),o.multiplyQuaternions(o,l),e.quaternion.copy(o)),\"RY\"==e.name&&(c.setFromAxisAngle(a,Math.atan2(u.x,u.z)),o.multiplyQuaternions(o,c),e.quaternion.copy(o)),\"RZ\"==e.name&&(h.setFromAxisAngle(s,Math.atan2(u.y,u.x)),o.multiplyQuaternions(o,h),e.quaternion.copy(o))})}},this.show=function(){this.traverse(function(e){(null==t.parent||t.parent.useAllPickers||e.parent!=t.handles)&&(e.visible=!0),e.material&&(e.material.opacity=e.material.oldOpacity),e.parent!=t.pickers&&e.parent!=t.hemiPicker&&e.parent!=t.subPickers||(e.visible=!1),e.parent!=t.planes&&e.parent!=t.highlights||(e.visible=!1)}),this.activePlane.visible=!1},this.highlight=function(e){this.traverse(function(n){n.material&&n.material.highlight&&(n.name==e?(n.parent!=t.highlights&&n.parent!=t.handles||(n.visible=!0),n.material.highlight(!0)):(n.material.highlight(!1),n.material.opacity=.1))})},this.init()},b.TransformGizmoTranslateRotate.prototype=Object.create(b.TransformGizmo.prototype),b.TransformGizmoScale=function(){b.TransformGizmo.call(this),this.setHandlePickerGizmos=function(){var n=i(.125,.125,.125),r=o(\"X\"),a=o(\"Y\"),s=o(\"Z\");this.handleGizmos={X:[[new b.Mesh(n,new e({color:16711680})),[.5,0,0],[0,0,-Math.PI/2]],[new b.Line(r,new t({color:16711680}))]],Y:[[new b.Mesh(n,new e({color:65280})),[0,.5,0]],[new b.Line(a,new t({color:65280}))]],Z:[[new b.Mesh(n,new e({color:255})),[0,0,.5],[Math.PI/2,0,0]],[new b.Line(s,new t({color:255}))]],XYZ:[[new b.Mesh(new b.BoxGeometry(.125,.125,.125),new e({color:16777215,opacity:.25}))]]},this.pickerGizmos={X:[[new b.Mesh(new b.CylinderGeometry(.2,0,1,4,1,!1),new e({color:16711680,opacity:.25})),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new b.Mesh(new b.CylinderGeometry(.2,0,1,4,1,!1),new e({color:65280,opacity:.25})),[0,.6,0]]],Z:[[new b.Mesh(new b.CylinderGeometry(.2,0,1,4,1,!1),new e({color:255,opacity:.25})),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new b.Mesh(new b.BoxGeometry(.4,.4,.4),new e({color:16777215,opacity:.25}))]]}},this.setActivePlane=function(e,t){var n=new b.Matrix4;t.applyMatrix4(n.getInverse(n.extractRotation(this.planes.XY.matrixWorld))),\"X\"==e&&(this.activePlane=this.planes.XY,Math.abs(t.y)>Math.abs(t.z)&&(this.activePlane=this.planes.XZ)),\"Y\"==e&&(this.activePlane=this.planes.XY,Math.abs(t.x)>Math.abs(t.z)&&(this.activePlane=this.planes.YZ)),\"Z\"==e&&(this.activePlane=this.planes.XZ,Math.abs(t.x)>Math.abs(t.y)&&(this.activePlane=this.planes.YZ)),\"XYZ\"==e&&(this.activePlane=this.planes.XYZE),this.hide(),this.show()},this.init()},b.TransformGizmoScale.prototype=Object.create(b.TransformGizmo.prototype),b.TransformControls=function(e,t,n){switch(b.Object3D.call(this),t=void 0!==t?t:document,this.gizmo={},n){case\"translate\":this.gizmo[n]=new b.TransformGizmoTranslate;break;case\"rotate\":this.gizmo[n]=new b.TransformGizmoRotate;break;case\"transrotate\":this.gizmo[n]=new b.TransformGizmoTranslateRotate;break;case\"scale\":this.gizmo[n]=new b.TransformGizmoScale}if(this.add(this.gizmo[n]),this.gizmo[n].hide(),this.object=void 0,this.snap=null,this.snapDelta=0,this.space=\"world\",this.size=1,this.axis=null,this.useAllPickers=!0,this.unitX=new b.Vector3(1,0,0),this.unitY=new b.Vector3(0,1,0),this.unitZ=new b.Vector3(0,0,1),this.normal=new b.Vector3(0,0,1),\"transrotate\"===n){(o=new b.Geometry).vertices.push(new b.Vector3(0,0,0),new b.Vector3(0,0,1));var i=new b.LineBasicMaterial({color:0,linewidth:2,depthTest:!1});this.startLine=new b.Line(o,i);var o=new b.Geometry;i=new b.LineBasicMaterial({color:16770563,linewidth:2,depthTest:!1});o.vertices.push(new b.Vector3(0,0,0),new b.Vector3(0,0,1)),this.endLine=new b.Line(o,i);o=new b.Geometry,i=new b.LineDashedMaterial({color:0,linewidth:1,depthTest:!1});o.vertices.push(new b.Vector3(0,-1,0),new b.Vector3(0,1,0)),this.centerLine=new b.Line(o,i),(r=b.ImageUtils.loadTexture(x.Viewing.Private.getResourceUrl(\"res/textures/centerMarker_X.png\"))).magFilter=r.minFilter=b.NearestFilter;var r;o=new b.CircleGeometry(.1,32),i=new b.MeshBasicMaterial({opacity:1,side:b.DoubleSide,transparent:!0,map:r});this.centerMark=new b.Mesh(o,i),this.centerMark.rotation.set(Math.PI/2,0,0),this.ticks={},(r=b.ImageUtils.loadTexture(x.Viewing.Private.getResourceUrl(\"res/textures/cardinalPoint.png\"))).magFilter=r.minFilter=b.NearestFilter;i=new b.MeshBasicMaterial({depthTest:!1,opacity:1,transparent:!0,side:b.DoubleSide,map:r});var a=.25;this.ticks.RX=new b.Object3D;o=new b.PlaneBufferGeometry(.12,a);var s=new b.Mesh(o,i);s.position.set(0,0,-1.275),s.rotation.set(Math.PI/2,Math.PI/2,0),this.ticks.RX.add(s),(s=s.clone()).position.set(0,1.275,0),s.rotation.set(0,Math.PI/2,0),this.ticks.RX.add(s),(s=s.clone()).position.set(0,0,1.275),s.rotation.set(0,Math.PI/2,Math.PI/2),this.ticks.RX.add(s),(s=s.clone()).position.set(0,-1.275,0),s.rotation.set(0,Math.PI/2,0),this.ticks.RX.add(s),this.ticks.RY=new b.Object3D,(s=s.clone()).position.set(0,0,-1.275),s.rotation.set(Math.PI/2,0,0),this.ticks.RY.add(s),(s=s.clone()).position.set(-1.275,0,0),s.rotation.set(Math.PI/2,0,Math.PI/2),this.ticks.RY.add(s),(s=s.clone()).position.set(0,0,1.275),s.rotation.set(Math.PI/2,0,0),this.ticks.RY.add(s),(s=s.clone()).position.set(1.275,0,0),s.rotation.set(Math.PI/2,0,Math.PI/2),this.ticks.RY.add(s)}var l=this,c=!1,h=n,u={type:\"change\"},d={type:\"mouseDown\"},p={type:\"mouseUp\",mode:h},m={type:\"objectChange\"},v=new b.Raycaster,f=new b.Vector3,y=new b.Vector3,w=new b.Vector3,g=new b.Vector3,M=new b.Vector3,k=new b.Vector3,T=1,z=new b.Matrix4,I=new b.Vector3,P=new b.Matrix4,_=new b.Vector3,E=new b.Quaternion,O=new b.Vector3,C=new b.Vector3,V=new b.Vector3,j=new b.Quaternion,G=new b.Quaternion,A=new b.Quaternion,S=new b.Quaternion,L=new b.Quaternion,R=new b.Vector3,F=new b.Vector3,D=new b.Matrix4,Y=new b.Matrix4,N=new b.Vector3,X=new b.Vector3,Z=new b.Euler,B=new b.Matrix4,W=new b.Vector3;new b.Euler;function Q(n,i){var o=t.getBoundingClientRect(),r=(n.clientX-o.left)/o.width*2-1,a=-(n.clientY-o.top)/o.height*2+1;e.isPerspective?(f.set(r,a,.5),f.unproject(e),v.set(e.position,f.sub(e.position).normalize())):(f.set(r,a,-1),f.unproject(e),y.set(0,0,-1),v.set(f,y.transformDirection(e.matrixWorld)));var s=v.intersectObjects(i,!0);return!!s[0]&&s[0]}this.attach=function(e){l.object=e,this.gizmo[h].show(),l.update(),l.updateUnitVectors()},this.detach=function(e){l.object=void 0,this.axis=null,this.gizmo[h].hide()},this.setMode=function(e){\"scale\"==(h=e||h)&&(l.space=\"local\"),this.gizmo[h].show(),this.update(),l.dispatchEvent(u)},this.getPicker=function(){return l.gizmo[h].hemiPicker.children},this.setPosition=function(e){this.object.position.copy(e),this.update()},this.setNormal=function(e){E.setFromUnitVectors(this.normal,e),this.unitX.applyQuaternion(E),this.unitY.applyQuaternion(E),this.unitZ.applyQuaternion(E),this.normal.copy(e),this.object&&this.object.quaternion.multiply(E),this.update()},this.setSnap=function(e,t){l.snap=e,l.snapDelta=t},this.setSize=function(e){l.size=e,this.update(),l.dispatchEvent(u)},this.setSpace=function(e){l.space=e,this.update(),l.dispatchEvent(u)},this.update=function(n){if(void 0!==l.object){l.object.updateMatrixWorld(),X.setFromMatrixPosition(l.object.matrixWorld),Z.setFromRotationMatrix(P.extractRotation(l.object.matrixWorld)),e.updateMatrixWorld(),W.setFromMatrixPosition(e.matrixWorld),this.position.copy(X),this.quaternion.setFromEuler(Z),this.normal.set(0,0,1),this.normal.applyEuler(Z);var i=X.distanceTo(W),o=e.isPerspective?2*Math.tan(e.fov*Math.PI/360)*i:i,r=t.getBoundingClientRect();T=100*o/r.height,this.scale.set(T,T,T),n&&this.gizmo[h].highlight(l.axis)}},this.updateUnitVectors=function(){this.unitX.set(1,0,0),this.unitY.set(0,1,0),this.unitZ.set(0,0,1),this.unitX.applyEuler(Z),this.unitY.applyEuler(Z),this.unitZ.applyEuler(Z)},this.showRotationGizmos=function(e){for(var t=this.gizmo[h].handles.children,n=0;n<t.length;n++){var i=t[n];i.visible=!0,-1!==i.name.search(\"R\")&&(i.visible=e)}this.useAllPickers=e},this.highlight=function(){this.gizmo[h].highlight(this.axis||\"Z\")},this.onPointerHover=function(e){if(void 0===l.object||!0===c)return!1;var t=Q(e.pointers?e.pointers[0]:e,l.useAllPickers?l.gizmo[h].pickers.children:l.gizmo[h].subPickers.children),n=null,i=\"\";return t&&(i=-1!=(n=t.object.name).search(\"R\")?\"rotate\":\"translate\"),l.axis!==n&&(l.axis=n,l.gizmo[h].activeMode=i,l.update(!0),l.dispatchEvent(u)),null===l.axis&&l.gizmo[h].show(),!!t},this.onPointerDown=function(t){if(void 0===l.object||!0===c)return!1;var n=t.pointers?t.pointers[0]:t;if(\"touch\"===t.pointerType){var i=null,o=\"\";(r=Q(n,l.useAllPickers?l.gizmo[h].pickers.children:l.gizmo[h].subPickers.children))&&(o=-1!=(i=r.object.name).search(\"R\")?\"rotate\":\"translate\"),l.axis!==i&&(l.axis=i,l.gizmo[h].activeMode=o)}var r=null;if((0===n.button||void 0===n.button)&&(r=Q(n,l.useAllPickers?l.gizmo[h].pickers.children:l.gizmo[h].subPickers.children))){l.dispatchEvent(d),l.axis=r.object.name,l.update(),I.copy(e.position).sub(X).normalize(),l.gizmo[h].setActivePlane(l.axis,I);var a=Q(n,[l.gizmo[h].activePlane]);if(a&&g.copy(a.point),R.copy(l.object.position),F.copy(l.object.scale),D.extractRotation(l.object.matrix),B.extractRotation(l.object.matrixWorld),l.object.parent?(Y.extractRotation(l.object.parent.matrixWorld),N.setFromMatrixScale(P.getInverse(l.object.parent.matrixWorld))):(Y.extractRotation(l.object.matrixWorld),N.setFromMatrixScale(P.getInverse(l.object.matrixWorld))),\"transrotate\"===h&&\"rotate\"===l.gizmo[h].activeMode){l.startLine.geometry.vertices[0].set(0,0,0).applyMatrix4(l.matrixWorld),l.startLine.geometry.vertices[1].set(0,0,1).applyMatrix4(l.matrixWorld),l.startLine.geometry.verticesNeedUpdate=!0,l.parent.add(l.startLine);var s=l.object.geometry.getAttribute(\"position\"),u=(new b.Vector3).fromAttribute(s,0).applyMatrix4(l.object.matrixWorld),p=(new b.Vector3).fromAttribute(s,1).applyMatrix4(l.object.matrixWorld),m=(new b.Vector3).fromAttribute(s,2).applyMatrix4(l.object.matrixWorld),v=(new b.Vector3).fromAttribute(s,3).applyMatrix4(l.object.matrixWorld);if(\"RX\"===l.axis){u.lerp(m,.5),p.lerp(v,.5);var f=u.distanceTo(p);l.centerLine.material.dashSize=f/15,l.centerLine.material.gapSize=f/30,l.centerLine.geometry.vertices[0].copy(u),l.centerLine.geometry.vertices[1].copy(p)}else{u.lerp(p,.5),m.lerp(v,.5);f=u.distanceTo(m);l.centerLine.material.dashSize=f/15,l.centerLine.material.gapSize=f/30,l.centerLine.geometry.vertices[0].copy(u),l.centerLine.geometry.vertices[1].copy(m)}l.centerLine.geometry.computeLineDistances(),l.centerLine.geometry.verticesNeedUpdate=!0,l.parent.add(l.centerLine),l.ticks[l.axis].position.copy(l.position),l.ticks[l.axis].quaternion.copy(l.quaternion),l.ticks[l.axis].scale.copy(l.scale),l.parent.add(l.ticks[l.axis])}}return c=!0,!!r},this.onPointerMove=function(e){if(void 0===l.object||null===l.axis||!1===c)return!1;var t=Q(e.pointers?e.pointers[0]:e,[l.gizmo[h].activePlane]);t&&w.copy(t.point);var n=l.gizmo[h].activeMode;if(\"translate\"==n)w.sub(g),w.multiply(N),\"local\"==l.space&&(w.applyMatrix4(P.getInverse(B)),O.copy(this.unitX),C.copy(this.unitY),V.copy(this.unitZ),_.set(0,0,0),-1!=l.axis.search(\"X\")&&(O.multiplyScalar(w.dot(this.unitX)),_.add(O)),-1!=l.axis.search(\"Y\")&&(C.multiplyScalar(w.dot(this.unitY)),_.add(C)),-1!=l.axis.search(\"Z\")&&(V.multiplyScalar(w.dot(this.unitZ)),_.add(V)),w.copy(_),w.applyMatrix4(D),l.object.position.copy(R),l.object.position.add(w)),\"world\"!=l.space&&-1==l.axis.search(\"XYZ\")||(O.copy(this.unitX),C.copy(this.unitY),V.copy(this.unitZ),_.set(0,0,0),-1!=l.axis.search(\"X\")&&(O.multiplyScalar(w.dot(this.unitX)),_.add(O)),-1!=l.axis.search(\"Y\")&&(C.multiplyScalar(w.dot(this.unitY)),_.add(C)),-1!=l.axis.search(\"Z\")&&(V.multiplyScalar(w.dot(this.unitZ)),_.add(V)),w.copy(_),w.applyMatrix4(P.getInverse(Y)),l.object.position.copy(R),l.object.position.add(w));else if(\"scale\"==n)w.sub(g),w.multiply(N),\"local\"==l.space&&(\"XYZ\"==l.axis?(T=1+w.y/50,l.object.scale.x=F.x*T,l.object.scale.y=F.y*T,l.object.scale.z=F.z*T):(w.applyMatrix4(P.getInverse(B)),\"X\"==l.axis&&(l.object.scale.x=F.x*(1+w.x/50)),\"Y\"==l.axis&&(l.object.scale.y=F.y*(1+w.y/50)),\"Z\"==l.axis&&(l.object.scale.z=F.z*(1+w.z/50))));else if(\"rotate\"==n){if(w.sub(X),w.multiply(N),_.copy(g).sub(X),_.multiply(N),\"RE\"==l.axis){w.applyMatrix4(P.getInverse(z)),_.applyMatrix4(P.getInverse(z)),M.set(Math.atan2(w.z,w.y),Math.atan2(w.x,w.z),Math.atan2(w.y,w.x)),k.set(Math.atan2(_.z,_.y),Math.atan2(_.x,_.z),Math.atan2(_.y,_.x)),E.setFromRotationMatrix(P.getInverse(Y));var i=M.z-k.z;if(null!==l.snap){var o=Math.round(i/l.snap)*l.snap;Math.abs(o-i)<l.snapDelta&&(i=o)}L.setFromAxisAngle(I,i),j.setFromRotationMatrix(B),E.multiplyQuaternions(E,L),E.multiplyQuaternions(E,j),l.object.quaternion.copy(E)}else if(\"RXYZE\"==l.axis){var r=w.clone().cross(_).normalize();E.setFromRotationMatrix(P.getInverse(Y));var a=-w.clone().angleTo(_);if(null!==l.snap){o=Math.round(a/l.snap)*l.snap;Math.abs(o-a)<l.snapDelta&&(a=o)}G.setFromAxisAngle(r,a),j.setFromRotationMatrix(B),E.multiplyQuaternions(E,G),E.multiplyQuaternions(E,j),l.object.quaternion.copy(E)}else if(\"local\"==l.space){w.applyMatrix4(P.getInverse(B)),_.applyMatrix4(P.getInverse(B));var s=w.dot(this.unitX),d=w.dot(this.unitY),p=w.dot(this.unitZ),v=_.dot(this.unitX),f=_.dot(this.unitY),y=_.dot(this.unitZ);M.set(Math.atan2(p,d),Math.atan2(s,p),Math.atan2(d,s)),k.set(Math.atan2(y,f),Math.atan2(v,y),Math.atan2(f,v));var x=M.x-k.x,b=M.y-k.y;i=M.z-k.z;if(null!==l.snap){if(-1!=l.axis.search(\"X\")){o=Math.round(x/l.snap)*l.snap;Math.abs(o-x)<l.snapDelta&&(x=o)}if(-1!=l.axis.search(\"Y\")){o=Math.round(b/l.snap)*l.snap;Math.abs(o-b)<l.snapDelta&&(b=o)}if(-1!=l.axis.search(\"Z\")){o=Math.round(i/l.snap)*l.snap;Math.abs(o-i)<l.snapDelta&&(i=o)}}G.setFromAxisAngle(this.unitX,x),A.setFromAxisAngle(this.unitY,b),S.setFromAxisAngle(this.unitZ,i),j.setFromRotationMatrix(D),\"RX\"==l.axis&&j.multiplyQuaternions(j,G),\"RY\"==l.axis&&j.multiplyQuaternions(j,A),\"RZ\"==l.axis&&j.multiplyQuaternions(j,S),l.object.quaternion.copy(j)}else if(\"world\"==l.space){s=w.dot(this.unitX),d=w.dot(this.unitY),p=w.dot(this.unitZ),v=_.dot(this.unitX),f=_.dot(this.unitY),y=_.dot(this.unitZ);M.set(Math.atan2(p,d),Math.atan2(s,p),Math.atan2(d,s)),k.set(Math.atan2(y,f),Math.atan2(v,y),Math.atan2(f,v)),E.setFromRotationMatrix(P.getInverse(Y));x=M.x-k.x,b=M.y-k.y,i=M.z-k.z;if(null!==l.snap){if(-1!=l.axis.search(\"X\")){o=Math.round(x/l.snap)*l.snap;Math.abs(o-x)<l.snapDelta&&(x=o)}if(-1!=l.axis.search(\"Y\")){o=Math.round(b/l.snap)*l.snap;Math.abs(o-b)<l.snapDelta&&(b=o)}if(-1!=l.axis.search(\"Z\")){o=Math.round(i/l.snap)*l.snap;Math.abs(o-i)<l.snapDelta&&(i=o)}}G.setFromAxisAngle(this.unitX,x),A.setFromAxisAngle(this.unitY,b),S.setFromAxisAngle(this.unitZ,i),j.setFromRotationMatrix(B),\"RX\"==l.axis&&E.multiplyQuaternions(E,G),\"RY\"==l.axis&&E.multiplyQuaternions(E,A),\"RZ\"==l.axis&&E.multiplyQuaternions(E,S),E.multiplyQuaternions(E,j),l.object.quaternion.copy(E)}\"transrotate\"===h&&(l.add(l.endLine),l.add(l.centerMark))}return l.object.matrixAutoUpdate=!0,l.update(!0),l.dispatchEvent(u),l.dispatchEvent(m),!!t},this.onPointerUp=function(e){return c&&null!==l.axis&&(p.mode=h,l.dispatchEvent(p)),c=!1,this.gizmo[h].show(),this.updateUnitVectors(),\"transrotate\"===h&&\"rotate\"===this.gizmo[h].activeMode&&(this.remove(this.endLine),this.remove(this.centerMark),this.parent.remove(this.centerLine),this.parent.remove(this.startLine),this.parent.remove(this.ticks[this.axis])),!1}},b.TransformControls.prototype=Object.create(b.Object3D.prototype)}();var M=window.Autodesk,k=window.THREE,T=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this)))._dbIds=[],n.active=!1,n._viewer=e,n._isDragging=!1,n.fullTransform=!1,n._transformMesh=null,n._selectedFragProxyMap={},n._transformControlTx=null,n._hitPoint=new k.Vector3,n.onTxChange=n.onTxChange.bind(Object(y.a)(Object(y.a)(n))),n.onAggregateSelectionChanged=n.onAggregateSelectionChanged.bind(Object(y.a)(Object(y.a)(n))),n.onCameraChanged=n.onCameraChanged.bind(Object(y.a)(Object(y.a)(n))),n._selectionMode=\"SELECTION_MODE_TRANSFORM\",n}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"getNames\",value:function(){return[\"Viewing.Transform.Tool\"]}},{key:\"getName\",value:function(){return\"Viewing.Transform.Tool\"}},{key:\"createTransformMesh\",value:function(){var e=new k.MeshPhongMaterial({color:16711680});this._viewer.impl.matman().addMaterial(\"transform-tool-material\",e,!0);var t=new k.Mesh(new k.SphereGeometry(1e-4,5),e);return t.position.set(0,0,0),t}},{key:\"onTxChange\",value:function(){if(this._isDragging&&this._transformControlTx.visible){var e=new k.Vector3(this._transformMesh.position.x-this._selection.model.offset.x,this._transformMesh.position.y-this._selection.model.offset.y,this._transformMesh.position.z-this._selection.model.offset.z);for(var t in this._selectedFragProxyMap){var n=this._selectedFragProxyMap[t],i=new k.Vector3(this._transformMesh.position.x-n.offset.x,this._transformMesh.position.y-n.offset.y,this._transformMesh.position.z-n.offset.z);n.position=i,n.updateAnimTransform()}this.emit(\"transform.translate\",{model:this._selection.model,translation:e})}this._viewer.impl.sceneUpdated(!0)}},{key:\"onCameraChanged\",value:function(){this._transformControlTx&&this._transformControlTx.update()}},{key:\"onAggregateSelectionChanged\",value:function(e){var t=this;switch(this._selectionMode){case\"SELECTION_MODE_TRANSFORM\":if(e.selections&&e.selections.length){var n=e.selections[0];this.setSelection(n)}else this.clearSelection();break;case\"SELECTION_MODE_PICK\":e.selections&&e.selections.length&&(this._selectionMode=\"SELECTION_MODE_RESUME_TRANSFORM\",this.emit(\"transform.modelSelected\",this._selection),this._viewer.clearSelection(),this._viewer.select(this._dbIds),this.setPosition(this._hitPoint));case\"SELECTION_MODE_RESUME_TRANSFORM\":setTimeout(function(){t._selectionMode=\"SELECTION_MODE_TRANSFORM\"},300)}}},{key:\"setSelection\",value:function(e){if(this._selection=e,this._dbIds=this._selection.dbIdArray,this.fullTransform){this._selection.fragIdsArray=[];for(var t=this._selection.model.getFragmentList().fragments.fragId2dbId.length,n=0;n<t;++n)this._selection.fragIdsArray.push(n);this._selection.dbIdArray=[];var i=this._selection.model.getData().instanceTree.getRootId();this._selection.dbIdArray.push(i)}this.emit(\"transform.modelSelected\",this._selection),this.initializeSelection(this._hitPoint)}},{key:\"initializeSelection\",value:function(e){var t=this;this._selectedFragProxyMap={};var n=this._selection.model.transform||{translation:{x:0,y:0,z:0}};this._selection.model.offset={x:e.x-n.translation.x,y:e.y-n.translation.y,z:e.z-n.translation.z},this._transformControlTx.visible=!0,this._transformControlTx.setPosition(e),this._transformControlTx.addEventListener(\"change\",this.onTxChange),this._viewer.addEventListener(M.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),this._selection.fragIdsArray.forEach(function(n){var i=t._viewer.impl.getFragmentProxy(t._selection.model,n);i.getAnimTransform(),i.offset={x:e.x-i.position.x,y:e.y-i.position.y,z:e.z-i.position.z},t._selectedFragProxyMap[n]=i})}},{key:\"clearSelection\",value:function(){this.active&&(this._selection=null,this._selectedFragProxyMap={},this._transformControlTx.visible=!1,this._transformControlTx.removeEventListener(\"change\",this.onTxChange),this._viewer.removeEventListener(M.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),this._viewer.impl.sceneUpdated(!0),this.emit(\"transform.clearSelection\",this._selection))}},{key:\"setPosition\",value:function(e){for(var t in this._transformControlTx.setPosition(e),this._selectedFragProxyMap){var n=this._selectedFragProxyMap[t],i=new k.Vector3(e.x-n.offset.x,e.y-n.offset.y,e.z-n.offset.z);n.position=i,n.updateAnimTransform()}this._viewer.impl.sceneUpdated(!0)}},{key:\"normalize\",value:function(e){var t=this._viewer.navigation.getScreenViewport();return{x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height}}},{key:\"getHitPoint\",value:function(e){var t={x:e.clientX,y:e.clientY},n=this.normalize(t);return this._viewer.utilities.getHitPoint(n.x,n.y)}},{key:\"hitPoint\",value:function(){return this._transformControlTx.position}},{key:\"setHitPoint\",value:function(e){this._hitPoint.x=e.x,this._hitPoint.y=e.y,this._hitPoint.z=e.z}},{key:\"activate\",value:function(){if(!this.active){this.active=!0;var e=this._viewer.model.getBoundingBox();this._viewer.impl.createOverlayScene(\"TransformToolOverlay\"),this._transformControlTx=new k.TransformControls(this._viewer.impl.camera,this._viewer.impl.canvas,\"translate\"),this._transformControlTx.setSize(5*e.getBoundingSphere().radius),this._transformControlTx.visible=!1,this._viewer.impl.addOverlay(\"TransformToolOverlay\",this._transformControlTx),this._transformMesh=this.createTransformMesh(),this._transformControlTx.attach(this._transformMesh),this._viewer.addEventListener(M.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChanged)}}},{key:\"deactivate\",value:function(){this.active&&(this.active=!1,this._viewer.impl.removeOverlay(\"TransformToolOverlay\",this._transformControlTx),this._transformControlTx.removeEventListener(\"change\",this.onTxChange),this._viewer.impl.removeOverlayScene(\"TransformToolOverlay\"),this._viewer.removeEventListener(M.Viewing.CAMERA_CHANGE_EVENT,this.onCameraChanged),this._viewer.removeEventListener(M.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChanged))}},{key:\"onPick\",value:function(){this.active&&(this._selectionMode=\"SELECTION_MODE_PICK\")}},{key:\"handleButtonDown\",value:function(e,t){if(this._isDragging=!0,this._transformControlTx.onPointerDown(e))return!0;var n=this.getHitPoint(e);return n&&(this._translation=new k.Vector3,this._hitPoint.copy(n)),!1}},{key:\"handleButtonUp\",value:function(e,t){return this._isDragging=!1,!!this._transformControlTx.onPointerUp(e)}},{key:\"handleMouseMove\",value:function(e){return this._isDragging?!!this._transformControlTx.onPointerMove(e):!!this._transformControlTx.onPointerHover(e)}},{key:\"handleKeyDown\",value:function(e,t){return 27===t&&this._viewer.clearSelection(),!1}}]),t}(g),z=(n(23),window.Autodesk),I=window.THREE,P=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this))).keys={},n.active=!1,n.viewer=e,n.fullTransform=!1,n._hitPoint=new I.Vector3,n.viewer.toolController.registerTool(Object(y.a)(Object(y.a)(n))),n.onAggregateSelectionChangedHandler=function(e){n.onAggregateSelectionChanged(e)},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"enable\",value:function(e){var t=this.getName();e?this.viewer.toolController.activateTool(t):this.viewer.toolController.deactivateTool(t)}},{key:\"getNames\",value:function(){return[\"Viewing.Rotate.Tool\"]}},{key:\"getName\",value:function(){return\"Viewing.Rotate.Tool\"}},{key:\"activate\",value:function(){this.active||(this.active=!0,this.viewer.addEventListener(z.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChangedHandler))}},{key:\"deactivate\",value:function(){this.active&&(this.active=!1,this.rotateControl&&(this.rotateControl.remove(),this.rotateControl=null),this.viewer.removeEventListener(z.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChangedHandler))}},{key:\"onAggregateSelectionChanged\",value:function(e){if(this.rotateControl&&this.rotateControl.engaged)this.rotateControl.engaged=!1;else if(e.selections&&e.selections.length){var t=e.selections[0];this.setSelection(t)}else this.clearSelection()}},{key:\"setSelection\",value:function(e){if(this.selection=e,this.emit(\"transform.modelSelected\",this.selection),this.fullTransform){this.selection.fragIdsArray=[];for(var t=e.model.getFragmentList().fragments.fragId2dbId.length,n=0;n<t;++n)this.selection.fragIdsArray.push(n);this.selection.dbIdArray=[];var i=e.model.getData().instanceTree.getRootId();this.selection.dbIdArray.push(i),this.drawAxis()}else this.drawAxis()}},{key:\"clearSelection\",value:function(){this.selection=null,this.rotateControl&&(this.rotateControl.remove(),this.rotateControl=null,this.viewer.impl.sceneUpdated(!0))}},{key:\"drawAxis\",value:function(){var e=this,t=this.geWorldBoundingBox(this.selection.fragIdsArray,this.selection.model.getFragmentList());this.center=new I.Vector3((t.min.x+t.max.x)/2,(t.min.y+t.max.y)/2,(t.min.z+t.max.z)/2);var n=.8*Math.max(t.max.x-t.min.x,t.max.y-t.min.y,t.max.z-t.min.z);this.rotateControl&&this.rotateControl.remove(),this.rotateControl=new _(this.viewer,this.center,n),this.rotateControl.on(\"transform.rotate\",function(t){e.rotateFragments(e.selection.model,e.selection.fragIdsArray,t.axis,t.angle,e.center),e.viewer.impl.sceneUpdated(!0)})}},{key:\"getHitPoint\",value:function(e){var t={x:e.clientX,y:e.clientY},n=this.normalize(t);return this.viewer.utilities.getHitPoint(n.x,n.y)}},{key:\"hitPoint\",value:function(){return this._hitPoint}},{key:\"normalize\",value:function(e){var t=this.viewer.navigation.getScreenViewport();return{x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height}}},{key:\"setHitPoint\",value:function(e){this._hitPoint.copy(e)}},{key:\"handleButtonDown\",value:function(e,t){if(this.rotateControl&&this.rotateControl.onPointerDown(e))return!0;if(0===t&&this.keys.Control)return this.isDragging=!0,this.mousePos={x:e.clientX,y:e.clientY},!0;var n=this.getHitPoint(e);return n&&(this._hitPoint=n),!1}},{key:\"handleButtonUp\",value:function(e,t){return this.rotateControl&&this.rotateControl.onPointerUp(e),0===t&&(this.isDragging=!1),!1}},{key:\"handleMouseMove\",value:function(e){if(this.rotateControl&&this.rotateControl.onPointerHover(e),this.isDragging){if(this.selection){var t={x:this.mousePos.x-e.clientX,y:e.clientY-this.mousePos.y};this.mousePos={x:e.clientX,y:e.clientY};var n=Math.sqrt(t.x*t.x+t.y*t.y),i=new I.Vector3,o=new I.Vector3,r=new I.Vector3,a=new I.Vector3,s=this.viewer.getCamera(),l=new I.Vector3,c=new I.Vector3;c.copy(s.position).sub(s.target),r.copy(c).normalize(),a.copy(s.up).normalize(),i.crossVectors(a,r).normalize(),a.setLength(t.y),i.setLength(t.x),o.copy(a.add(i)),l.crossVectors(o,c).normalize(),this.rotateFragments(this.selection.model,this.selection.fragIdsArray,l,n*Math.PI/180,this.center),this.viewer.impl.sceneUpdated(!0)}return!0}return!1}},{key:\"handleKeyDown\",value:function(e,t){return this.keys[e.key]=!0,27===t&&this.viewer.clearSelection(),!1}},{key:\"handleKeyUp\",value:function(e,t){return this.keys[e.key]=!1,!1}},{key:\"rotateFragments\",value:function(e,t,n,i,o){var r=this,a=new I.Quaternion;a.setFromAxisAngle(n,i),t.forEach(function(t,n){var i=r.viewer.impl.getFragmentProxy(e,t);i.getAnimTransform();var s=new I.Vector3(i.position.x-o.x,i.position.y-o.y,i.position.z-o.z);if(s.applyQuaternion(a),s.add(o),i.position=s,i.quaternion.multiplyQuaternions(a,i.quaternion),0===n){r._hitPoint&&(r._hitPoint.sub(o),r._hitPoint.applyQuaternion(a),r._hitPoint.add(o));var l=new I.Euler;l.setFromQuaternion(i.quaternion,0),r.emit(\"transform.rotate\",{rotation:l,model:e})}i.updateAnimTransform()})}},{key:\"geWorldBoundingBox\",value:function(e,t){var n=new I.Box3,i=new I.Box3;return e.forEach(function(e){t.getWorldBounds(e,n),i.union(n)}),i}}]),t}(g),_=function(e){function t(e,n,i){var o;Object(d.a)(this,t),(o=Object(m.a)(this,Object(v.a)(t).call(this))).engaged=!1,o.overlayScene=\"rotateControlScene\",o.domElement=e.impl.canvas,o.camera=e.impl.camera,o.viewer=e,o.center=n,o.size=i,o.gizmos=[],o.viewer.impl.createOverlayScene(o.overlayScene),o.createAxis(n,new I.Vector3(1,0,0),.85*i,16711680),o.createAxis(n,new I.Vector3(0,1,0),.85*i,65280),o.createAxis(n,new I.Vector3(0,0,1),.85*i,255),o.camera.worldup.y?(o.gizmos.push(o.createGizmo(n,new I.Euler(0,Math.PI/2,0),.0045*i,.4*i,16711680,Math.PI,new I.Vector3(1,0,0))),o.gizmos.push(o.createGizmo(n,new I.Euler(Math.PI/2,0,0),.0045*i,.4*i,65280,2*Math.PI,new I.Vector3(0,1,0))),o.gizmos.push(o.createGizmo(n,new I.Euler(0,0,0),.0045*i,.4*i,255,Math.PI,new I.Vector3(0,0,1)))):(o.gizmos.push(o.createGizmo(n,new I.Euler(Math.PI/2,Math.PI/2,0),.0045*i,.4*i,16711680,Math.PI,new I.Vector3(1,0,0))),o.gizmos.push(o.createGizmo(n,new I.Euler(Math.PI/2,0,0),.0045*i,.4*i,65280,Math.PI,new I.Vector3(0,1,0))),o.gizmos.push(o.createGizmo(n,new I.Euler(0,0,0),.0045*i,.4*i,255,2*Math.PI,new I.Vector3(0,0,1)))),o.picker=o.createSphere(.02*i);var r=new I.LineBasicMaterial({color:16776960,linewidth:1,depthTest:!1,depthWrite:!1,transparent:!0});return o.angleLine=o.createLine(o.center,o.center,r),e.impl.sceneUpdated(!0),o}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"createLine\",value:function(e,t,n){var i=new I.Geometry;i.vertices.push(new I.Vector3(e.x,e.y,e.z)),i.vertices.push(new I.Vector3(t.x,t.y,t.z));var o=new I.Line(i,n);return this.viewer.impl.addOverlay(this.overlayScene,o),o}},{key:\"createCone\",value:function(e,t,n,i){t.normalize();var o={x:e.x+t.x*n,y:e.y+t.y*n,z:e.z+t.z*n},r=new I.Matrix4;r.lookAt(e,o,(new I.Object3D).up);var a=new I.Matrix4;a.set(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),r.multiply(a);var s=new I.CylinderGeometry(0,.2*n,n,128,1),l=new I.Mesh(s,i);return l.applyMatrix(r),l.position.x=e.x+t.x*n/2,l.position.y=e.y+t.y*n/2,l.position.z=e.z+t.z*n/2,this.viewer.impl.addOverlay(this.overlayScene,l),l}},{key:\"createAxis\",value:function(e,t,n,i){var o={x:e.x+t.x*n,y:e.y+t.y*n,z:e.z+t.z*n},r=new I.LineBasicMaterial({color:i,linewidth:2,depthTest:!1,depthWrite:!1,transparent:!0});this.createLine(e,o,r),this.createCone(o,t,.1*n,r)}},{key:\"createGizmo\",value:function(e,t,n,i,o,r,a){var s=new E({color:o}),l=new E({color:o}),c=new I.Mesh(new I.TorusGeometry(i,n,64,64,r),s),h=new I.Mesh(new I.TorusGeometry(i,n,64,64,2*Math.PI),l);h.material.highlight(!0);var u=new I.Matrix4,d=new I.Quaternion;d.setFromEuler(t);var p=new I.Vector3(1,1,1);u.compose(e,d,p),c.applyMatrix(u),h.applyMatrix(u);var m=this.createBox(100*this.size,100*this.size,.01);return m.applyMatrix(u),h.visible=!1,this.viewer.impl.addOverlay(this.overlayScene,c),this.viewer.impl.addOverlay(this.overlayScene,h),c.subGizmo=h,c.plane=m,c.axis=a,c}},{key:\"createBox\",value:function(e,t,n){var i=new E({color:0}),o=new I.BoxGeometry(e,t,n),r=new I.Mesh(o,i);return r.visible=!1,this.viewer.impl.addOverlay(this.overlayScene,r),r}},{key:\"createSphere\",value:function(e){var t=new E({color:16776960}),n=new I.SphereGeometry(e,32,32),i=new I.Mesh(n,t);return i.visible=!1,this.viewer.impl.addOverlay(this.overlayScene,i),i}},{key:\"pointerToRaycaster\",value:function(e){var t=new I.Vector3,n=new I.Vector3,i=new I.Raycaster,o=this.domElement.getBoundingClientRect(),r=(e.clientX-o.left)/o.width*2-1,a=-(e.clientY-o.top)/o.height*2+1;return this.camera.isPerspective?(t.set(r,a,.5),t.unproject(this.camera),i.set(this.camera.position,t.sub(this.camera.position).normalize())):(t.set(r,a,-1),t.unproject(this.camera),n.set(0,0,-1),i.set(t,n.transformDirection(this.camera.matrixWorld))),i}},{key:\"onPointerDown\",value:function(e){var t=e.pointers?e.pointers[0]:e;if(0===t.button){var n=this.pointerToRaycaster(t).intersectObjects(this.gizmos,!0);n.length?(this.gizmos.forEach(function(e){e.visible=!1}),this.selectedGizmo=n[0].object,this.selectedGizmo.subGizmo.visible=!0,this.picker.position.copy(n[0].point),this.angleLine.geometry.vertices[1].copy(n[0].point),this.lastDir=n[0].point.sub(this.center).normalize(),this.angleLine.geometry.verticesNeedUpdate=!0,this.angleLine.visible=!0,this.picker.visible=!0):this.picker.visible=!1,this.engaged=this.picker.visible,this.viewer.impl.sceneUpdated(!0)}return this.picker.visible}},{key:\"onPointerHover\",value:function(e){var t=e.pointers?e.pointers[0]:e;if(this.engaged){if((a=this.pointerToRaycaster(t).intersectObjects([this.selectedGizmo.plane],!0)).length){var n=a[0].point.sub(this.center).normalize(),i=new I.Vector3;i.crossVectors(this.lastDir,n);var o=Math.sign(i.dot(this.selectedGizmo.axis));this.emit(\"transform.rotate\",{angle:o*n.angleTo(this.lastDir),axis:this.selectedGizmo.axis}),this.lastDir=n;var r=new I.Vector3(this.center.x+n.x*this.size*.8,this.center.y+n.y*this.size*.8,this.center.z+n.z*this.size*.8);this.picker.position.copy(r),this.angleLine.geometry.vertices[1].copy(r)}this.angleLine.visible=!0,this.angleLine.geometry.verticesNeedUpdate=!0}else{var a;this.angleLine.visible=!1,(a=this.pointerToRaycaster(t).intersectObjects(this.gizmos,!0)).length?(this.picker.position.set(a[0].point.x,a[0].point.y,a[0].point.z),this.picker.visible=!0):this.picker.visible=!1}this.viewer.impl.sceneUpdated(!0)}},{key:\"onPointerUp\",value:function(e){var t=this;this.angleLine.visible=!1,this.picker.visible=!1,this.gizmos.forEach(function(e){e.visible=!0,e.subGizmo.visible=!1}),this.viewer.impl.sceneUpdated(!0),setTimeout(function(){t.engaged=!1},100)}},{key:\"normalize\",value:function(e){var t=this.viewer.navigation.getScreenViewport();return{x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height}}},{key:\"projectOntoPlane\",value:function(e,t){var n=t.dot(e);return new I.Vector3(e.x-n*t.x,e.y-n*t.y,e.z-n*t.z)}},{key:\"remove\",value:function(){this.viewer.impl.removeOverlayScene(this.overlayScene)}}]),t}(g),E=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this))).setValues(e),n.colorInit=n.color.clone(),n.opacityInit=n.opacity,n.side=I.FrontSide,n.depthWrite=!1,n.transparent=!0,n.depthTest=!1,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"highlight\",value:function(e){e?(this.color.setRGB(1,230/255,3/255),this.opacity=1):(this.color.copy(this.colorInit),this.opacity=this.opacityInit)}}]),t}(I.MeshBasicMaterial),O=(n(12),window.$),C=window.THREE,V=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this))).markerId=n.guid(),n.svgId=n.guid();var i='\\n      <div id=\"'.concat(n.markerId,'\" class=\"tooltip-marker\">\\n        <svg id=\"').concat(n.svgId,'\"></svg>\\n      </div>');return e.toolController.registerTool(Object(y.a)(Object(y.a)(n))),O(e.container).append(i),n.$marker=O(\"#\".concat(n.markerId)),n.viewer=e,n.active=!1,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"setContent\",value:function(e,t){this.tooltipSelector=t,O(this.viewer.container).append(e)}},{key:\"getNames\",value:function(){return[\"Viewer.Tooltip.Tool\"]}},{key:\"getName\",value:function(){return\"Viewer.Tooltip.Tool\"}},{key:\"activate\",value:function(){this.active||(this.active=!0,this.viewer.toolController.activateTool(this.getName()),O(this.tooltipSelector).css({display:\"block\"}),this.emit(\"activate\"))}},{key:\"deactivate\",value:function(){this.active&&(this.active=!1,this.viewer.toolController.deactivateTool(this.getName()),O(this.tooltipSelector).css({display:\"none\"}),this.pointerVisible=!1,this.$marker.css({display:\"none\"}),this.emit(\"deactivate\"))}},{key:\"handleSingleClick\",value:function(e,t){return!1}},{key:\"handleMouseMove\",value:function(e){var t=O(this.viewer.container).offset();O(this.tooltipSelector).css({top:e.clientY-t.top-30+\"px\",left:e.clientX-t.left+\"px\"});var n={x:e.clientX,y:e.clientY};if(this.screenToWorld(n)&&this.active){var i=O(this.viewer.container).offset();this.$marker.css({left:n.x-i.left-this.$marker.width()/2,top:n.y-i.top-this.$marker.height()/2,display:\"block\"}),this.pointerVisible||(this.pointerVisible=!0,this.animateId=this.guid())}else this.pointerVisible=!1,this.$marker.css({display:\"none\"});return!1}},{key:\"screenToWorld\",value:function(e){var t=this.viewer.navigation.getScreenViewport(),n={x:(e.x-t.left)/t.width,y:(e.y-t.top)/t.height};return this.viewer.utilities.getHitPoint(n.x,n.y)}},{key:\"worldToScreen\",value:function(e,t){var n=new C.Vector4;n.x=e.x,n.y=e.y,n.z=e.z,n.w=1,n.applyMatrix4(t.matrixWorldInverse),n.applyMatrix4(t.projectionMatrix),n.w>0&&(n.x/=n.w,n.y/=n.w,n.z/=n.w);var i=this._viewer.impl.viewportToClient(n.x,n.y);return i.x=Math.floor(i.x)+.5,i.y=Math.floor(i.y)+.5,i}},{key:\"handleKeyDown\",value:function(e,t){return!1}}]),t}(g),j=n(14),G=(n(26),n(27),window.Autodesk),A=window.$;var S=function(e){function t(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(d.a)(this,t),(i=Object(m.a)(this,Object(v.a)(t).call(this,e,t.guid(),n,Object.assign({shadow:!0,movable:!0,closable:!0},o))))._dialogResult=\"CANCEL\",i._isVisible=!1,i._isMinimized=!1,i._btnElement=o.buttonElement,i}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:\"guid\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"xxxxxxxxxx\",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(\"x\"==e?n:7&n|8).toString(16)});return n}}]),Object(p.a)(t,[{key:\"htmlContent\",value:function(e){return\"<div></div>\"}},{key:\"unload\",value:function(){this.setVisible(!1),A(this.container).remove()}},{key:\"isVisible\",value:function(){return this._isVisible}},{key:\"setVisible\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&A(this.container).velocity({rotateY:[0,-90]}),e!==this._isVisible&&\"undefined\"!==typeof this._events&&this.emit(e?\"open\":\"close\",{result:this._dialogResult}),this._isVisible=e,this._btnElement&&(e?this._btnElement.classList.add(\"active\"):this._btnElement.classList.remove(\"active\")),Object(j.a)(Object(v.a)(t.prototype),\"setVisible\",this).call(this,e)}},{key:\"toggleVisibility\",value:function(){this.setVisible(!this._isVisible)}},{key:\"initialize\",value:function(){this.title=this.createTitleBar(this.titleLabel||this.container.id),A(this.container).append(this.title),this.setTitle(this.titleLabel||this.container.id,this.options),this.options.movable&&this.initializeMoveHandlers(this.title),this.options.closable&&(this.closer=this.createCloseButton(),A(this.title).append(this.closer));var e=A(this.htmlContent(this.container.id));this.content=e[0],A(this.container).append(e),this.container.classList.add(\"toolPanelBase\")}},{key:\"createTitleBar\",value:function(e){var n=this,i=document.createElement(\"div\");i.className=\"dockingPanelTitle\",this.titleTextId=t.guid(),this.titleImgId=t.guid();var o='\\n      <span id=\"'.concat(this.titleImgId,'\"></span>\\n      <div id=\"').concat(this.titleTextId,'\" class=\"dockingPanelTitleText\">\\n        ').concat(e,\"\\n      </div>\\n    \");return A(i).append(o),this.addEventListener(i,\"click\",function(e){n.movedSinceLastClick||n.onTitleClick(e),n.movedSinceLastClick=!1}),this.addEventListener(i,\"dblclick\",function(e){n.onTitleDoubleClick(e)}),i}},{key:\"setTitle\",value:function(e,t){t&&t.localizeTitle?(A(\"#\".concat(this.titleTextId)).attr(\"data-i18n\",e),e=G.Viewing.i18n.translate(e)):A(\"#\".concat(this.titleTextId)).removeAttr(\"data-i18n\"),A(\"#\".concat(this.titleTextId)).text(e)}},{key:\"onTitleDoubleClick\",value:function(e){this._isMinimized=!this._isMinimized,this._isMinimized?(this._height=A(this.container).css(\"height\"),A(this.container).css({\"min-height\":\"32px\",overflow:\"hidden\",height:\"32px\"})):A(this.container).css({height:this._height,\"min-height\":\"100px\",overflow:\"visible\"})}}]),t}(g.Composer(G.Viewing.UI.DockingPanel)),L=function(e){function t(e){var n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Object(d.a)(this,t),n=Object(m.a)(this,Object(v.a)(t).call(this));var o=Object(y.a)(Object(y.a)(n)),r=R();n._inputId=R();var a='\\n        <p class=\"onoffswitch\">\\n          <input id=\"'.concat(n._inputId,'\" type=\"checkbox\" name=\"onoffswitch\"\\n            class=\"onoffswitch-checkbox\" ').concat(i?\"checked\":\"\",'>\\n          <label id=\"').concat(r,'\" class=\"onoffswitch-label\">\\n            <span class=\"onoffswitch-inner\"></span>\\n            <span class=\"onoffswitch-switch\"></span>\\n          </label>\\n        </p>\\n      ');return u()(e).append(a),u()(\"#\"+r).click(function(e){var t=u()(\"#\"+n._inputId)[0];t.checked=!t.checked,o.emit(\"checked\",t.checked)}),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"checked\",value:function(){return u()(\"#\"+this._inputId)[0].checked}},{key:\"setChecked\",value:function(e){u()(\"#\"+this._inputId).prop(\"checked\",e),this.emit(\"checked\",e)}}]),t}(g);function R(){var e=(new Date).getTime();return\"xxxx-xxxx-xxxx-xxxx\".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\"x\"==t?n:7&n|8).toString(16)})}u()('<style type=\"text/css\">\\n\\n  .onoffswitch {\\n    position: relative; width: 50px;\\n    -webkit-user-select:none; -moz-user-select:none; -ms-user-select: none;\\n  }\\n  .onoffswitch-checkbox {\\n    display: none;\\n  }\\n  .onoffswitch-label {\\n    display: block; overflow: hidden; cursor: pointer;\\n    border: 2px solid #999999; border-radius: 8px;\\n  }\\n  .onoffswitch-inner {\\n    display: block; width: 200%; margin-left: -100%;\\n    transition: margin 0.3s ease-in 0s;\\n  }\\n  .onoffswitch-inner:before, .onoffswitch-inner:after {\\n    display: block;\\n    float: left;\\n    width: 50%;\\n    height: 15px;\\n    padding: 0;\\n    line-height: 15px;\\n    font-size: 10px;\\n    color: white;\\n    font-family: Trebuchet, Arial, sans-serif;\\n    font-weight: bold;\\n    box-sizing: border-box;\\n  }\\n  .onoffswitch-inner:before {\\n    content: \"ON\";\\n    background-color: #0E8200;\\n    color: #FFFFFF;\\n  }\\n  .onoffswitch-inner:after {\\n    content: \"OFF\";\\n    padding-right: 10px;\\n    background-color: #d9534f;\\n    color: #FFFFFF;\\n    text-align: right;\\n  }\\n  .onoffswitch-switch {\\n    display: block;\\n    width: 12px;\\n    margin: 2px;\\n    background: #FFFFFF;\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    right: 31px;\\n    border: 2px solid #999999;\\n    border-radius: 8px;\\n    transition: all 0.3s ease-in 0s;\\n  }\\n  .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-inner {\\n    margin-left: 0;\\n  }\\n  .onoffswitch-checkbox:checked + .onoffswitch-label .onoffswitch-switch {\\n    right: -1px;\\n  }\\n</style>').appendTo(\"head\");var F=L,D=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(v.a)(t).call(this))}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"showPayload\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"_blank\",n=document.createElement(\"a\");n.target=t,n.href=e,n.click()}},{key:\"guid\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"xxxxxxxxxx\",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(\"x\"==e?n:7&n|8).toString(16)});return n}}],[{key:\"guid\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"xxxxxxxxxx\",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(\"x\"==e?n:7&n|8).toString(16)});return n}}]),t}(g),Y=(n(29),window.$);function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"xxxxxxxx\",t=(new Date).getTime();return e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(\"x\"==e?n:7&n|8).toString(16)})}var X=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this))).dropdownId=N(),n.buttonId=N(),n.labelId=N(),n.listId=N(),n.opts=e,n.currentItem=null,n.title=e.title||\"Select Item: \";var i='\\n      <div id=\"'.concat(n.dropdownId,'\" class=\"dropdown lmv-dropdown\">\\n      <button id=\"').concat(n.buttonId,'\" class=\"btn dropdown-toggle\"\\n        type=\"button\"\\n        data-toggle=\"dropdown\" disabled>\\n        <div class=\"label-container\">\\n          <label id=\"').concat(n.labelId,'\" class=\"label\">').concat(n.title,'</label>\\n        </div>\\n        <span class=\"caret\"></span>\\n      </button>\\n      <ul id=\"').concat(n.listId,'\" class=\"dropdown-menu scrollable-menu\">\\n      </ul>\\n      </div>\\n    ');Y(e.container).append(i),Y(\"#\"+n.dropdownId).css(e.pos),e.menuItems=e.menuItems||[];var o=e.prompt||n.title+\": \"+e.menuItems[e.selectedItemIdx||0].name;return Y(\"#\"+n.labelId).text(o),e.menuItems.forEach(function(e){n.addItem(e)}),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"addItem\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Y(\"#\"+this.buttonId).prop(\"disabled\",!1);var i=e.id||N(),o='\\n      <li id=\"'.concat(i,'\">\\n        <a href=\"\">').concat(e.name,\"</a>\\n      </li>\");Y(\"#\"+this.listId).append(o);var r=function(n){n&&n.preventDefault(),t.currentItem=e;t.emit(\"item.selected\",e);e.handler&&e.handler(),Y(\"#\"+t.labelId).text(t.title+\": \"+e.name)};Y(\"#\"+i).click(function(e){r(e)}),n&&r()}},{key:\"setCurrentItem\",value:function(e){this.currentItem=e,Y(\"#\"+this.labelId).text(this.title+\": \"+e.name)}},{key:\"setItems\",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Y(\"#\".concat(this.listId,\" li\")).remove(),n<0)Y(\"#\"+this.labelId).text(this.opts.prompt);else{var i=this.title+\": \"+e[n].name;Y(\"#\"+this.labelId).text(i)}e.forEach(function(e){t.addItem(e)})}},{key:\"removeCurrentItem\",value:function(){this.currentItem&&(Y(\"#\"+this.currentItem.id).remove(),0===Y(\"#\"+this.listId+\" > li\").length&&Y(\"#\"+this.buttonId).prop(\"disabled\",!0),this.currentItem=null),Y(\"#\"+this.labelId).text(this.title),this.emit(\"item.selected\",null)}},{key:\"removeItem\",value:function(e){this.currentItem&&this.currentItem.id===e.id&&(Y(\"#\"+this.labelId).text(this.title),this.currentItem=null),Y(\"#\"+e.id).remove(),0===Y(\"#\"+this.listId+\" > li\").length&&Y(\"#\"+this.buttonId).prop(\"disabled\",!0)}},{key:\"setVisible\",value:function(e){Y(\"#\"+this.dropdownId).css({display:e?\"block\":\"none\"})}},{key:\"setPosition\",value:function(e){Y(\"#\"+this.dropdownId).css(opts.pos)}},{key:\"open\",value:function(){Y(\"#\"+this.dropdownId).addClass(\"open\"),Y(\"#\"+this.dropdownId).trigger(\"click.bs.dropdown\")}},{key:\"clear\",value:function(){Y(\"#\"+this.buttonId).prop(\"disabled\",!0),Y(\"#\".concat(this.listId,\" li\")).remove(),this.currentItem=null}}]),t}(D),Z=(window.Autodesk,window.THREE),B=window.$,W=function(e){function t(e,n){var i;Object(d.a)(this,t),i=Object(m.a)(this,Object(v.a)(t).call(this,e.container,\"Transform Models\",{buttonElement:n,closable:!0,movable:!0,shadow:!0})),B(i.container).addClass(\"model-transformer\"),i.dropdown=new X({container:\"#\"+i.dropdownContainerId,title:\"Select Model\",prompt:\"Select Model ...\",pos:{top:0,left:0}}),i.dropdown.on(\"item.selected\",function(e){i.currentModel=e,e&&(i.setTransform(e.transform),i.emit(\"model.selected\",{fitToView:!0,model:e}))});var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e),i.txTool.clearSelection(),i.rxTool.clearSelection(),e&&i.emit(\"model.transform\",{model:e,fitToView:t,transform:{translation:i.getTranslation(),rotation:i.getRotation(),scale:i.getScale()}})};i.applyTransform=o,i.fullTransformSwitch=new F(\"#\".concat(i.container.id,\"-full-transform-switch\")),i.fullTransform=!0,i.fullTransformSwitch.on(\"checked\",function(e){i.txTool.fullTransform=e,i.rxTool.fullTransform=e,i.fullTransform=e,i.txTool.clearSelection(),i.rxTool.clearSelection()}),B(\"#\".concat(i.container.id,\"-unload-btn\")).click(function(){i.txTool.clearSelection(),i.currentModel&&(i.emit(\"model.delete\",{model:i.currentModel}),i.dropdown.removeCurrentItem())}),i.viewer=e,i.txTool=new T(e),i.rxTool=new P(e),i.txTool.fullTransform=!0,i.rxTool.fullTransform=!0,i.viewer.toolController.registerTool(i.txTool),i.viewer.toolController.registerTool(i.rxTool),i.txTool.on(\"transform.translate\",function(e){e.model.transform.translation=e.translation,i.setTranslation(e.model.transform.translation)}),i.rxTool.on(\"transform.rotate\",function(e){e.model.transform.rotation=e.rotation,i.setRotation({x:180*e.rotation.x/Math.PI%360,y:180*e.rotation.y/Math.PI%360,z:180*e.rotation.z/Math.PI%360})});var r=function(e){B(\"#\"+i.transPickBtnId).prop(\"disabled\",!i.txTool.active),i.dropdown.setCurrentItem(e.model),i.setTransform(e.model.transform),i.currentModel=e.model,i.emit(\"model.selected\",{model:e.model,fitToView:!1}),i.tooltip.deactivate()};return i.txTool.on(\"transform.modelSelected\",r),i.txTool.on(\"transform.clearSelection\",function(){B(\"#\"+i.transPickBtnId).prop(\"disabled\",!0),i.tooltip.deactivate()}),i.rxTool.on(\"transform.modelSelected\",r),i.on(\"open\",function(){i.viewer.toolController.activateTool(i.txTool.getName())}),i.on(\"close\",function(){i.viewer.toolController.deactivateTool(i.txTool.getName()),i.viewer.toolController.deactivateTool(i.rxTool.getName()),B(\"#\"+i.transPickBtnId).prop(\"disabled\",!0)}),B(\".model-transformer .trans, .model-transformer .rot\").on(\"change keyup input paste\",function(){o(i.currentModel)}),B(\".model-transformer .trans\").on(\"focus\",function(){i.viewer.toolController.deactivateTool(i.rxTool.getName()),i.viewer.toolController.activateTool(i.txTool.getName())}),B(\".model-transformer .rot\").on(\"focus\",function(){i.viewer.toolController.deactivateTool(i.txTool.getName()),i.viewer.toolController.activateTool(i.rxTool.getName())}),B(\"#\".concat(i.container.id,\"-Sx\")).on(\"change keyup\",function(){var e=B(\"#\".concat(i.container.id,\"-Sx\")).val();B(\"#\".concat(i.container.id,\"-Sy\")).val(e),B(\"#\".concat(i.container.id,\"-Sz\")).val(e),o(i.currentModel,!0)}),B(\"#\"+i.transPickBtnId).click(function(){i.txTool.onPick(),i.tooltip.activate()}),i.tooltip=new V(e),i.tooltip.setContent('\\n      <div id=\"pickTooltipId\" class=\"pick-tooltip\">\\n        <b>Pick position ...</b>\\n      </div>',\"#pickTooltipId\"),i}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"htmlContent\",value:function(e){return this.dropdownContainerId=S.guid(),this.transPickBtnId=S.guid(),'\\n\\n      <div class=\"container\">\\n\\n         <div id=\"'.concat(this.dropdownContainerId,'\">\\n        </div>\\n\\n        <hr class=\"v-spacer\">\\n\\n        <span class=\"text-span\">\\n            Snap:\\n          </span>\\n\\n          <hr class=\"v-spacer\">\\n\\n        <button id=\"').concat(this.transPickBtnId,'\"\\n            class=\"btn btn-trans-pick\" disabled>\\n            <span class=\"glyphicon glyphicon-screenshot btn-span\">\\n            </span>\\n          </button>\\n\\n        <hr class=\"v-spacer\">\\n\\n        <div>\\n\\n          <span class=\"text-span\">\\n            Translation:\\n          </span>\\n\\n          <hr class=\"v-spacer\">\\n\\n          \\n\\n          <input id=\"').concat(e,'-Tx\" type=\"text\"\\n            class=\"input numeric trans\"\\n            placeholder=\"  x (0.0)\">\\n\\n          <input id=\"').concat(e,'-Ty\" type=\"text\"\\n            class=\"input numeric trans\"\\n            placeholder=\"  y (0.0)\">\\n\\n          <input id=\"').concat(e,'-Tz\" type=\"text\"\\n            class=\"input numeric trans\"\\n            placeholder=\"  z (0.0)\">\\n\\n          <hr class=\"v-spacer\">\\n\\n          <span class=\"text-span\">\\n            Rotation (deg):\\n          </span>\\n\\n          <hr class=\"v-spacer\">\\n\\n          <input id=\"').concat(e,'-Rx\" type=\"text\"\\n            class=\"input numeric rot\"\\n            placeholder=\"  x (0.0)\">\\n\\n          <input id=\"').concat(e,'-Ry\" type=\"text\"\\n            class=\"input numeric rot\"\\n            placeholder=\"  y (0.0)\">\\n\\n          <input id=\"').concat(e,'-Rz\" type=\"text\"\\n            class=\"input numeric rot\"\\n            placeholder=\"  z (0.0)\">\\n\\n          <span class=\"text-span\">\\n            Scale:\\n          </span>\\n\\n          <hr class=\"v-spacer\">\\n\\n          <input id=\"').concat(e,'-Sx\" type=\"text\"\\n            class=\"input numeric scale\"\\n            placeholder=\"  x (1.0)\">\\n\\n          <input id=\"').concat(e,'-Sy\" type=\"text\"\\n            class=\"input numeric scale\"\\n            placeholder=\"  y (1.0)\">\\n\\n          <input id=\"').concat(e,'-Sz\" type=\"text\"\\n            class=\"input numeric scale\"\\n            placeholder=\"  z (1.0)\">\\n\\n          <hr class=\"v-spacer-large\">\\n\\n        </div>\\n\\n        <div style=\"margin-top:8px\">\\n\\n          <div style=\"color:white;\">\\n          Full Model Transform\\n            <div id=\"').concat(e,'-full-transform-switch\"\\n              style=\"float:left; margin-right:8px;\">\\n            </div>\\n          </div>\\n\\n          <hr class=\"v-spacer-large\">\\n\\n          <button class=\"btn btn-danger\" id=\"').concat(e,'-unload-btn\">\\n            <span class=\"glyphicon glyphicon-save-file btn-span\">\\n            </span>\\n             Unload Model\\n          </button>\\n        </div>\\n\\n      </div>')}},{key:\"setTransform\",value:function(e){B(\"#\".concat(this.container.id,\"-Tx\")).val(e.translation.x.toFixed(2)),B(\"#\".concat(this.container.id,\"-Ty\")).val(e.translation.y.toFixed(2)),B(\"#\".concat(this.container.id,\"-Tz\")).val(e.translation.z.toFixed(2)),B(\"#\".concat(this.container.id,\"-Rx\")).val(e.rotation.x.toFixed(2)),B(\"#\".concat(this.container.id,\"-Ry\")).val(e.rotation.y.toFixed(2)),B(\"#\".concat(this.container.id,\"-Rz\")).val(e.rotation.z.toFixed(2)),B(\"#\".concat(this.container.id,\"-Sx\")).val(e.scale.x),B(\"#\".concat(this.container.id,\"-Sy\")).val(e.scale.y),B(\"#\".concat(this.container.id,\"-Sz\")).val(e.scale.z)}},{key:\"getScale\",value:function(){var e=parseFloat(B(\"#\".concat(this.container.id,\"-Sx\")).val()),t=parseFloat(B(\"#\".concat(this.container.id,\"-Sy\")).val()),n=parseFloat(B(\"#\".concat(this.container.id,\"-Sz\")).val());return e=isNaN(e)?1:e,t=isNaN(t)?1:t,n=isNaN(n)?1:n,new Z.Vector3(e,t,n)}},{key:\"getTranslation\",value:function(){var e=parseFloat(B(\"#\".concat(this.container.id,\"-Tx\")).val()),t=parseFloat(B(\"#\".concat(this.container.id,\"-Ty\")).val()),n=parseFloat(B(\"#\".concat(this.container.id,\"-Tz\")).val());return e=isNaN(e)?0:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,new Z.Vector3(e,t,n)}},{key:\"getRotation\",value:function(){var e=parseFloat(B(\"#\".concat(this.container.id,\"-Rx\")).val()),t=parseFloat(B(\"#\".concat(this.container.id,\"-Ry\")).val()),n=parseFloat(B(\"#\".concat(this.container.id,\"-Rz\")).val());return e=isNaN(e)?0:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,new Z.Vector3(e,t,n)}},{key:\"setScale\",value:function(e){B(\"#\".concat(this.container.id,\"-Sx\")).val(e.x.toFixed(2)),B(\"#\".concat(this.container.id,\"-Sy\")).val(e.y.toFixed(2)),B(\"#\".concat(this.container.id,\"-Sz\")).val(e.z.toFixed(2))}},{key:\"setTranslation\",value:function(e){B(\"#\".concat(this.container.id,\"-Tx\")).val(e.x.toFixed(2)),B(\"#\".concat(this.container.id,\"-Ty\")).val(e.y.toFixed(2)),B(\"#\".concat(this.container.id,\"-Tz\")).val(e.z.toFixed(2))}},{key:\"setRotation\",value:function(e){B(\"#\".concat(this.container.id,\"-Rx\")).val(e.x.toFixed(2)),B(\"#\".concat(this.container.id,\"-Ry\")).val(e.y.toFixed(2)),B(\"#\".concat(this.container.id,\"-Rz\")).val(e.z.toFixed(2))}},{key:\"clearSelection\",value:function(){this.txTool.clearSelection(),this.rxTool.clearSelection()}}]),t}(S),Q=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(d.a)(this,t),(n=Object(m.a)(this,Object(v.a)(t).call(this,e,i)))._viewer=e,n._options=i,n._events={},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"load\",value:function(){return!0}},{key:\"unload\",value:function(){return!0}},{key:\"on\",value:function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),t}},{key:\"off\",value:function(e,t){e in this._events!==!1&&this._events[e].splice(this._events[e].indexOf(t),1)}},{key:\"emit\",value:function(e){if(void 0!==this._events[e])for(var t=this._events[e].slice(),n=0;n<t.length;++n){var i=t[n].apply(this,Array.prototype.slice.call(arguments,1));if(void 0!==i)return i}}}],[{key:\"guid\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"xxxxxxxxxx\",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(\"x\"==e?n:7&n|8).toString(16)});return n}},{key:\"ExtensionId\",get:function(){return\"Viewing.Extension.Base\"}}]),t}(window.Autodesk.Viewing.Extension),H=n(9),U=window.Autodesk,q=window.THREE,J=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:\"guid\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"xxxxxxxxxxxx\",t=(new Date).getTime(),n=e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),(\"x\"==e?n:7&n|8).toString(16)});return n}},{key:\"getDefaultViewablePath\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[\"3d\",\"2d\"],n=e.getRootItem(),i=Object(H.a)(t),o=[];return i.forEach(function(e){o=Object(H.a)(o).concat(Object(H.a)(U.Viewing.Document.getSubItemsWithProperties(n,{type:\"geometry\",role:e},!0)))}),o.length?e.getViewablePath(o[0]):null}},{key:\"createButton\",value:function(e,t,n,i){var o=new U.Viewing.UI.Button(e);return o.icon.style.fontSize=\"24px\",o.icon.className=t,o.setToolTip(n),o.onClick=i,o}},{key:\"createControlGroup\",value:function(e,t){var n=e.getToolbar(!0);if(n){var i=new U.Viewing.UI.ControlGroup(t);return n.addControl(i),i}}},{key:\"getLeafNodes\",value:function(e,t){return new Promise(function(n,i){try{var o=e.getData().instanceTree;t=t||o.getRootId();for(var r=Array.isArray(t)?t:[t],a=[],s=function e(t){var n=0;o.enumNodeChildren(t,function(t){e(t),++n}),0==n&&a.push(t)},l=0;l<r.length;++l)s(r[l]);return n(a)}catch(c){return i(c)}})}},{key:\"getFragIds\",value:function(t,n){return new Promise(function(){var i=Object(c.a)(l.a.mark(function i(o,r){var a,s;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.delegateYield(l.a.mark(function i(){var r,s,c,h;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r=Array.isArray(n)?n:[n],s=t.getData().instanceTree,i.next=4,e.getLeafNodes(t,r);case 4:for(c=i.sent,h=[],a=0;a<c.length;++a)s.enumNodeFragments(c[a],function(e){h.push(e)});return i.abrupt(\"return\",{v:o(h)});case 8:case\"end\":return i.stop()}},i,this)})(),\"t0\",2);case 2:if(\"object\"!==typeof(s=i.t0)){i.next=5;break}return i.abrupt(\"return\",s.v);case 5:i.next=10;break;case 7:return i.prev=7,i.t1=i.catch(0),i.abrupt(\"return\",r(i.t1));case 10:case\"end\":return i.stop()}},i,this,[[0,7]])}));return function(e,t){return i.apply(this,arguments)}}())}},{key:\"getWorldBoundingBox\",value:function(t,n){return new Promise(function(){var i=Object(c.a)(l.a.mark(function i(o,r){var a,s,c,h;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,e.getFragIds(t,n);case 3:if((a=i.sent).length){i.next=6;break}return i.abrupt(\"return\",r(\"No geometry, invalid dbId?\"));case 6:return s=t.getFragmentList(),c=new q.Box3,h=new q.Box3,a.forEach(function(e){s.getWorldBounds(e,c),h.union(c)}),i.abrupt(\"return\",o(h));case 13:return i.prev=13,i.t0=i.catch(0),i.abrupt(\"return\",r(i.t0));case 16:case\"end\":return i.stop()}},i,this,[[0,13]])}));return function(e,t){return i.apply(this,arguments)}}())}},{key:\"getProperties\",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(o,r){try{if(i){var a=i.map(function(i){return e.getProperty(t,n,i,\"Not Available\")});Promise.all(a).then(function(e){o(e)})}else t.getProperties(n,function(e){return e.properties?o(e.properties):r(\"No Properties\")})}catch(s){return console.log(s),r(s)}})}},{key:\"getProperty\",value:function(e,t,n,i){return new Promise(function(o,r){try{e.getProperties(t,function(e){if(e.properties){if(e.properties.forEach(function(e){e.dbId=t,\"function\"===typeof n?n(e.displayName)&&o(e):n===e.displayName&&o(e)}),i)return o({displayValue:i,displayName:n,dbId:t});r(new Error(\"Not Found\"))}else r(new Error(\"Error getting properties\"))})}catch(a){return r(a)}})}},{key:\"getPropertyList\",value:function(t,n){return new Promise(function(){var i=Object(c.a)(l.a.mark(function i(o,r){var a,s,c;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a=n.map(function(n){return e.getProperties(t,n)}),i.next=4,Promise.all(a);case 4:return s=i.sent,c=[],s.forEach(function(e){e.forEach(function(e){c.indexOf(e.displayName)<0&&c.push(e.displayName)})}),i.abrupt(\"return\",o(c.sort()));case 10:return i.prev=10,i.t0=i.catch(0),i.abrupt(\"return\",r(i.t0));case 13:case\"end\":return i.stop()}},i,this,[[0,10]])}));return function(e,t){return i.apply(this,arguments)}}())}},{key:\"getBulkPropertiesAsync\",value:function(e,t,n){var i=this;return new Promise(function(){var o=Object(c.a)(l.a.mark(function o(r,a){var s,c,h;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(\"function\"!==typeof n){o.next=9;break}return s=t.map(function(t){return i.getProperty(e,t,n,\"Not Found\")}),o.next=4,Promise.all(s);case 4:c=o.sent,h=c.filter(function(e){return\"Not Found\"!==e.displayValue}),r(h.map(function(e){return{properties:[e],dbId:e.dbId}})),o.next=10;break;case 9:e.getBulkProperties(t,n,function(e){r(e)},function(e){a(e)});case 10:case\"end\":return o.stop()}},o,this)}));return function(e,t){return o.apply(this,arguments)}}())}},{key:\"mapComponentsByProp\",value:function(t,n,i,o){return new Promise(function(){var o=Object(c.a)(l.a.mark(function o(r,a){var s,c,h;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.getBulkPropertiesAsync(t,i,n);case 3:return s=o.sent,c=s.map(function(e){return Object.assign({},e.properties[0],{dbId:e.dbId})}),h={},c.forEach(function(e){var t=e.displayValue;\"string\"==typeof t&&(t=t.split(\":\")[0]),h[t]||(h[t]=[]),h[t].push(e.dbId)}),o.abrupt(\"return\",r(h));case 10:return o.prev=10,o.t0=o.catch(0),o.abrupt(\"return\",a(o.t0));case 13:case\"end\":return o.stop()}},o,this,[[0,10]])}));return function(e,t){return o.apply(this,arguments)}}())}},{key:\"runTaskOnDataTree\",value:function(e,t){var n=[];return function e(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.children&&i.children.forEach(function(t){e(t,i)});var r=t(i,o);n.push(r)}(e),Promise.all(n)}},{key:\"drawBox\",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i||(i=new q.LineBasicMaterial({color:16776960,linewidth:2}),e.impl.matman().addMaterial(\"ADN-Material-Line\",i,!0));var o=function(t,n){for(var i=[],o=0;o<t.length;o+=2){var r=t[o],a=t[o+1],s=new q.Geometry;s.vertices.push(new q.Vector3(r.x,r.y,r.z)),s.vertices.push(new q.Vector3(a.x,a.y,a.z)),s.computeLineDistances();var l=new q.Line(s,n);e.impl.scene.add(l),i.push(l)}return i}([{x:t.x,y:t.y,z:t.z},{x:n.x,y:t.y,z:t.z},{x:n.x,y:t.y,z:t.z},{x:n.x,y:t.y,z:n.z},{x:n.x,y:t.y,z:n.z},{x:t.x,y:t.y,z:n.z},{x:t.x,y:t.y,z:n.z},{x:t.x,y:t.y,z:t.z},{x:t.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:t.z},{x:n.x,y:n.y,z:t.z},{x:t.x,y:n.y,z:t.z},{x:t.x,y:n.y,z:t.z},{x:t.x,y:n.y,z:n.z},{x:t.x,y:t.y,z:t.z},{x:t.x,y:n.y,z:t.z},{x:n.x,y:t.y,z:t.z},{x:n.x,y:n.y,z:t.z},{x:n.x,y:t.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:t.x,y:t.y,z:n.z},{x:t.x,y:n.y,z:n.z}],i);return e.impl.sceneUpdated(!0),o}},{key:\"setMaterial\",value:function(){var t=Object(c.a)(l.a.mark(function t(n,i,o){var r,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getFragIds(n,i);case 2:r=t.sent,a=n.getFragmentList(),r.forEach(function(e){a.setMaterial(e,o)});case 5:case\"end\":return t.stop()}},t,this)}));return function(e,n,i){return t.apply(this,arguments)}}()},{key:\"buildModelTree\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n=e.getData().instanceTree,i=n.getRootId(),o={dbId:i,name:n.getNodeName(i)};return function e(i){n.enumNodeChildren(i.dbId,function(o){var r=null;t?r=t(o):(i.children=i.children||[],r={dbId:o,name:n.getNodeName(o)},i.children.push(r)),e(r)})}(o),o}},{key:\"executeTaskOnModelTree\",value:function(e,t){var n=[];var i=e.getData().instanceTree;return function o(r){i.enumNodeChildren(r,function(i){n.push(t(e,i)),o(i)})}(i.getRootId()),n}},{key:\"isolateFull\",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise(function(){var o=Object(c.a)(l.a.mark(function o(r,a){var s,c,h,u;return l.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,n=n||t.model,t.isolate(i),s=Array.isArray(i)?i:[i],o.next=6,e.getLeafNodes(n,s);case 6:return c=o.sent,o.next=9,e.getLeafNodes(n);case 9:return h=o.sent,u=h.map(function(e){return new Promise(function(n){var i=!c.length||c.indexOf(e)>-1;t.impl.visibilityManager.setNodeOff(e,!i),n()})}),o.abrupt(\"return\",Promise.all(u));case 14:return o.prev=14,o.t0=o.catch(0),o.abrupt(\"return\",a(o.t0));case 17:case\"end\":return o.stop()}},o,this,[[0,14]])}));return function(e,t){return o.apply(this,arguments)}}())}},{key:\"mobile\",get:function(){return{getUserAgent:function(){return navigator.userAgent},isAndroid:function(){return this.getUserAgent().match(/Android/i)},isBlackBerry:function(){return this.getUserAgent().match(/BlackBerry/i)},isIOS:function(){return this.getUserAgent().match(/iPhone|iPad|iPod/i)},isOpera:function(){return this.getUserAgent().match(/Opera Mini/i)},isWindows:function(){return this.isWindowsDesktop()||this.isWindowsMobile()},isWindowsMobile:function(){return this.getUserAgent().match(/IEMobile/i)},isWindowsDesktop:function(){return this.getUserAgent().match(/WPDesktop/i)},isAny:function(){return this.isAndroid()||this.isBlackBerry()||this.isIOS()||this.isWindowsMobile()}}}}]),e}(),$=window.Autodesk,K=window.THREE,ee=function(e){function t(e,n){var i;return Object(d.a)(this,t),(i=Object(m.a)(this,Object(v.a)(t).call(this,e,n))).firstModelLoaded=null,i.modelCollection={},i.onGeometryLoadedHandler=function(e){i.onGeometryLoaded(e)},i.onAggregateSelectionChangedHandler=function(e){i.onAggregateSelectionChanged(e)},i.selectedDbIdArray=[],i}return Object(f.a)(t,e),Object(p.a)(t,[{key:\"load\",value:function(){var e=this;this.loadControls();var t=$.Viewing.theHotkeyManager;this.hotkeysId=Q.guid();var n={keycodes:[t.KEYCODES.t],onPress:function(e){return!0},onRelease:function(t){var n=null;if(e.panel.rxTool.active&&(n=e.panel.rxTool.hitPoint(),e._viewer.toolController.deactivateTool(e.panel.rxTool.getName())),!e.panel.txTool.active&&(e._viewer.toolController.activateTool(e.panel.txTool.getName()),n)){e.panel.txTool.setHitPoint(n);var i=e._viewer.getAggregateSelection();if(i.length){var o=i[0].model,r=i[0].selection;J.getFragIds(o,r).then(function(t){e.panel.txTool.setSelection({fragIdsArray:t,dbIdArray:r,model:o})})}}return!0}},i={keycodes:[t.KEYCODES.r],onPress:function(e){return!0},onRelease:function(t){var n=null;if(e.panel.txTool.active&&(n=e.panel.txTool.hitPoint(),e._viewer.toolController.deactivateTool(e.panel.txTool.getName())),!e.panel.rxTool.active&&(e._viewer.toolController.activateTool(e.panel.rxTool.getName()),n)){e.panel.rxTool.setHitPoint(n);var i=e._viewer.getAggregateSelection();if(i.length){var o=i[0].model,r=i[0].selection;J.getFragIds(o,r).then(function(t){e.panel.rxTool.setSelection({fragIdsArray:t,dbIdArray:r,model:o})})}}return!0}};return t.pushHotkeys(this.hotkeysId,[n,i],{tryUntilSuccess:!0}),this._viewer.addEventListener($.Viewing.GEOMETRY_LOADED_EVENT,this.onGeometryLoadedHandler),this._viewer.addEventListener($.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChangedHandler),console.log(\"Viewing.Extension.ModelTransformer loaded\"),!0}},{key:\"loadControls\",value:function(){var e=this;if(this.control=J.createButton(\"toolbar-model-transformer\",\"adsk-button-icon model-transformer-icon fa fa-gears\",\"Transform Models\",function(){e.panel.toggleVisibility()}),this.panel=new W(this._viewer,this.control.container),this.panel.on(\"open\",function(){e._options.autoLoad&&e._viewer.impl.modelQueue().getModels().forEach(function(t){t.modelId=t.modelId||Q.guid(),e.modelCollection[t.modelId]||(t.name=t.name||\"Model \"+(Object.keys(e.modelCollection).length+1),e.addModel(t))})}),this.panel.on(\"model.transform\",function(t){t.model.transform=t.transform,e.applyTransform(t.model),e._viewer.impl.sceneUpdated(!0)}),this.panel.on(\"model.delete\",function(t){e.deleteModel(t.model),e._viewer.impl.sceneUpdated(!0)}),this.panel.on(\"model.selected\",function(t){e.currentSelection=t.selection}),this._options.parentControl)\"string\"===typeof this._options.parentControl?this.parentControl=this._viewer.getToolbar().getControl(this._options.parentControl):\"object\"===typeof this._options.parentControl&&(this.parentControl=this._options.parentControl);else{var t=this._viewer.getToolbar(!0);this.parentControl=new $.Viewing.UI.ControlGroup(\"model-transformer\"),t.addControl(this.parentControl)}this.parentControl&&this.parentControl.addControl(this.control)}},{key:\"onGeometryLoaded\",value:function(e){if(this._options.autoLoad){var t=e.model;t.modelId=t.modelId||Q.guid(),this.modelCollection[t.modelId]||(t.name=t.name||\"Model \"+(Object.keys(this.modelCollection).length+1),this.addModel(t))}}},{key:\"unload\",value:function(){return $.Viewing.theHotkeyManager.popHotkeys(this.hotkeysId),this._viewer.removeEventListener($.Viewing.GEOMETRY_LOADED_EVENT,this.onGeometryLoadedHandler),this._viewer.removeEventListener($.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,this.onAggregateSelectionChangedHandler),this.control&&this.parentControl.removeControl(this.control),console.log(\"Viewing.Extension.ModelTransfomer unloaded\"),!0}},{key:\"onAggregateSelectionChanged\",value:function(e){if(e.selections&&e.selections.length){var t=e.selections[0];this.selectedDbIdArray=e.selections[0].dbIdArray,this.setStructure(t.model)}}},{key:\"applyTransform\",value:function(e){var t=this._viewer,n=new K.Euler(e.transform.rotation.x*Math.PI/180,e.transform.rotation.y*Math.PI/180,e.transform.rotation.z*Math.PI/180,\"XYZ\"),i=new K.Quaternion;function o(n){var o=t.impl.getFragmentProxy(e,n);o.getAnimTransform(),o.position=e.transform.translation,o.scale=e.transform.scale,o.quaternion._x=i.x,o.quaternion._y=i.y,o.quaternion._z=i.z,o.quaternion._w=i.w,o.updateAnimTransform()}i.setFromEuler(n);for(var r=e.getFragmentList().fragments.fragId2dbId.length,a=0;a<r;++a)o(a)}},{key:\"fitModelToView\",value:function(e){var t=e.getData().instanceTree;if(t){var n=t.getRootId();this._viewer.model=e,this._viewer.fitToView([n])}}},{key:\"setStructure\",value:function(e){var t=e.getData().instanceTree;t&&this._viewer.modelstructure&&this._viewer.modelstructure.setModel(t)}},{key:\"addModel\",value:function(e){this.modelCollection[e.modelId]=e,e.transform||(e.transform={scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}),this.panel.dropdown.addItem(e,!0)}},{key:\"modelTransformToMatrix\",value:function(e){var t=new K.Matrix4,n=new K.Vector3(e.translation.x,e.translation.y,e.translation.z),i=new K.Euler(e.rotation.x*Math.PI/180,e.rotation.y*Math.PI/180,e.rotation.z*Math.PI/180,\"XYZ\"),o=new K.Quaternion;o.setFromEuler(i);var r=new K.Vector3(e.scale.x,e.scale.y,e.scale.z);return t.compose(n,o,r),t}},{key:\"buildPlacementTransform\",value:function(e){var t=new K.Matrix4;this.firstModelLoaded||(this.firstModelLoaded=e);var n=[\"rvt\",\"nwc\"],i=this.firstModelLoaded.split(\".\").pop(-1),o=e.split(\".\").pop(-1);return n.indexOf(i)>-1?n.indexOf(o)<0&&t.makeRotationX(90*Math.PI/180):n.indexOf(o)>-1&&t.makeRotationX(-90*Math.PI/180),t}},{key:\"deleteModel\",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];delete this.modelCollection[e.modelId],0===Object.keys(this.modelCollection).length&&(this.firstModelLoaded=null),t&&this.emit(\"model.delete\",e),this._viewer.impl.unloadModel(e)}},{key:\"clearModels\",value:function(){this.panel.clearSelection(),this.panel.dropdown.clear(),this.modelCollection={}}}],[{key:\"ExtensionId\",get:function(){return\"Viewing.Extension.ModelTransformer\"}}]),t}(Q);$.Viewing.theExtensionManager.registerExtension(ee.ExtensionId,ee);var te=\"Viewing.Extension.ModelTransformer\";function ne(e){for(var t=function(e){for(var t=[],n=u()(\"<tr/>\"),i=0;i<e.length;i++){var o=e[i];for(var r in o)-1===u.a.inArray(r,t)&&(t.push(r),n.append(u()(\"<th/>\").html(r)))}return u()(\"#csvDataTable\").append(n),t}(e),n=0;n<e.length;n++){for(var i=u()(\"<tr/>\"),o=0;o<t.length;o++){var r=e[n][t[o]];null==r&&(r=\"\"),i.append(u()(\"<td/>\").html(r))}u()(\"#csvDataTable\").append(i)}}u()(\"#btnDataImport\").click(function(){var e;e=function(e){u()(\"#csvDataTable\").empty(),ne(e),u()(\"#csvDataTable tr\").click(function(){u()(this).addClass(\"selected\").siblings().removeClass(\"selected\");var e=u()(this).find(\"td:first\").html();console.log(e),e})},u.a.ajax({url:\"/rivetec/getrivets\",success:function(t){console.log(\"rivets portflio\",t),e(t)}})});var ie,oe,re=\"importCsvData\",ae=window.Autodesk,se=window.THREE,le={},ce={env:\"AutodeskProduction\",getAccessToken:function(e){u.a.ajax({url:\"/user/token\",success:function(t){console.log(\"res de token client\",t),e(t.access_token,t.expires_in)}})}};function he(e){var t=ae.Viewing.Document.getSubItemsWithProperties(e.getRootItem(),{type:\"geometry\"},!0);if(0!==t.length){ie.addEventListener(ae.Viewing.GEOMETRY_LOADED_EVENT,ue),ie.addEventListener(ae.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,de),ie.prefs.tag(\"ignore-producer\"),ie.loadExtension(te,{parentControl:\"modelTools\",autoLoad:!0});!function(e,t,n){new Promise(function(){var i=Object(c.a)(l.a.mark(function i(o,r){var a,s,c,h,u;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:a=e[n],s=t.getViewablePath(a),u={sharedPropertyDbPath:t.getPropertyDbPath()},ie.loadModel(s,u,function(e){switch(\"success\"===t.myData.status.toString()){case\"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE5LTAxLTAzLTE0LTI4LTI4LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0hlYWQwMS5pcHQ\"===t.myData.guid.toString():(c=ie.getExtension(te).panel).setTransform(me()),c.applyTransform(e),h=\"Head01.ipt\";break;default:h=\"Body_Obal_1.ipt\"}e.name=h,o(e)});case 4:case\"end\":return i.stop()}},i,this)}));return function(e,t){return i.apply(this,arguments)}}())}(t,e,0)}else console.error(\"Document contains no viewables.\")}function ue(e){e.target.model=e.model;var t=e.target;t.removeEventListener(ae.Viewing.GEOMETRY_LOADED_EVENT,ue),t.setQualityLevel(!1,!1),t.setGroundShadow(!1),t.fitToView()}function de(e){e.selections&&e.selections.length&&(le=ie.clientToWorld(oe.canvasX,oe.canvasY,!0))}function pe(e){console.error(\"onDocumentLoadFailure() - errorCode:\"+e)}function me(){var e={translation:new se.Vector3(0,0,0),rotation:new se.Vector3(0,0,0),scale:new se.Vector3(1,1,1)};switch(le.face.normal.x*le.face.normal.y===0){case 0===le.face.normal.x&&1===Math.round(le.face.normal.y):e.translation=new se.Vector3(le.point.x,le.point.y+.3,le.point.z),e.rotation=new se.Vector3(0,0,180),console.log(\"Inside Y = 1 Wall\");break;case 0===le.face.normal.x&&-1===Math.round(le.face.normal.y):e.translation=new se.Vector3(le.point.x,le.point.y-.3,le.point.z),e.rotation=new se.Vector3(0,0,0),console.log(\"Inside Y = -1 Wall\");break;case 1===Math.round(le.face.normal.x)&&0===le.face.normal.y:e.translation=new se.Vector3(le.point.x+.3,le.point.y,le.point.z),e.rotation=new se.Vector3(90,90,0),console.log(\"Inside X = 1 Wall\");break;case-1===Math.round(le.face.normal.x)&&0===le.face.normal.y:e.translation=new se.Vector3(le.point.x-.35,le.point.y,le.point.z),e.rotation=new se.Vector3(0,180,90),console.log(\"Inside X = -1 Wall\");break;default:alert(\"You need to select one of the walls for this AC Unit\")}return e}!function(e){var t=document.getElementById(\"forgeViewer\");ie=new ae.Viewing.Private.GuiViewer3D(t),ae.Viewing.Initializer(ce,function(){var t=ie.start();t?console.error(\"viewer.start() error - errorCode:\"+t):ae.Viewing.Document.load(e,he,pe)})}(\"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTEyLTA1LTEwLTA0LTM3LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0JvZHlfT2JhbF8xLmlwdA\"),u()(\"#addModelBtn\").click(function(){!function(e){var t=\"\";\"1\"===e?t=\"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE5LTAxLTAzLTE0LTI4LTI4LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0hlYWQwMS5pcHQ\":(t=\"\",alert(\"Model s t\\xedmto ID nem\\xe1m v datab\\xe1zi\"));console.log(\"model URN: \"+t)}(function(){var e=re.rowID;return console.log(\"Kliknul jsi na ADD SELECTED a rowId je: \"+e),e}()),ae.Viewing.Document.load(\"urn:dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE5LTAxLTAzLTE0LTI4LTI4LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0hlYWQwMS5pcHQ\",he,pe)}),a.a.render(o.a.createElement(\"h1\",null,\"Hello world jeste jednou\"),document.getElementById(\"root\"))}},[[15,2,1]]]);","extractedComments":[]}