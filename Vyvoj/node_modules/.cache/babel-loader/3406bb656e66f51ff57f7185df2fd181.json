{"ast":null,"code":"import _classCallCheck from \"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n/////////////////////////////////////////////////////////////////////\n//\n//\n//\n/////////////////////////////////////////////////////////////////////\n\n/* eslint-disable */\nimport TranslateTool from './Viewing.Tool.Translate';\nimport './Viewing.Extension.ModelTransformer.css';\nimport RotateTool from './Viewing.Tool.Rotate';\nimport ViewerTooltip from '../components/Viewer.Tooltip';\nimport ToolPanelBase from '../components/ToolPanelBase';\nimport SwitchButton from '../components/SwitchButton';\nimport Dropdown from '../components/Dropdown';\nvar Autodesk = window.Autodesk;\nvar THREE = window.THREE;\nvar $ = window.$;\n\nvar ModelTransformerPanel =\n/*#__PURE__*/\nfunction (_ToolPanelBase) {\n  _inherits(ModelTransformerPanel, _ToolPanelBase);\n\n  function ModelTransformerPanel(viewer, btnElement) {\n    var _this;\n\n    _classCallCheck(this, ModelTransformerPanel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ModelTransformerPanel).call(this, viewer.container, 'Transform Models', {\n      buttonElement: btnElement,\n      closable: true,\n      movable: true,\n      shadow: true\n    }));\n    $(_this.container).addClass('model-transformer');\n    _this.dropdown = new Dropdown({\n      container: '#' + _this.dropdownContainerId,\n      title: 'Select Model',\n      prompt: 'Select Model ...',\n      pos: {\n        top: 0,\n        left: 0\n      }\n    });\n\n    _this.dropdown.on('item.selected', function (model) {\n      _this.currentModel = model;\n\n      if (model) {\n        _this.setTransform(model.transform);\n\n        _this.emit('model.selected', {\n          fitToView: true,\n          model: model\n        });\n      }\n    });\n\n    var applyTransform = function applyTransform(model) {\n      var fitToView = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      console.log(model);\n\n      _this.txTool.clearSelection();\n\n      _this.rxTool.clearSelection();\n\n      if (model) {\n        _this.emit('model.transform', {\n          model: model,\n          fitToView: fitToView,\n          transform: {\n            translation: _this.getTranslation(),\n            rotation: _this.getRotation(),\n            scale: _this.getScale()\n          }\n        });\n      }\n    }; // Adding this but needs improvement since Panel should be completely separate\n    // from the use of the Model Transformation of the model.\n\n\n    _this.applyTransform = applyTransform;\n    _this.fullTransformSwitch = new SwitchButton(\"#\".concat(_this.container.id, \"-full-transform-switch\"));\n    _this.fullTransform = true;\n\n    _this.fullTransformSwitch.on('checked', function (checked) {\n      _this.txTool.fullTransform = checked;\n      _this.rxTool.fullTransform = checked;\n      _this.fullTransform = checked;\n\n      _this.txTool.clearSelection();\n\n      _this.rxTool.clearSelection();\n    });\n\n    $(\"#\".concat(_this.container.id, \"-unload-btn\")).click(function () {\n      _this.txTool.clearSelection();\n\n      if (_this.currentModel) {\n        _this.emit('model.delete', {\n          model: _this.currentModel\n        });\n\n        _this.dropdown.removeCurrentItem();\n      }\n    });\n    _this.viewer = viewer;\n    _this.txTool = new TranslateTool(viewer);\n    _this.rxTool = new RotateTool(viewer);\n    _this.txTool.fullTransform = true;\n    _this.rxTool.fullTransform = true;\n\n    _this.viewer.toolController.registerTool(_this.txTool);\n\n    _this.viewer.toolController.registerTool(_this.rxTool);\n\n    _this.txTool.on('transform.translate', function (data) {\n      data.model.transform.translation = data.translation;\n\n      _this.setTranslation(data.model.transform.translation);\n    });\n\n    _this.rxTool.on('transform.rotate', function (data) {\n      data.model.transform.rotation = data.rotation;\n\n      _this.setRotation({\n        x: data.rotation.x * 180 / Math.PI % 360,\n        y: data.rotation.y * 180 / Math.PI % 360,\n        z: data.rotation.z * 180 / Math.PI % 360\n      });\n    });\n\n    var onModelSelected = function onModelSelected(selection) {\n      $('#' + _this.transPickBtnId).prop('disabled', !_this.txTool.active);\n\n      _this.dropdown.setCurrentItem(selection.model);\n\n      _this.setTransform(selection.model.transform);\n\n      _this.currentModel = selection.model;\n\n      _this.emit('model.selected', {\n        model: selection.model,\n        fitToView: false\n      });\n\n      _this.tooltip.deactivate();\n    };\n\n    _this.txTool.on('transform.modelSelected', onModelSelected);\n\n    _this.txTool.on('transform.clearSelection', function () {\n      $('#' + _this.transPickBtnId).prop('disabled', true);\n\n      _this.tooltip.deactivate();\n    });\n\n    _this.rxTool.on('transform.modelSelected', onModelSelected);\n\n    _this.on('open', function () {\n      _this.viewer.toolController.activateTool(_this.txTool.getName());\n    });\n\n    _this.on('close', function () {\n      _this.viewer.toolController.deactivateTool(_this.txTool.getName());\n\n      _this.viewer.toolController.deactivateTool(_this.rxTool.getName());\n\n      $('#' + _this.transPickBtnId).prop('disabled', true);\n    });\n\n    $('.model-transformer .trans, ' + '.model-transformer .rot').on('change keyup input paste', function () {\n      applyTransform(_this.currentModel);\n    });\n    $('.model-transformer .trans').on('focus', function () {\n      _this.viewer.toolController.deactivateTool(_this.rxTool.getName());\n\n      _this.viewer.toolController.activateTool(_this.txTool.getName());\n    });\n    $('.model-transformer .rot').on('focus', function () {\n      _this.viewer.toolController.deactivateTool(_this.txTool.getName());\n\n      _this.viewer.toolController.activateTool(_this.rxTool.getName());\n    });\n    $(\"#\".concat(_this.container.id, \"-Sx\")).on('change keyup', function () {\n      var scale = $(\"#\".concat(_this.container.id, \"-Sx\")).val();\n      $(\"#\".concat(_this.container.id, \"-Sy\")).val(scale);\n      $(\"#\".concat(_this.container.id, \"-Sz\")).val(scale);\n      applyTransform(_this.currentModel, true);\n    });\n    $('#' + _this.transPickBtnId).click(function () {\n      _this.txTool.onPick();\n\n      _this.tooltip.activate();\n    });\n    _this.tooltip = new ViewerTooltip(viewer);\n\n    _this.tooltip.setContent(\"\\n      <div id=\\\"pickTooltipId\\\" class=\\\"pick-tooltip\\\">\\n        <b>Pick position ...</b>\\n      </div>\", '#pickTooltipId');\n\n    return _this;\n  } /////////////////////////////////////////////////////////////\n  //\n  //\n  /////////////////////////////////////////////////////////////\n\n\n  _createClass(ModelTransformerPanel, [{\n    key: \"htmlContent\",\n    value: function htmlContent(id) {\n      this.dropdownContainerId = ToolPanelBase.guid();\n      this.transPickBtnId = ToolPanelBase.guid();\n      return \"\\n\\n      <div class=\\\"container\\\">\\n\\n         <div id=\\\"\".concat(this.dropdownContainerId, \"\\\">\\n        </div>\\n\\n        <hr class=\\\"v-spacer\\\">\\n\\n        <span class=\\\"text-span\\\">\\n            Snap:\\n          </span>\\n\\n          <hr class=\\\"v-spacer\\\">\\n\\n        <button id=\\\"\").concat(this.transPickBtnId, \"\\\"\\n            class=\\\"btn btn-trans-pick\\\" disabled>\\n            <span class=\\\"glyphicon glyphicon-screenshot btn-span\\\">\\n            </span>\\n          </button>\\n\\n        <hr class=\\\"v-spacer\\\">\\n\\n        <div>\\n\\n          <span class=\\\"text-span\\\">\\n            Translation:\\n          </span>\\n\\n          <hr class=\\\"v-spacer\\\">\\n\\n          \\n\\n          <input id=\\\"\").concat(id, \"-Tx\\\" type=\\\"text\\\"\\n            class=\\\"input numeric trans\\\"\\n            placeholder=\\\"  x (0.0)\\\">\\n\\n          <input id=\\\"\").concat(id, \"-Ty\\\" type=\\\"text\\\"\\n            class=\\\"input numeric trans\\\"\\n            placeholder=\\\"  y (0.0)\\\">\\n\\n          <input id=\\\"\").concat(id, \"-Tz\\\" type=\\\"text\\\"\\n            class=\\\"input numeric trans\\\"\\n            placeholder=\\\"  z (0.0)\\\">\\n\\n          <hr class=\\\"v-spacer\\\">\\n\\n          <span class=\\\"text-span\\\">\\n            Rotation (deg):\\n          </span>\\n\\n          <hr class=\\\"v-spacer\\\">\\n\\n          <input id=\\\"\").concat(id, \"-Rx\\\" type=\\\"text\\\"\\n            class=\\\"input numeric rot\\\"\\n            placeholder=\\\"  x (0.0)\\\">\\n\\n          <input id=\\\"\").concat(id, \"-Ry\\\" type=\\\"text\\\"\\n            class=\\\"input numeric rot\\\"\\n            placeholder=\\\"  y (0.0)\\\">\\n\\n          <input id=\\\"\").concat(id, \"-Rz\\\" type=\\\"text\\\"\\n            class=\\\"input numeric rot\\\"\\n            placeholder=\\\"  z (0.0)\\\">\\n\\n          <span class=\\\"text-span\\\">\\n            Scale:\\n          </span>\\n\\n          <hr class=\\\"v-spacer\\\">\\n\\n          <input id=\\\"\").concat(id, \"-Sx\\\" type=\\\"text\\\"\\n            class=\\\"input numeric scale\\\"\\n            placeholder=\\\"  x (1.0)\\\">\\n\\n          <input id=\\\"\").concat(id, \"-Sy\\\" type=\\\"text\\\"\\n            class=\\\"input numeric scale\\\"\\n            placeholder=\\\"  y (1.0)\\\">\\n\\n          <input id=\\\"\").concat(id, \"-Sz\\\" type=\\\"text\\\"\\n            class=\\\"input numeric scale\\\"\\n            placeholder=\\\"  z (1.0)\\\">\\n\\n          <hr class=\\\"v-spacer-large\\\">\\n\\n        </div>\\n\\n        <div style=\\\"margin-top:8px\\\">\\n\\n          <div style=\\\"color:white;\\\">\\n          Full Model Transform\\n            <div id=\\\"\").concat(id, \"-full-transform-switch\\\"\\n              style=\\\"float:left; margin-right:8px;\\\">\\n            </div>\\n          </div>\\n\\n          <hr class=\\\"v-spacer-large\\\">\\n\\n          <button class=\\\"btn btn-danger\\\" id=\\\"\").concat(id, \"-unload-btn\\\">\\n            <span class=\\\"glyphicon glyphicon-save-file btn-span\\\">\\n            </span>\\n             Unload Model\\n          </button>\\n        </div>\\n\\n      </div>\");\n    } /////////////////////////////////////////////////////////////\n    //\n    //\n    /////////////////////////////////////////////////////////////\n\n  }, {\n    key: \"setTransform\",\n    value: function setTransform(transform) {\n      $(\"#\".concat(this.container.id, \"-Tx\")).val(transform.translation.x.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Ty\")).val(transform.translation.y.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Tz\")).val(transform.translation.z.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Rx\")).val(transform.rotation.x.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Ry\")).val(transform.rotation.y.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Rz\")).val(transform.rotation.z.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Sx\")).val(transform.scale.x);\n      $(\"#\".concat(this.container.id, \"-Sy\")).val(transform.scale.y);\n      $(\"#\".concat(this.container.id, \"-Sz\")).val(transform.scale.z);\n    } /////////////////////////////////////////////////////////////\n    // Gets input transform\n    //\n    /////////////////////////////////////////////////////////////\n\n  }, {\n    key: \"getScale\",\n    value: function getScale() {\n      var x = parseFloat($(\"#\".concat(this.container.id, \"-Sx\")).val());\n      var y = parseFloat($(\"#\".concat(this.container.id, \"-Sy\")).val());\n      var z = parseFloat($(\"#\".concat(this.container.id, \"-Sz\")).val());\n      x = isNaN(x) ? 1.0 : x;\n      y = isNaN(y) ? 1.0 : y;\n      z = isNaN(z) ? 1.0 : z;\n      return new THREE.Vector3(x, y, z);\n    }\n  }, {\n    key: \"getTranslation\",\n    value: function getTranslation() {\n      var x = parseFloat($(\"#\".concat(this.container.id, \"-Tx\")).val());\n      var y = parseFloat($(\"#\".concat(this.container.id, \"-Ty\")).val());\n      var z = parseFloat($(\"#\".concat(this.container.id, \"-Tz\")).val());\n      x = isNaN(x) ? 0.0 : x;\n      y = isNaN(y) ? 0.0 : y;\n      z = isNaN(z) ? 0.0 : z;\n      return new THREE.Vector3(x, y, z);\n    }\n  }, {\n    key: \"getRotation\",\n    value: function getRotation() {\n      var x = parseFloat($(\"#\".concat(this.container.id, \"-Rx\")).val());\n      var y = parseFloat($(\"#\".concat(this.container.id, \"-Ry\")).val());\n      var z = parseFloat($(\"#\".concat(this.container.id, \"-Rz\")).val());\n      x = isNaN(x) ? 0.0 : x;\n      y = isNaN(y) ? 0.0 : y;\n      z = isNaN(z) ? 0.0 : z;\n      return new THREE.Vector3(x, y, z);\n    } /////////////////////////////////////////////////////////////\n    //\n    //\n    /////////////////////////////////////////////////////////////\n\n  }, {\n    key: \"setScale\",\n    value: function setScale(scale) {\n      $(\"#\".concat(this.container.id, \"-Sx\")).val(scale.x.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Sy\")).val(scale.y.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Sz\")).val(scale.z.toFixed(2));\n    }\n  }, {\n    key: \"setTranslation\",\n    value: function setTranslation(translation) {\n      $(\"#\".concat(this.container.id, \"-Tx\")).val(translation.x.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Ty\")).val(translation.y.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Tz\")).val(translation.z.toFixed(2));\n    }\n  }, {\n    key: \"setRotation\",\n    value: function setRotation(rotation) {\n      $(\"#\".concat(this.container.id, \"-Rx\")).val(rotation.x.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Ry\")).val(rotation.y.toFixed(2));\n      $(\"#\".concat(this.container.id, \"-Rz\")).val(rotation.z.toFixed(2));\n    } /////////////////////////////////////////////////////////////\n    //\n    //\n    /////////////////////////////////////////////////////////////\n\n  }, {\n    key: \"clearSelection\",\n    value: function clearSelection() {\n      this.txTool.clearSelection();\n      this.rxTool.clearSelection();\n    }\n  }]);\n\n  return ModelTransformerPanel;\n}(ToolPanelBase);\n\nexport { ModelTransformerPanel as default };","map":{"version":3,"sources":["E:\\GitHub\\FrogeCsConfiguratorRivetec\\Vyvoj\\src\\js\\extensions\\Viewing.Extension.ModelTransformer\\Viewing.Extension.ModelTransformer.Panel.js"],"names":["TranslateTool","RotateTool","ViewerTooltip","ToolPanelBase","SwitchButton","Dropdown","Autodesk","window","THREE","$","ModelTransformerPanel","viewer","btnElement","container","buttonElement","closable","movable","shadow","addClass","dropdown","dropdownContainerId","title","prompt","pos","top","left","on","model","currentModel","setTransform","transform","emit","fitToView","applyTransform","console","log","txTool","clearSelection","rxTool","translation","getTranslation","rotation","getRotation","scale","getScale","fullTransformSwitch","id","fullTransform","checked","click","removeCurrentItem","toolController","registerTool","data","setTranslation","setRotation","x","Math","PI","y","z","onModelSelected","selection","transPickBtnId","prop","active","setCurrentItem","tooltip","deactivate","activateTool","getName","deactivateTool","val","onPick","activate","setContent","guid","toFixed","parseFloat","isNaN","Vector3"],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;AACA;AACA,OAAOA,aAAP,MAA0B,0BAA1B;AACA,OAAO,0CAAP;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,OAAOC,aAAP,MAA0B,6BAA1B;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,IAAMC,QAAQ,GAAGC,MAAM,CAACD,QAAxB;AACA,IAAME,KAAK,GAAGD,MAAM,CAACC,KAArB;AACA,IAAMC,CAAC,GAAGF,MAAM,CAACE,CAAjB;;IAGqBC,qB;;;;;AAEnB,iCAAYC,MAAZ,EAAoBC,UAApB,EAAgC;AAAA;;AAAA;;AAE9B,+FAAMD,MAAM,CAACE,SAAb,EAAwB,kBAAxB,EAA4C;AAC1CC,MAAAA,aAAa,EAAEF,UAD2B;AAE1CG,MAAAA,QAAQ,EAAE,IAFgC;AAG1CC,MAAAA,OAAO,EAAE,IAHiC;AAI1CC,MAAAA,MAAM,EAAE;AAJkC,KAA5C;AAOAR,IAAAA,CAAC,CAAC,MAAKI,SAAN,CAAD,CAAkBK,QAAlB,CAA2B,mBAA3B;AAEA,UAAKC,QAAL,GAAgB,IAAId,QAAJ,CAAa;AAC3BQ,MAAAA,SAAS,EAAE,MAAM,MAAKO,mBADK;AAE3BC,MAAAA,KAAK,EAAE,cAFoB;AAG3BC,MAAAA,MAAM,EAAE,kBAHmB;AAI3BC,MAAAA,GAAG,EAAE;AACHC,QAAAA,GAAG,EAAE,CADF;AACKC,QAAAA,IAAI,EAAE;AADX;AAJsB,KAAb,CAAhB;;AASA,UAAKN,QAAL,CAAcO,EAAd,CAAiB,eAAjB,EAAkC,UAACC,KAAD,EAAW;AAE3C,YAAKC,YAAL,GAAoBD,KAApB;;AAEA,UAAIA,KAAJ,EAAW;AAET,cAAKE,YAAL,CAAkBF,KAAK,CAACG,SAAxB;;AAEA,cAAKC,IAAL,CAAU,gBAAV,EAA4B;AAC1BC,UAAAA,SAAS,EAAE,IADe;AAE1BL,UAAAA,KAAK,EAALA;AAF0B,SAA5B;AAID;AACF,KAbD;;AAeA,QAAIM,cAAc,GAAG,SAAjBA,cAAiB,CAACN,KAAD,EAA8B;AAAA,UAAtBK,SAAsB,uEAAV,KAAU;AACjDE,MAAAA,OAAO,CAACC,GAAR,CAAYR,KAAZ;;AACA,YAAKS,MAAL,CAAYC,cAAZ;;AACA,YAAKC,MAAL,CAAYD,cAAZ;;AAEA,UAAIV,KAAJ,EAAW;AAET,cAAKI,IAAL,CAAU,iBAAV,EAA6B;AAE3BJ,UAAAA,KAAK,EAAEA,KAFoB;AAI3BK,UAAAA,SAAS,EAATA,SAJ2B;AAM3BF,UAAAA,SAAS,EAAE;AACTS,YAAAA,WAAW,EAAE,MAAKC,cAAL,EADJ;AAETC,YAAAA,QAAQ,EAAE,MAAKC,WAAL,EAFD;AAGTC,YAAAA,KAAK,EAAE,MAAKC,QAAL;AAHE;AANgB,SAA7B;AAYD;AACF,KApBD,CAnC8B,CAwD9B;AACA;;;AACA,UAAKX,cAAL,GAAsBA,cAAtB;AAEA,UAAKY,mBAAL,GAA2B,IAAIzC,YAAJ,YACrB,MAAKS,SAAL,CAAeiC,EADM,4BAA3B;AAGA,UAAKC,aAAL,GAAqB,IAArB;;AAEA,UAAKF,mBAAL,CAAyBnB,EAAzB,CAA4B,SAA5B,EAAuC,UAACsB,OAAD,EAAa;AAElD,YAAKZ,MAAL,CAAYW,aAAZ,GAA4BC,OAA5B;AACA,YAAKV,MAAL,CAAYS,aAAZ,GAA4BC,OAA5B;AACA,YAAKD,aAAL,GAAqBC,OAArB;;AAEA,YAAKZ,MAAL,CAAYC,cAAZ;;AACA,YAAKC,MAAL,CAAYD,cAAZ;AACD,KARD;;AAUA5B,IAAAA,CAAC,YAAK,MAAKI,SAAL,CAAeiC,EAApB,iBAAD,CAAsCG,KAAtC,CAA4C,YAAM;AAEhD,YAAKb,MAAL,CAAYC,cAAZ;;AAEA,UAAI,MAAKT,YAAT,EAAuB;AAErB,cAAKG,IAAL,CAAU,cAAV,EAA0B;AAExBJ,UAAAA,KAAK,EAAE,MAAKC;AAFY,SAA1B;;AAKA,cAAKT,QAAL,CAAc+B,iBAAd;AACD;AACF,KAbD;AAeA,UAAKvC,MAAL,GAAcA,MAAd;AAEA,UAAKyB,MAAL,GAAc,IAAIpC,aAAJ,CAAkBW,MAAlB,CAAd;AACA,UAAK2B,MAAL,GAAc,IAAIrC,UAAJ,CAAeU,MAAf,CAAd;AAEA,UAAKyB,MAAL,CAAYW,aAAZ,GAA4B,IAA5B;AACA,UAAKT,MAAL,CAAYS,aAAZ,GAA4B,IAA5B;;AAEA,UAAKpC,MAAL,CAAYwC,cAAZ,CAA2BC,YAA3B,CAAwC,MAAKhB,MAA7C;;AACA,UAAKzB,MAAL,CAAYwC,cAAZ,CAA2BC,YAA3B,CAAwC,MAAKd,MAA7C;;AAEA,UAAKF,MAAL,CAAYV,EAAZ,CAAe,qBAAf,EAAsC,UAAC2B,IAAD,EAAU;AAE9CA,MAAAA,IAAI,CAAC1B,KAAL,CAAWG,SAAX,CAAqBS,WAArB,GAAmCc,IAAI,CAACd,WAAxC;;AAEA,YAAKe,cAAL,CACED,IAAI,CAAC1B,KAAL,CAAWG,SAAX,CAAqBS,WADvB;AAED,KAND;;AAQA,UAAKD,MAAL,CAAYZ,EAAZ,CAAe,kBAAf,EAAmC,UAAC2B,IAAD,EAAU;AAE3CA,MAAAA,IAAI,CAAC1B,KAAL,CAAWG,SAAX,CAAqBW,QAArB,GAAgCY,IAAI,CAACZ,QAArC;;AAEA,YAAKc,WAAL,CAAiB;AACfC,QAAAA,CAAC,EAAGH,IAAI,CAACZ,QAAL,CAAce,CAAd,GAAkB,GAAlB,GAAwBC,IAAI,CAACC,EAA9B,GAAoC,GADxB;AAEfC,QAAAA,CAAC,EAAGN,IAAI,CAACZ,QAAL,CAAckB,CAAd,GAAkB,GAAlB,GAAwBF,IAAI,CAACC,EAA9B,GAAoC,GAFxB;AAGfE,QAAAA,CAAC,EAAGP,IAAI,CAACZ,QAAL,CAAcmB,CAAd,GAAkB,GAAlB,GAAwBH,IAAI,CAACC,EAA9B,GAAoC;AAHxB,OAAjB;AAKD,KATD;;AAWA,QAAIG,eAAe,GAAG,SAAlBA,eAAkB,CAACC,SAAD,EAAe;AAEnCrD,MAAAA,CAAC,CAAC,MAAM,MAAKsD,cAAZ,CAAD,CAA6BC,IAA7B,CACE,UADF,EACc,CAAC,MAAK5B,MAAL,CAAY6B,MAD3B;;AAGA,YAAK9C,QAAL,CAAc+C,cAAd,CAA6BJ,SAAS,CAACnC,KAAvC;;AAEA,YAAKE,YAAL,CAAkBiC,SAAS,CAACnC,KAAV,CAAgBG,SAAlC;;AAEA,YAAKF,YAAL,GAAoBkC,SAAS,CAACnC,KAA9B;;AAEA,YAAKI,IAAL,CAAU,gBAAV,EAA4B;AAC1BJ,QAAAA,KAAK,EAAEmC,SAAS,CAACnC,KADS;AAE1BK,QAAAA,SAAS,EAAE;AAFe,OAA5B;;AAKA,YAAKmC,OAAL,CAAaC,UAAb;AACD,KAjBD;;AAmBA,UAAKhC,MAAL,CAAYV,EAAZ,CAAe,yBAAf,EACEmC,eADF;;AAGA,UAAKzB,MAAL,CAAYV,EAAZ,CAAe,0BAAf,EAA2C,YAAM;AAE/CjB,MAAAA,CAAC,CAAC,MAAM,MAAKsD,cAAZ,CAAD,CAA6BC,IAA7B,CACE,UADF,EACc,IADd;;AAGA,YAAKG,OAAL,CAAaC,UAAb;AACD,KAND;;AAQA,UAAK9B,MAAL,CAAYZ,EAAZ,CAAe,yBAAf,EACEmC,eADF;;AAGA,UAAKnC,EAAL,CAAQ,MAAR,EAAgB,YAAM;AAEpB,YAAKf,MAAL,CAAYwC,cAAZ,CAA2BkB,YAA3B,CACE,MAAKjC,MAAL,CAAYkC,OAAZ,EADF;AAED,KAJD;;AAMA,UAAK5C,EAAL,CAAQ,OAAR,EAAiB,YAAM;AAErB,YAAKf,MAAL,CAAYwC,cAAZ,CAA2BoB,cAA3B,CACE,MAAKnC,MAAL,CAAYkC,OAAZ,EADF;;AAGA,YAAK3D,MAAL,CAAYwC,cAAZ,CAA2BoB,cAA3B,CACE,MAAKjC,MAAL,CAAYgC,OAAZ,EADF;;AAGA7D,MAAAA,CAAC,CAAC,MAAM,MAAKsD,cAAZ,CAAD,CAA6BC,IAA7B,CACE,UADF,EACc,IADd;AAED,KAVD;;AAYAvD,IAAAA,CAAC,CAAC,gCACA,yBADD,CAAD,CAC6BiB,EAD7B,CAEE,0BAFF,EAE8B,YAAI;AAE9BO,MAAAA,cAAc,CAAC,MAAKL,YAAN,CAAd;AACH,KALD;AAOAnB,IAAAA,CAAC,CAAC,2BAAD,CAAD,CAA+BiB,EAA/B,CACE,OADF,EACW,YAAM;AAEb,YAAKf,MAAL,CAAYwC,cAAZ,CAA2BoB,cAA3B,CACE,MAAKjC,MAAL,CAAYgC,OAAZ,EADF;;AAGA,YAAK3D,MAAL,CAAYwC,cAAZ,CAA2BkB,YAA3B,CACE,MAAKjC,MAAL,CAAYkC,OAAZ,EADF;AAEH,KARD;AAUA7D,IAAAA,CAAC,CAAC,yBAAD,CAAD,CAA6BiB,EAA7B,CACE,OADF,EACW,YAAM;AAEb,YAAKf,MAAL,CAAYwC,cAAZ,CAA2BoB,cAA3B,CACE,MAAKnC,MAAL,CAAYkC,OAAZ,EADF;;AAGA,YAAK3D,MAAL,CAAYwC,cAAZ,CAA2BkB,YAA3B,CACE,MAAK/B,MAAL,CAAYgC,OAAZ,EADF;AAEH,KARD;AAUA7D,IAAAA,CAAC,YAAK,MAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8BpB,EAA9B,CAAiC,cAAjC,EAAiD,YAAM;AAErD,UAAIiB,KAAK,GAAGlC,CAAC,YAAK,MAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAZ;AAEA/D,MAAAA,CAAC,YAAK,MAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC7B,KAAlC;AACAlC,MAAAA,CAAC,YAAK,MAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC7B,KAAlC;AAEAV,MAAAA,cAAc,CAAC,MAAKL,YAAN,EAAoB,IAApB,CAAd;AACD,KARD;AAUAnB,IAAAA,CAAC,CAAC,MAAM,MAAKsD,cAAZ,CAAD,CAA6Bd,KAA7B,CAAmC,YAAM;AAEvC,YAAKb,MAAL,CAAYqC,MAAZ;;AAEA,YAAKN,OAAL,CAAaO,QAAb;AACD,KALD;AAOA,UAAKP,OAAL,GAAe,IAAIjE,aAAJ,CAAkBS,MAAlB,CAAf;;AAEA,UAAKwD,OAAL,CAAaQ,UAAb,8GAGW,gBAHX;;AAzN8B;AA6N/B,G,CAED;AACA;AACA;AACA;;;;;gCACY7B,E,EAAI;AAEd,WAAK1B,mBAAL,GAA2BjB,aAAa,CAACyE,IAAd,EAA3B;AAEA,WAAKb,cAAL,GAAsB5D,aAAa,CAACyE,IAAd,EAAtB;AAEA,iFAIgB,KAAKxD,mBAJrB,6MAekB,KAAK2C,cAfvB,yYAiCmBjB,EAjCnB,6IAqCmBA,EArCnB,6IAyCmBA,EAzCnB,+SAqDmBA,EArDnB,2IAyDmBA,EAzDnB,2IA6DmBA,EA7DnB,+PAuEmBA,EAvEnB,6IA2EmBA,EA3EnB,6IA+EmBA,EA/EnB,4TA2FmBA,EA3FnB,kOAkG2CA,EAlG3C;AA0GD,K,CAED;AACA;AACA;AACA;;;;iCACchB,S,EAAW;AAEvBrB,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACS,WAAV,CAAsBiB,CAAtB,CAAwBqB,OAAxB,CAAgC,CAAhC,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACS,WAAV,CAAsBoB,CAAtB,CAAwBkB,OAAxB,CAAgC,CAAhC,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACS,WAAV,CAAsBqB,CAAtB,CAAwBiB,OAAxB,CAAgC,CAAhC,CAAlC;AAEApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACW,QAAV,CAAmBe,CAAnB,CAAqBqB,OAArB,CAA6B,CAA7B,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACW,QAAV,CAAmBkB,CAAnB,CAAqBkB,OAArB,CAA6B,CAA7B,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACW,QAAV,CAAmBmB,CAAnB,CAAqBiB,OAArB,CAA6B,CAA7B,CAAlC;AAEApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACa,KAAV,CAAgBa,CAAlD;AACA/C,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACa,KAAV,CAAgBgB,CAAlD;AACAlD,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC1C,SAAS,CAACa,KAAV,CAAgBiB,CAAlD;AACD,K,CAED;AACA;AACA;AACA;;;;+BACY;AAEV,UAAIJ,CAAC,GAAGsB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AACA,UAAIb,CAAC,GAAGmB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AACA,UAAIZ,CAAC,GAAGkB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AAEAhB,MAAAA,CAAC,GAAGuB,KAAK,CAACvB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AACAG,MAAAA,CAAC,GAAGoB,KAAK,CAACpB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AACAC,MAAAA,CAAC,GAAGmB,KAAK,CAACnB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AAEA,aAAO,IAAIpD,KAAK,CAACwE,OAAV,CAAkBxB,CAAlB,EAAqBG,CAArB,EAAwBC,CAAxB,CAAP;AACD;;;qCAEiB;AAEhB,UAAIJ,CAAC,GAAGsB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AACA,UAAIb,CAAC,GAAGmB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AACA,UAAIZ,CAAC,GAAGkB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AAEAhB,MAAAA,CAAC,GAAGuB,KAAK,CAACvB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AACAG,MAAAA,CAAC,GAAGoB,KAAK,CAACpB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AACAC,MAAAA,CAAC,GAAGmB,KAAK,CAACnB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AAEA,aAAO,IAAIpD,KAAK,CAACwE,OAAV,CAAkBxB,CAAlB,EAAqBG,CAArB,EAAwBC,CAAxB,CAAP;AACD;;;kCAEc;AAEb,UAAIJ,CAAC,GAAGsB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AACA,UAAIb,CAAC,GAAGmB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AACA,UAAIZ,CAAC,GAAGkB,UAAU,CAACrE,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,EAAD,CAAlB;AAEAhB,MAAAA,CAAC,GAAGuB,KAAK,CAACvB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AACAG,MAAAA,CAAC,GAAGoB,KAAK,CAACpB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AACAC,MAAAA,CAAC,GAAGmB,KAAK,CAACnB,CAAD,CAAL,GAAW,GAAX,GAAiBA,CAArB;AAEA,aAAO,IAAIpD,KAAK,CAACwE,OAAV,CAAkBxB,CAAlB,EAAqBG,CAArB,EAAwBC,CAAxB,CAAP;AACD,K,CAED;AACA;AACA;AACA;;;;6BACUjB,K,EAAO;AAEflC,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC7B,KAAK,CAACa,CAAN,CAAQqB,OAAR,CAAgB,CAAhB,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC7B,KAAK,CAACgB,CAAN,CAAQkB,OAAR,CAAgB,CAAhB,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC7B,KAAK,CAACiB,CAAN,CAAQiB,OAAR,CAAgB,CAAhB,CAAlC;AACD;;;mCAEetC,W,EAAa;AAE3B9B,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkCjC,WAAW,CAACiB,CAAZ,CAAcqB,OAAd,CAAsB,CAAtB,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkCjC,WAAW,CAACoB,CAAZ,CAAckB,OAAd,CAAsB,CAAtB,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkCjC,WAAW,CAACqB,CAAZ,CAAciB,OAAd,CAAsB,CAAtB,CAAlC;AACD;;;gCAEYpC,Q,EAAU;AAErBhC,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC/B,QAAQ,CAACe,CAAT,CAAWqB,OAAX,CAAmB,CAAnB,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC/B,QAAQ,CAACkB,CAAT,CAAWkB,OAAX,CAAmB,CAAnB,CAAlC;AACApE,MAAAA,CAAC,YAAK,KAAKI,SAAL,CAAeiC,EAApB,SAAD,CAA8B0B,GAA9B,CAAkC/B,QAAQ,CAACmB,CAAT,CAAWiB,OAAX,CAAmB,CAAnB,CAAlC;AACD,K,CAED;AACA;AACA;AACA;;;;qCACkB;AAEhB,WAAKzC,MAAL,CAAYC,cAAZ;AACA,WAAKC,MAAL,CAAYD,cAAZ;AACD;;;;EAtbgDlC,a;;SAA9BO,qB","sourcesContent":["/////////////////////////////////////////////////////////////////////\r\n//\r\n//\r\n//\r\n/////////////////////////////////////////////////////////////////////\r\n/* eslint-disable */\r\nimport TranslateTool from './Viewing.Tool.Translate'\r\nimport './Viewing.Extension.ModelTransformer.css'\r\nimport RotateTool from './Viewing.Tool.Rotate'\r\nimport ViewerTooltip from '../components/Viewer.Tooltip'\r\nimport ToolPanelBase from '../components/ToolPanelBase'\r\nimport SwitchButton from '../components/SwitchButton'\r\nimport Dropdown from '../components/Dropdown'\r\nconst Autodesk = window.Autodesk;\r\nconst THREE = window.THREE;\r\nconst $ = window.$;\r\n\r\n\r\nexport default class ModelTransformerPanel extends ToolPanelBase {\r\n\r\n  constructor(viewer, btnElement) {\r\n\r\n    super(viewer.container, 'Transform Models', {\r\n      buttonElement: btnElement,\r\n      closable: true,\r\n      movable: true,\r\n      shadow: true\r\n    })\r\n\r\n    $(this.container).addClass('model-transformer')\r\n\r\n    this.dropdown = new Dropdown({\r\n      container: '#' + this.dropdownContainerId,\r\n      title: 'Select Model',\r\n      prompt: 'Select Model ...',\r\n      pos: {\r\n        top: 0, left: 0\r\n      }\r\n    })\r\n\r\n    this.dropdown.on('item.selected', (model) => {\r\n\r\n      this.currentModel = model\r\n\r\n      if (model) {\r\n\r\n        this.setTransform(model.transform)\r\n\r\n        this.emit('model.selected', {\r\n          fitToView: true,\r\n          model\r\n        })\r\n      }\r\n    })\r\n\r\n    var applyTransform = (model, fitToView = false) => {\r\n      console.log(model);\r\n      this.txTool.clearSelection()\r\n      this.rxTool.clearSelection()\r\n\r\n      if (model) {\r\n\r\n        this.emit('model.transform', {\r\n\r\n          model: model,\r\n\r\n          fitToView,\r\n\r\n          transform: {\r\n            translation: this.getTranslation(),\r\n            rotation: this.getRotation(),\r\n            scale: this.getScale()\r\n          }\r\n        })\r\n      }\r\n    };\r\n    // Adding this but needs improvement since Panel should be completely separate\r\n    // from the use of the Model Transformation of the model.\r\n    this.applyTransform = applyTransform;\r\n\r\n    this.fullTransformSwitch = new SwitchButton(\r\n      `#${this.container.id}-full-transform-switch`)\r\n\r\n    this.fullTransform = true\r\n\r\n    this.fullTransformSwitch.on('checked', (checked) => {\r\n\r\n      this.txTool.fullTransform = checked\r\n      this.rxTool.fullTransform = checked\r\n      this.fullTransform = checked\r\n\r\n      this.txTool.clearSelection()\r\n      this.rxTool.clearSelection()\r\n    })\r\n\r\n    $(`#${this.container.id}-unload-btn`).click(() => {\r\n\r\n      this.txTool.clearSelection()\r\n\r\n      if (this.currentModel) {\r\n\r\n        this.emit('model.delete', {\r\n\r\n          model: this.currentModel\r\n        })\r\n\r\n        this.dropdown.removeCurrentItem()\r\n      }\r\n    })\r\n\r\n    this.viewer = viewer\r\n\r\n    this.txTool = new TranslateTool(viewer)\r\n    this.rxTool = new RotateTool(viewer)\r\n\r\n    this.txTool.fullTransform = true\r\n    this.rxTool.fullTransform = true\r\n\r\n    this.viewer.toolController.registerTool(this.txTool)\r\n    this.viewer.toolController.registerTool(this.rxTool)\r\n\r\n    this.txTool.on('transform.translate', (data) => {\r\n\r\n      data.model.transform.translation = data.translation\r\n\r\n      this.setTranslation(\r\n        data.model.transform.translation)\r\n    })\r\n\r\n    this.rxTool.on('transform.rotate', (data) => {\r\n\r\n      data.model.transform.rotation = data.rotation\r\n\r\n      this.setRotation({\r\n        x: (data.rotation.x * 180 / Math.PI) % 360,\r\n        y: (data.rotation.y * 180 / Math.PI) % 360,\r\n        z: (data.rotation.z * 180 / Math.PI) % 360\r\n      })\r\n    })\r\n\r\n    var onModelSelected = (selection) => {\r\n\r\n      $('#' + this.transPickBtnId).prop(\r\n        'disabled', !this.txTool.active)\r\n\r\n      this.dropdown.setCurrentItem(selection.model)\r\n\r\n      this.setTransform(selection.model.transform)\r\n\r\n      this.currentModel = selection.model\r\n\r\n      this.emit('model.selected', {\r\n        model: selection.model,\r\n        fitToView: false\r\n      })\r\n\r\n      this.tooltip.deactivate()\r\n    }\r\n\r\n    this.txTool.on('transform.modelSelected',\r\n      onModelSelected)\r\n\r\n    this.txTool.on('transform.clearSelection', () => {\r\n\r\n      $('#' + this.transPickBtnId).prop(\r\n        'disabled', true)\r\n\r\n      this.tooltip.deactivate()\r\n    })\r\n\r\n    this.rxTool.on('transform.modelSelected',\r\n      onModelSelected)\r\n\r\n    this.on('open', () => {\r\n\r\n      this.viewer.toolController.activateTool(\r\n        this.txTool.getName())\r\n    })\r\n\r\n    this.on('close', () => {\r\n\r\n      this.viewer.toolController.deactivateTool(\r\n        this.txTool.getName())\r\n\r\n      this.viewer.toolController.deactivateTool(\r\n        this.rxTool.getName())\r\n\r\n      $('#' + this.transPickBtnId).prop(\r\n        'disabled', true)\r\n    })\r\n\r\n    $('.model-transformer .trans, ' +\r\n      '.model-transformer .rot').on(\r\n      'change keyup input paste', ()=>{\r\n\r\n        applyTransform(this.currentModel)\r\n    })\r\n\r\n    $('.model-transformer .trans').on(\r\n      'focus', () => {\r\n\r\n        this.viewer.toolController.deactivateTool(\r\n          this.rxTool.getName())\r\n\r\n        this.viewer.toolController.activateTool(\r\n          this.txTool.getName())\r\n    })\r\n\r\n    $('.model-transformer .rot').on(\r\n      'focus', () => {\r\n\r\n        this.viewer.toolController.deactivateTool(\r\n          this.txTool.getName())\r\n\r\n        this.viewer.toolController.activateTool(\r\n          this.rxTool.getName())\r\n    })\r\n\r\n    $(`#${this.container.id}-Sx`).on('change keyup', () => {\r\n\r\n      var scale = $(`#${this.container.id}-Sx`).val()\r\n\r\n      $(`#${this.container.id}-Sy`).val(scale)\r\n      $(`#${this.container.id}-Sz`).val(scale)\r\n\r\n      applyTransform(this.currentModel, true)\r\n    })\r\n\r\n    $('#' + this.transPickBtnId).click(() => {\r\n\r\n      this.txTool.onPick()\r\n\r\n      this.tooltip.activate()\r\n    })\r\n\r\n    this.tooltip = new ViewerTooltip(viewer)\r\n\r\n    this.tooltip.setContent(`\r\n      <div id=\"pickTooltipId\" class=\"pick-tooltip\">\r\n        <b>Pick position ...</b>\r\n      </div>`, '#pickTooltipId')\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  htmlContent(id) {\r\n\r\n    this.dropdownContainerId = ToolPanelBase.guid()\r\n\r\n    this.transPickBtnId = ToolPanelBase.guid()\r\n\r\n    return `\r\n\r\n      <div class=\"container\">\r\n\r\n         <div id=\"${this.dropdownContainerId}\">\r\n        </div>\r\n\r\n        <hr class=\"v-spacer\">\r\n\r\n        <span class=\"text-span\">\r\n            Snap:\r\n          </span>\r\n\r\n          <hr class=\"v-spacer\">\r\n\r\n        <button id=\"${this.transPickBtnId}\"\r\n            class=\"btn btn-trans-pick\" disabled>\r\n            <span class=\"glyphicon glyphicon-screenshot btn-span\">\r\n            </span>\r\n          </button>\r\n\r\n        <hr class=\"v-spacer\">\r\n\r\n        <div>\r\n\r\n          <span class=\"text-span\">\r\n            Translation:\r\n          </span>\r\n\r\n          <hr class=\"v-spacer\">\r\n\r\n          \r\n\r\n          <input id=\"${id}-Tx\" type=\"text\"\r\n            class=\"input numeric trans\"\r\n            placeholder=\"  x (0.0)\">\r\n\r\n          <input id=\"${id}-Ty\" type=\"text\"\r\n            class=\"input numeric trans\"\r\n            placeholder=\"  y (0.0)\">\r\n\r\n          <input id=\"${id}-Tz\" type=\"text\"\r\n            class=\"input numeric trans\"\r\n            placeholder=\"  z (0.0)\">\r\n\r\n          <hr class=\"v-spacer\">\r\n\r\n          <span class=\"text-span\">\r\n            Rotation (deg):\r\n          </span>\r\n\r\n          <hr class=\"v-spacer\">\r\n\r\n          <input id=\"${id}-Rx\" type=\"text\"\r\n            class=\"input numeric rot\"\r\n            placeholder=\"  x (0.0)\">\r\n\r\n          <input id=\"${id}-Ry\" type=\"text\"\r\n            class=\"input numeric rot\"\r\n            placeholder=\"  y (0.0)\">\r\n\r\n          <input id=\"${id}-Rz\" type=\"text\"\r\n            class=\"input numeric rot\"\r\n            placeholder=\"  z (0.0)\">\r\n\r\n          <span class=\"text-span\">\r\n            Scale:\r\n          </span>\r\n\r\n          <hr class=\"v-spacer\">\r\n\r\n          <input id=\"${id}-Sx\" type=\"text\"\r\n            class=\"input numeric scale\"\r\n            placeholder=\"  x (1.0)\">\r\n\r\n          <input id=\"${id}-Sy\" type=\"text\"\r\n            class=\"input numeric scale\"\r\n            placeholder=\"  y (1.0)\">\r\n\r\n          <input id=\"${id}-Sz\" type=\"text\"\r\n            class=\"input numeric scale\"\r\n            placeholder=\"  z (1.0)\">\r\n\r\n          <hr class=\"v-spacer-large\">\r\n\r\n        </div>\r\n\r\n        <div style=\"margin-top:8px\">\r\n\r\n          <div style=\"color:white;\">\r\n          Full Model Transform\r\n            <div id=\"${id}-full-transform-switch\"\r\n              style=\"float:left; margin-right:8px;\">\r\n            </div>\r\n          </div>\r\n\r\n          <hr class=\"v-spacer-large\">\r\n\r\n          <button class=\"btn btn-danger\" id=\"${id}-unload-btn\">\r\n            <span class=\"glyphicon glyphicon-save-file btn-span\">\r\n            </span>\r\n             Unload Model\r\n          </button>\r\n        </div>\r\n\r\n      </div>`\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  setTransform (transform) {\r\n\r\n    $(`#${this.container.id}-Tx`).val(transform.translation.x.toFixed(2))\r\n    $(`#${this.container.id}-Ty`).val(transform.translation.y.toFixed(2))\r\n    $(`#${this.container.id}-Tz`).val(transform.translation.z.toFixed(2))\r\n\r\n    $(`#${this.container.id}-Rx`).val(transform.rotation.x.toFixed(2))\r\n    $(`#${this.container.id}-Ry`).val(transform.rotation.y.toFixed(2))\r\n    $(`#${this.container.id}-Rz`).val(transform.rotation.z.toFixed(2))\r\n\r\n    $(`#${this.container.id}-Sx`).val(transform.scale.x)\r\n    $(`#${this.container.id}-Sy`).val(transform.scale.y)\r\n    $(`#${this.container.id}-Sz`).val(transform.scale.z)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  // Gets input transform\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  getScale () {\r\n\r\n    var x = parseFloat($(`#${this.container.id}-Sx`).val())\r\n    var y = parseFloat($(`#${this.container.id}-Sy`).val())\r\n    var z = parseFloat($(`#${this.container.id}-Sz`).val())\r\n\r\n    x = isNaN(x) ? 1.0 : x\r\n    y = isNaN(y) ? 1.0 : y\r\n    z = isNaN(z) ? 1.0 : z\r\n\r\n    return new THREE.Vector3(x, y, z)\r\n  }\r\n\r\n  getTranslation () {\r\n\r\n    var x = parseFloat($(`#${this.container.id}-Tx`).val())\r\n    var y = parseFloat($(`#${this.container.id}-Ty`).val())\r\n    var z = parseFloat($(`#${this.container.id}-Tz`).val())\r\n\r\n    x = isNaN(x) ? 0.0 : x\r\n    y = isNaN(y) ? 0.0 : y\r\n    z = isNaN(z) ? 0.0 : z\r\n\r\n    return new THREE.Vector3(x, y, z)\r\n  }\r\n\r\n  getRotation () {\r\n\r\n    var x = parseFloat($(`#${this.container.id}-Rx`).val())\r\n    var y = parseFloat($(`#${this.container.id}-Ry`).val())\r\n    var z = parseFloat($(`#${this.container.id}-Rz`).val())\r\n\r\n    x = isNaN(x) ? 0.0 : x\r\n    y = isNaN(y) ? 0.0 : y\r\n    z = isNaN(z) ? 0.0 : z\r\n\r\n    return new THREE.Vector3(x, y, z)\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  setScale (scale) {\r\n\r\n    $(`#${this.container.id}-Sx`).val(scale.x.toFixed(2))\r\n    $(`#${this.container.id}-Sy`).val(scale.y.toFixed(2))\r\n    $(`#${this.container.id}-Sz`).val(scale.z.toFixed(2))\r\n  }\r\n  \r\n  setTranslation (translation) {\r\n\r\n    $(`#${this.container.id}-Tx`).val(translation.x.toFixed(2))\r\n    $(`#${this.container.id}-Ty`).val(translation.y.toFixed(2))\r\n    $(`#${this.container.id}-Tz`).val(translation.z.toFixed(2))\r\n  }\r\n\r\n  setRotation (rotation) {\r\n\r\n    $(`#${this.container.id}-Rx`).val(rotation.x.toFixed(2))\r\n    $(`#${this.container.id}-Ry`).val(rotation.y.toFixed(2))\r\n    $(`#${this.container.id}-Rz`).val(rotation.z.toFixed(2))\r\n  }\r\n\r\n  /////////////////////////////////////////////////////////////\r\n  //\r\n  //\r\n  /////////////////////////////////////////////////////////////\r\n  clearSelection () {\r\n\r\n    this.txTool.clearSelection()\r\n    this.rxTool.clearSelection()\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}