{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\GitHub\\\\FrogeCsConfiguratorRivetec\\\\Vyvoj\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\n/////////////////////////////////////////////////////////////////////////////////\n// Copyright (c) Autodesk, Inc. All rights reserved\n// Written by Jaime Rosales 2016 - Forge Developer Partner Services\n//\n// Permission to use, copy, modify, and distribute this software in\n// object code form for any purpose and without fee is hereby granted,\n// provided that the above copyright notice appears in all copies and\n// that both that copyright notice and the limited warranty and\n// restricted rights notice below appear in all supporting\n// documentation.\n//\n// AUTODESK PROVIDES THIS PROGRAM \"AS IS\" AND WITH ALL FAULTS.\n// AUTODESK SPECIFICALLY DISCLAIMS ANY IMPLIED WARRANTY OF\n// MERCHANTABILITY OR FITNESS FOR A PARTICULAR USE.  AUTODESK, INC.\n// DOES NOT WARRANT THAT THE OPERATION OF THE PROGRAM WILL BE\n// UNINTERRUPTED OR ERROR FREE.\n/////////////////////////////////////////////////////////////////////////////////\nimport Client from '../Client';\nimport ModelTransformerExtension from '../../Viewing.Extension.ModelTransformer';\nimport EventTool from '../Viewer.EventTool/Viewer.EventTool';\nvar viewer;\nvar pointer;\nvar getToken = {\n  accessToken: Client.getaccesstoken()\n};\nvar pointData = {}; /// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\n\nvar Autodesk = window.Autodesk;\nvar THREE = window.THREE;\n\nfunction launchViewer(documentId) {\n  getToken.accessToken.then(function (token) {\n    var options = {\n      env: 'AutodeskProduction',\n      accessToken: token.access_token\n    };\n    var viewerDiv = document.getElementById('viewerDiv');\n    viewer = new Autodesk.Viewing.Private.GuiViewer3D(viewerDiv);\n    Autodesk.Viewing.Initializer(options, function onInitialized() {\n      var errorCode = viewer.start(); // Check for initialization errors.\n\n      if (errorCode) {\n        console.error('viewer.start() error - errorCode:' + errorCode);\n        return;\n      }\n\n      Autodesk.Viewing.Document.load(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\n    });\n  });\n}\n/**\r\n * Autodesk.Viewing.Document.load() success callback.\r\n * Proceeds with model initialization.\r\n */\n\n\nfunction onDocumentLoadSuccess(doc) {\n  // A document contains references to 3D and 2D viewables.\n  var viewables = Autodesk.Viewing.Document.getSubItemsWithProperties(doc.getRootItem(), {\n    'type': 'geometry'\n  }, true);\n\n  if (viewables.length === 0) {\n    console.error('Document contains no viewables.');\n    return;\n  }\n\n  var eventTool = new EventTool(viewer);\n  eventTool.activate();\n  eventTool.on('singleclick', function (event) {\n    pointer = event;\n  }); //load model.\n\n  viewer.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT, onGeometryLoadedHandler);\n  viewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT, onSelection);\n  viewer.prefs.tag('ignore-producer'); //viewer.impl.disableRollover(true); removed for viewer version 3.2\n\n  viewer.loadExtension(ModelTransformerExtension, {\n    parentControl: 'modelTools',\n    autoLoad: true\n  }); // Choose any of the available viewables.\n\n  var indexViewable = 0;\n  var lmvDoc = doc; // Everything is setup, load the model.\n\n  loadModel(viewables, lmvDoc, indexViewable);\n}\n/**\r\n* Autodesk.Viewing.Document.load() failuire callback.\r\n**/\n\n\nfunction onDocumentLoadFailure(viewerErrorCode) {\n  console.error('onDocumentLoadFailure() - errorCode:' + viewerErrorCode);\n} //////////////////////////////////////////////////////////////////////////\n// Model Geometry loaded callback\n//\n//////////////////////////////////////////////////////////////////////////\n\n\nfunction onGeometryLoadedHandler(event) {\n  event.target.model = event.model;\n  var viewer = event.target;\n  viewer.removeEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT, onGeometryLoadedHandler);\n  viewer.setQualityLevel(false, false);\n  viewer.setGroundShadow(false); //viewer.showAll();\n\n  viewer.fitToView();\n}\n\nfunction loadNextModel(documentId) {\n  var extInstance = viewer.getExtension(ModelTransformerExtension);\n  var pickVar = extInstance.panel;\n  pickVar.tooltip.setContent(\"\\n      <div id=\\\"pickTooltipId\\\" class=\\\"pick-tooltip\\\">\\n        <b>Pick position ...</b>\\n      </div>\", '#pickTooltipId');\n\n  if (!pointData.point) {\n    alert('You need to select a point in your house to snap the AC first');\n    pickVar.tooltip.activate();\n  } else {\n    Autodesk.Viewing.Document.load(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\n    pickVar.tooltip.deactivate();\n  }\n}\n\nfunction onSelection(event) {\n  if (event.selections && event.selections.length) {\n    pointData = viewer.clientToWorld(pointer.canvasX, pointer.canvasY, true);\n  }\n}\n\nfunction wallOneTransform() {\n  var transform = {\n    translation: new THREE.Vector3(0.0, 0.0, 0.0),\n    rotation: new THREE.Vector3(0.0, 0.0, 0.0),\n    scale: new THREE.Vector3(1, 1, 1)\n  };\n\n  switch (pointData.face.normal.x * pointData.face.normal.y === 0) {\n    case pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === 1:\n      transform.translation = new THREE.Vector3(pointData.point.x, pointData.point.y + 0.3, pointData.point.z);\n      transform.rotation = new THREE.Vector3(0, 0, 180);\n      console.log('Inside Y = 1 Wall');\n      break;\n\n    case pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === -1:\n      transform.translation = new THREE.Vector3(pointData.point.x, pointData.point.y - 0.3, pointData.point.z);\n      transform.rotation = new THREE.Vector3(0, 0, 0);\n      console.log('Inside Y = -1 Wall');\n      break;\n\n    case Math.round(pointData.face.normal.x) === 1 && pointData.face.normal.y === 0:\n      transform.translation = new THREE.Vector3(pointData.point.x + 0.3, pointData.point.y, pointData.point.z);\n      transform.rotation = new THREE.Vector3(90, 90, 0);\n      console.log('Inside X = 1 Wall');\n      break;\n\n    case Math.round(pointData.face.normal.x) === -1 && pointData.face.normal.y === 0:\n      transform.translation = new THREE.Vector3(pointData.point.x - 0.35, pointData.point.y, pointData.point.z);\n      transform.rotation = new THREE.Vector3(0, 180, 90);\n      console.log('Inside X = -1 Wall');\n      break;\n\n    default:\n      alert('You need to select one of the walls for this AC Unit');\n  }\n\n  return transform;\n}\n\nfunction wallTwoTransform() {\n  var transform = {\n    translation: new THREE.Vector3(0.0, 0.0, 0.0),\n    rotation: new THREE.Vector3(0.0, 0.0, 0.0),\n    scale: new THREE.Vector3(1, 1, 1)\n  };\n\n  switch (pointData.face.normal.x * pointData.face.normal.y === 0) {\n    case pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === 1:\n      transform.translation = new THREE.Vector3(pointData.point.x, pointData.point.y + 0.2, pointData.point.z);\n      transform.rotation = new THREE.Vector3(0, 0, 180);\n      console.log('Inside Y = 1 Wall');\n      break;\n\n    case pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === -1:\n      transform.translation = new THREE.Vector3(pointData.point.x, pointData.point.y - 0.2, pointData.point.z);\n      transform.rotation = new THREE.Vector3(0, 0, 0);\n      console.log('Inside Y = -1 Wall');\n      break;\n\n    case Math.round(pointData.face.normal.x) === 1 && pointData.face.normal.y === 0:\n      transform.translation = new THREE.Vector3(pointData.point.x + 0.2, pointData.point.y, pointData.point.z);\n      transform.rotation = new THREE.Vector3(90, 90, 0);\n      console.log('Inside X = 1 Wall');\n      break;\n\n    case Math.round(pointData.face.normal.x) === -1 && pointData.face.normal.y === 0:\n      transform.translation = new THREE.Vector3(pointData.point.x - 0.2, pointData.point.y, pointData.point.z);\n      transform.rotation = new THREE.Vector3(0, 180, 90);\n      console.log('Inside X = -1 Wall');\n      break;\n\n    default:\n      alert('You need to select one of the walls for this AC Unit');\n  }\n\n  return transform;\n}\n\nfunction floorTransform() {\n  var transform = {\n    translation: new THREE.Vector3(0.0, 0.0, 0.0),\n    rotation: new THREE.Vector3(0.0, 0.0, 0.0),\n    scale: new THREE.Vector3(1, 1, 1)\n  };\n  console.log(transform);\n\n  if (pointData.face.normal.x === 0 && pointData.face.normal.y === 0) {\n    transform.translation = new THREE.Vector3(pointData.point.x, pointData.point.y, pointData.point.z + 1);\n    console.log('Clipped to Floor Z axis');\n  } else {\n    alert('You need to select a point on the Floor');\n  }\n\n  return transform;\n}\n\nfunction loadModel(viewables, lmvDoc, indexViewable) {\n  return new Promise(\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(resolve, reject) {\n      var initialViewable, svfUrl, panel, modelName, modelOptions;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              initialViewable = viewables[indexViewable];\n              svfUrl = lmvDoc.getViewablePath(initialViewable);\n              modelOptions = {\n                sharedPropertyDbPath: lmvDoc.getPropertyDbPath()\n              };\n              viewer.loadModel(svfUrl, modelOptions, function (model) {\n                switch (lmvDoc.myData.status.toString() === \"success\") {\n                  case lmvDoc.myData.guid.toString() === \"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTA2LTA2LTEzLTUzLTQ2LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL09LTk9fMS5pcHQ\":\n                    panel = viewer.getExtension(ModelTransformerExtension).panel;\n                    panel.setTransform(wallOneTransform());\n                    panel.applyTransform(model);\n                    modelName = \"OKNO_1.ipt\";\n                    break;\n\n                  case lmvDoc.myData.guid.toString() === \"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTA2LTA2LTEzLTUzLTQ3LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL09LTk9fMi5pcHQ\":\n                    panel = viewer.getExtension(ModelTransformerExtension).panel;\n                    panel.setTransform(wallTwoTransform());\n                    panel.applyTransform(model);\n                    modelName = \"OKNO_2.ipt\";\n                    break;\n\n                  case lmvDoc.myData.guid.toString() === \"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTA2LTA2LTEzLTU2LTMwLWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0RWRVJFLmlwdA\":\n                    panel = viewer.getExtension(ModelTransformerExtension).panel;\n                    panel.setTransform(floorTransform());\n                    panel.applyTransform(model);\n                    modelName = \"DVERE.ipt\";\n                    break;\n\n                  default:\n                    //viewer.impl.toggleCelShading(true);\n                    modelName = \"KONTEJNER.ipt\";\n                }\n\n                model.name = modelName;\n                resolve(model);\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n}\n\nvar Helpers = {\n  launchViewer: launchViewer,\n  loadNextModel: loadNextModel\n};\nexport default Helpers;","map":{"version":3,"sources":["E:\\GitHub\\FrogeCsConfiguratorRivetec\\Vyvoj\\src\\js\\Viewer\\Viewer-Helpers.js"],"names":["Client","ModelTransformerExtension","EventTool","viewer","pointer","getToken","accessToken","getaccesstoken","pointData","Autodesk","window","THREE","launchViewer","documentId","then","token","options","env","access_token","viewerDiv","document","getElementById","Viewing","Private","GuiViewer3D","Initializer","onInitialized","errorCode","start","console","error","Document","load","onDocumentLoadSuccess","onDocumentLoadFailure","doc","viewables","getSubItemsWithProperties","getRootItem","length","eventTool","activate","on","event","addEventListener","GEOMETRY_LOADED_EVENT","onGeometryLoadedHandler","AGGREGATE_SELECTION_CHANGED_EVENT","onSelection","prefs","tag","loadExtension","parentControl","autoLoad","indexViewable","lmvDoc","loadModel","viewerErrorCode","target","model","removeEventListener","setQualityLevel","setGroundShadow","fitToView","loadNextModel","extInstance","getExtension","pickVar","panel","tooltip","setContent","point","alert","deactivate","selections","clientToWorld","canvasX","canvasY","wallOneTransform","transform","translation","Vector3","rotation","scale","face","normal","x","y","Math","round","z","log","wallTwoTransform","floorTransform","Promise","resolve","reject","initialViewable","svfUrl","getViewablePath","modelOptions","sharedPropertyDbPath","getPropertyDbPath","myData","status","toString","guid","setTransform","applyTransform","modelName","name","Helpers"],"mappings":"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","sourcesContent":["/////////////////////////////////////////////////////////////////////////////////\r\n// Copyright (c) Autodesk, Inc. All rights reserved\r\n// Written by Jaime Rosales 2016 - Forge Developer Partner Services\r\n//\r\n// Permission to use, copy, modify, and distribute this software in\r\n// object code form for any purpose and without fee is hereby granted,\r\n// provided that the above copyright notice appears in all copies and\r\n// that both that copyright notice and the limited warranty and\r\n// restricted rights notice below appear in all supporting\r\n// documentation.\r\n//\r\n// AUTODESK PROVIDES THIS PROGRAM \"AS IS\" AND WITH ALL FAULTS.\r\n// AUTODESK SPECIFICALLY DISCLAIMS ANY IMPLIED WARRANTY OF\r\n// MERCHANTABILITY OR FITNESS FOR A PARTICULAR USE.  AUTODESK, INC.\r\n// DOES NOT WARRANT THAT THE OPERATION OF THE PROGRAM WILL BE\r\n// UNINTERRUPTED OR ERROR FREE.\r\n/////////////////////////////////////////////////////////////////////////////////\r\n\r\nimport Client from '../Client';\r\nimport ModelTransformerExtension from '../../Viewing.Extension.ModelTransformer';\r\nimport EventTool from '../Viewer.EventTool/Viewer.EventTool'\r\n\r\nvar viewer;\r\nvar pointer;\r\n\r\nvar getToken = { accessToken: Client.getaccesstoken()};\r\nvar pointData ={};\r\n\r\n/// WHY I'M USING GLOBAL VARIABLES, SIMPLE I'M SETTING UP WITH REACT-SCRIPTS FOR EASIER 3RD PARTY DEVELOPER USE OF PROJECT\r\n/// https://github.com/facebookincubator/create-react-app/blob/master/packages/react-scripts/template/README.md#using-global-variables\r\n\r\nconst Autodesk = window.Autodesk;\r\nconst THREE = window.THREE;\r\n\r\nfunction launchViewer(documentId) {\r\n getToken.accessToken.then((token) => { \r\n    var options = {\r\n            env: 'AutodeskProduction',\r\n            accessToken: token.access_token\r\n    };\r\n    \r\n    var viewerDiv = document.getElementById('viewerDiv');\r\n    viewer = new Autodesk.Viewing.Private.GuiViewer3D(viewerDiv);\r\n\r\n    Autodesk.Viewing.Initializer(options, function onInitialized(){\r\n        var errorCode = viewer.start();\r\n\r\n        // Check for initialization errors.\r\n        if (errorCode) {\r\n            console.error('viewer.start() error - errorCode:' + errorCode);\r\n            return;\r\n        }\r\n            Autodesk.Viewing.Document.load(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\r\n        });\r\n })\r\n}\r\n\r\n\r\n/**\r\n * Autodesk.Viewing.Document.load() success callback.\r\n * Proceeds with model initialization.\r\n */\r\nfunction onDocumentLoadSuccess(doc) {\r\n\r\n    // A document contains references to 3D and 2D viewables.\r\n    var viewables = Autodesk.Viewing.Document.getSubItemsWithProperties(doc.getRootItem(), {'type':'geometry'}, true);\r\n    if (viewables.length === 0) {\r\n        console.error('Document contains no viewables.');\r\n        return;\r\n    }\r\n\r\n    var eventTool = new EventTool(viewer)\r\n    eventTool.activate()\r\n    eventTool.on('singleclick', (event) => {\r\n        pointer = event\r\n    })\r\n\r\n    //load model.\r\n    viewer.addEventListener(Autodesk.Viewing.GEOMETRY_LOADED_EVENT, onGeometryLoadedHandler);\r\n    viewer.addEventListener(Autodesk.Viewing.AGGREGATE_SELECTION_CHANGED_EVENT,onSelection);\r\n    viewer.prefs.tag('ignore-producer');\r\n    \r\n    //viewer.impl.disableRollover(true); removed for viewer version 3.2\r\n    viewer.loadExtension(ModelTransformerExtension, {\r\n         parentControl: 'modelTools',\r\n         autoLoad: true\r\n    })  \r\n    // Choose any of the available viewables.\r\n    var indexViewable = 0;\r\n    var lmvDoc = doc;\r\n\r\n    // Everything is setup, load the model.\r\n    loadModel(viewables, lmvDoc, indexViewable);\r\n}\r\n\r\n/**\r\n* Autodesk.Viewing.Document.load() failuire callback.\r\n**/\r\nfunction onDocumentLoadFailure(viewerErrorCode) {\r\n    console.error('onDocumentLoadFailure() - errorCode:' + viewerErrorCode);\r\n}\r\n\r\n//////////////////////////////////////////////////////////////////////////\r\n// Model Geometry loaded callback\r\n//\r\n//////////////////////////////////////////////////////////////////////////\r\nfunction onGeometryLoadedHandler(event) {\r\n        event.target.model = event.model\r\n        var viewer = event.target;\r\n        viewer.removeEventListener(\r\n                Autodesk.Viewing.GEOMETRY_LOADED_EVENT,\r\n                onGeometryLoadedHandler);\r\n        viewer.setQualityLevel(false,false);\r\n        viewer.setGroundShadow(false);\r\n        //viewer.showAll();\r\n        viewer.fitToView();\r\n}\r\n\r\n\r\nfunction loadNextModel(documentId) {\r\n     const extInstance = viewer.getExtension(ModelTransformerExtension);\r\n     const pickVar = extInstance.panel;\r\n\r\n     pickVar.tooltip.setContent(`\r\n      <div id=\"pickTooltipId\" class=\"pick-tooltip\">\r\n        <b>Pick position ...</b>\r\n      </div>`, '#pickTooltipId')\r\n\r\n    if (!pointData.point){\r\n        alert('You need to select a point in your house to snap the AC first');\r\n        pickVar.tooltip.activate();\r\n    }\r\n    else{\r\n        Autodesk.Viewing.Document.load(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\r\n        pickVar.tooltip.deactivate();\r\n    }\r\n   \r\n}\r\n\r\n\r\nfunction onSelection (event) {\r\n    if (event.selections && event.selections.length) {\r\n        pointData = viewer.clientToWorld(\r\n            pointer.canvasX,\r\n            pointer.canvasY,\r\n            true)\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nfunction wallOneTransform(){\r\n\r\n        var transform = {\r\n            translation: new THREE.Vector3(0.0, 0.0, 0.0),\r\n            rotation: new THREE.Vector3(0.0, 0.0, 0.0),\r\n            scale: new THREE.Vector3(1, 1, 1)\r\n        }\r\n        switch (pointData.face.normal.x * pointData.face.normal.y === 0){\r\n        case (pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === 1):\r\n            transform.translation = new THREE.Vector3(pointData.point.x , pointData.point.y+0.3, pointData.point.z);\r\n            transform.rotation = new THREE.Vector3(0, 0, 180);\r\n            console.log('Inside Y = 1 Wall');\r\n            break;\r\n        case (pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === -1) :\r\n            transform.translation = new THREE.Vector3(pointData.point.x , pointData.point.y-0.3, pointData.point.z);\r\n            transform.rotation = new THREE.Vector3(0, 0, 0);\r\n            console.log('Inside Y = -1 Wall');\r\n            break;\r\n        case (Math.round(pointData.face.normal.x) === 1 && pointData.face.normal.y === 0):\r\n            transform.translation = new THREE.Vector3(pointData.point.x+0.3 , pointData.point.y, pointData.point.z);\r\n            transform.rotation = new THREE.Vector3(90, 90, 0);\r\n            console.log('Inside X = 1 Wall');\r\n            break;\r\n        case (Math.round(pointData.face.normal.x) === -1 && pointData.face.normal.y === 0):\r\n            transform.translation = new THREE.Vector3(pointData.point.x-0.35 , pointData.point.y, pointData.point.z);\r\n            transform.rotation = new THREE.Vector3(0, 180, 90);\r\n            console.log('Inside X = -1 Wall');\r\n            break;\r\n        default:\r\n            alert('You need to select one of the walls for this AC Unit');\r\n        }\r\n        return transform\r\n        \r\n \r\n}\r\n\r\nfunction wallTwoTransform(){\r\n   \r\n        var transform = {\r\n            translation: new THREE.Vector3(0.0, 0.0, 0.0),\r\n            rotation: new THREE.Vector3(0.0, 0.0, 0.0),\r\n            scale: new THREE.Vector3(1, 1, 1)\r\n        }\r\n        switch (pointData.face.normal.x * pointData.face.normal.y === 0){\r\n        case (pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === 1):\r\n            transform.translation = new THREE.Vector3(pointData.point.x , pointData.point.y+0.2, pointData.point.z);\r\n            transform.rotation = new THREE.Vector3(0, 0, 180);\r\n            console.log('Inside Y = 1 Wall');\r\n            break;\r\n        case (pointData.face.normal.x === 0 && Math.round(pointData.face.normal.y) === -1) :\r\n            transform.translation = new THREE.Vector3(pointData.point.x , pointData.point.y-0.2, pointData.point.z);\r\n            transform.rotation = new THREE.Vector3(0, 0, 0);\r\n            console.log('Inside Y = -1 Wall');\r\n            break;\r\n        case (Math.round(pointData.face.normal.x) === 1 && pointData.face.normal.y === 0):\r\n            transform.translation = new THREE.Vector3(pointData.point.x +0.2 , pointData.point.y, pointData.point.z);\r\n            transform.rotation = new THREE.Vector3(90, 90, 0);\r\n            console.log('Inside X = 1 Wall');\r\n            break;\r\n        case (Math.round(pointData.face.normal.x) === -1 && pointData.face.normal.y === 0):\r\n            transform.translation = new THREE.Vector3(pointData.point.x - 0.2 , pointData.point.y, pointData.point.z);\r\n            transform.rotation = new THREE.Vector3(0, 180, 90);\r\n            console.log('Inside X = -1 Wall');\r\n            break;\r\n        default:\r\n            alert('You need to select one of the walls for this AC Unit');\r\n        }\r\n        return transform\r\n \r\n}\r\n\r\n\r\nfunction floorTransform(){\r\n    var transform = {\r\n        translation: new THREE.Vector3(0.0, 0.0, 0.0),\r\n        rotation: new THREE.Vector3(0.0, 0.0, 0.0),\r\n        scale: new THREE.Vector3(1, 1, 1)\r\n    }\r\n        console.log(transform);\r\n        if (pointData.face.normal.x === 0 && pointData.face.normal.y === 0 ){\r\n            transform.translation = new THREE.Vector3(pointData.point.x , pointData.point.y , pointData.point.z+1);\r\n            console.log('Clipped to Floor Z axis');\r\n        }\r\n        else {\r\n            alert('You need to select a point on the Floor');\r\n        }\r\n        return transform;\r\n}\r\n\r\n\r\nfunction loadModel(viewables, lmvDoc, indexViewable) {\r\n\r\n    return new Promise(async(resolve, reject)=> {\r\n        var initialViewable = viewables[indexViewable];\r\n        var svfUrl = lmvDoc.getViewablePath(initialViewable);\r\n        var panel;\r\n        var modelName;\r\n\r\n        var modelOptions = {\r\n                    sharedPropertyDbPath: lmvDoc.getPropertyDbPath(),\r\n        };\r\n\r\n        viewer.loadModel(svfUrl, modelOptions, (model) => {\r\n            \r\n            switch (lmvDoc.myData.status.toString() === \"success\" ) {\r\n            case (lmvDoc.myData.guid.toString() === \"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTA2LTA2LTEzLTUzLTQ2LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL09LTk9fMS5pcHQ\"):\r\n                \r\n                panel = viewer.getExtension(ModelTransformerExtension).panel;\r\n                panel.setTransform(wallOneTransform());\r\n                panel.applyTransform(model);\r\n                modelName = \"OKNO_1.ipt\"    \r\n                break;\r\n\r\n            case (lmvDoc.myData.guid.toString() === \"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTA2LTA2LTEzLTUzLTQ3LWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL09LTk9fMi5pcHQ\"):\r\n                \r\n                panel = viewer.getExtension(ModelTransformerExtension).panel;\r\n                panel.setTransform(wallTwoTransform()); \r\n                panel.applyTransform(model); \r\n                modelName = \"OKNO_2.ipt\"\r\n                break;\r\n                \r\n            case (lmvDoc.myData.guid.toString() === \"dXJuOmFkc2sub2JqZWN0czpvcy5vYmplY3Q6bW9kZWwyMDE4LTA2LTA2LTEzLTU2LTMwLWQ0MWQ4Y2Q5OGYwMGIyMDRlOTgwMDk5OGVjZjg0MjdlL0RWRVJFLmlwdA\"):\r\n                panel = viewer.getExtension(ModelTransformerExtension).panel;\r\n                panel.setTransform(floorTransform());\r\n                panel.applyTransform(model);\r\n                modelName = \"DVERE.ipt\"\r\n                break;\r\n            default:\r\n                //viewer.impl.toggleCelShading(true);\r\n                modelName = \"KONTEJNER.ipt\";\r\n            }\r\n\r\n            model.name = modelName;\r\n            resolve(model)\r\n        })\r\n    })\r\n}\r\n\r\n\r\nconst Helpers = {\r\n  launchViewer,\r\n  loadNextModel\r\n};\r\n\r\nexport default Helpers;"]},"metadata":{},"sourceType":"module"}